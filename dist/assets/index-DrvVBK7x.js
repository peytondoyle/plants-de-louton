(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();function Pb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Bb(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var n=r.default;if(typeof n=="function"){var a=function s(){var o=!1;try{o=this instanceof s}catch{}return o?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};a.prototype=n.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var o=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(a,s,o.get?o:{enumerable:!0,get:function(){return r[s]}})}),a}var ad={exports:{}},Rr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug;function zb(){if(ug)return Rr;ug=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:r,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Rr.Fragment=n,Rr.jsx=a,Rr.jsxs=a,Rr}var dg;function Ib(){return dg||(dg=1,ad.exports=zb()),ad.exports}var h=Ib(),id={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg;function qb(){if(fg)return Ce;fg=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.iterator;function w(N){return N===null||typeof N!="object"?null:(N=b&&N[b]||N["@@iterator"],typeof N=="function"?N:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,C={};function A(N,q,ae){this.props=N,this.context=q,this.refs=C,this.updater=ae||x}A.prototype.isReactComponent={},A.prototype.setState=function(N,q){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,q,"setState")},A.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function j(){}j.prototype=A.prototype;function z(N,q,ae){this.props=N,this.context=q,this.refs=C,this.updater=ae||x}var E=z.prototype=new j;E.constructor=z,T(E,A.prototype),E.isPureReactComponent=!0;var I=Array.isArray,V={H:null,A:null,T:null,S:null,V:null},Y=Object.prototype.hasOwnProperty;function B(N,q,ae,ee,ce,Se){return ae=Se.ref,{$$typeof:r,type:N,key:q,ref:ae!==void 0?ae:null,props:Se}}function J(N,q){return B(N.type,q,void 0,void 0,void 0,N.props)}function ie(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function oe(N){var q={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ae){return q[ae]})}var de=/\/+/g;function _e(N,q){return typeof N=="object"&&N!==null&&N.key!=null?oe(""+N.key):q.toString(36)}function Ne(){}function Me(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(Ne,Ne):(N.status="pending",N.then(function(q){N.status==="pending"&&(N.status="fulfilled",N.value=q)},function(q){N.status==="pending"&&(N.status="rejected",N.reason=q)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function Ee(N,q,ae,ee,ce){var Se=typeof N;(Se==="undefined"||Se==="boolean")&&(N=null);var he=!1;if(N===null)he=!0;else switch(Se){case"bigint":case"string":case"number":he=!0;break;case"object":switch(N.$$typeof){case r:case n:he=!0;break;case y:return he=N._init,Ee(he(N._payload),q,ae,ee,ce)}}if(he)return ce=ce(N),he=ee===""?"."+_e(N,0):ee,I(ce)?(ae="",he!=null&&(ae=he.replace(de,"$&/")+"/"),Ee(ce,q,ae,"",function(et){return et})):ce!=null&&(ie(ce)&&(ce=J(ce,ae+(ce.key==null||N&&N.key===ce.key?"":(""+ce.key).replace(de,"$&/")+"/")+he)),q.push(ce)),1;he=0;var Le=ee===""?".":ee+":";if(I(N))for(var xe=0;xe<N.length;xe++)ee=N[xe],Se=Le+_e(ee,xe),he+=Ee(ee,q,ae,Se,ce);else if(xe=w(N),typeof xe=="function")for(N=xe.call(N),xe=0;!(ee=N.next()).done;)ee=ee.value,Se=Le+_e(ee,xe++),he+=Ee(ee,q,ae,Se,ce);else if(Se==="object"){if(typeof N.then=="function")return Ee(Me(N),q,ae,ee,ce);throw q=String(N),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return he}function P(N,q,ae){if(N==null)return N;var ee=[],ce=0;return Ee(N,ee,"","",function(Se){return q.call(ae,Se,ce++)}),ee}function Q(N){if(N._status===-1){var q=N._result;q=q(),q.then(function(ae){(N._status===0||N._status===-1)&&(N._status=1,N._result=ae)},function(ae){(N._status===0||N._status===-1)&&(N._status=2,N._result=ae)}),N._status===-1&&(N._status=0,N._result=q)}if(N._status===1)return N._result.default;throw N._result}var X=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function le(){}return Ce.Children={map:P,forEach:function(N,q,ae){P(N,function(){q.apply(this,arguments)},ae)},count:function(N){var q=0;return P(N,function(){q++}),q},toArray:function(N){return P(N,function(q){return q})||[]},only:function(N){if(!ie(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ce.Component=A,Ce.Fragment=a,Ce.Profiler=o,Ce.PureComponent=z,Ce.StrictMode=s,Ce.Suspense=m,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(N){return V.H.useMemoCache(N)}},Ce.cache=function(N){return function(){return N.apply(null,arguments)}},Ce.cloneElement=function(N,q,ae){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ee=T({},N.props),ce=N.key,Se=void 0;if(q!=null)for(he in q.ref!==void 0&&(Se=void 0),q.key!==void 0&&(ce=""+q.key),q)!Y.call(q,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&q.ref===void 0||(ee[he]=q[he]);var he=arguments.length-2;if(he===1)ee.children=ae;else if(1<he){for(var Le=Array(he),xe=0;xe<he;xe++)Le[xe]=arguments[xe+2];ee.children=Le}return B(N.type,ce,void 0,void 0,Se,ee)},Ce.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:c,_context:N},N},Ce.createElement=function(N,q,ae){var ee,ce={},Se=null;if(q!=null)for(ee in q.key!==void 0&&(Se=""+q.key),q)Y.call(q,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ce[ee]=q[ee]);var he=arguments.length-2;if(he===1)ce.children=ae;else if(1<he){for(var Le=Array(he),xe=0;xe<he;xe++)Le[xe]=arguments[xe+2];ce.children=Le}if(N&&N.defaultProps)for(ee in he=N.defaultProps,he)ce[ee]===void 0&&(ce[ee]=he[ee]);return B(N,Se,void 0,void 0,null,ce)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(N){return{$$typeof:p,render:N}},Ce.isValidElement=ie,Ce.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:Q}},Ce.memo=function(N,q){return{$$typeof:g,type:N,compare:q===void 0?null:q}},Ce.startTransition=function(N){var q=V.T,ae={};V.T=ae;try{var ee=N(),ce=V.S;ce!==null&&ce(ae,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(le,X)}catch(Se){X(Se)}finally{V.T=q}},Ce.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Ce.use=function(N){return V.H.use(N)},Ce.useActionState=function(N,q,ae){return V.H.useActionState(N,q,ae)},Ce.useCallback=function(N,q){return V.H.useCallback(N,q)},Ce.useContext=function(N){return V.H.useContext(N)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(N,q){return V.H.useDeferredValue(N,q)},Ce.useEffect=function(N,q,ae){var ee=V.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(N,q)},Ce.useId=function(){return V.H.useId()},Ce.useImperativeHandle=function(N,q,ae){return V.H.useImperativeHandle(N,q,ae)},Ce.useInsertionEffect=function(N,q){return V.H.useInsertionEffect(N,q)},Ce.useLayoutEffect=function(N,q){return V.H.useLayoutEffect(N,q)},Ce.useMemo=function(N,q){return V.H.useMemo(N,q)},Ce.useOptimistic=function(N,q){return V.H.useOptimistic(N,q)},Ce.useReducer=function(N,q,ae){return V.H.useReducer(N,q,ae)},Ce.useRef=function(N){return V.H.useRef(N)},Ce.useState=function(N){return V.H.useState(N)},Ce.useSyncExternalStore=function(N,q,ae){return V.H.useSyncExternalStore(N,q,ae)},Ce.useTransition=function(){return V.H.useTransition()},Ce.version="19.1.1",Ce}var hg;function Kd(){return hg||(hg=1,id.exports=qb()),id.exports}var S=Kd(),sd={exports:{}},kr={},rd={exports:{}},ld={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg;function Hb(){return mg||(mg=1,function(r){function n(P,Q){var X=P.length;P.push(Q);e:for(;0<X;){var le=X-1>>>1,N=P[le];if(0<o(N,Q))P[le]=Q,P[X]=N,X=le;else break e}}function a(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var Q=P[0],X=P.pop();if(X!==Q){P[0]=X;e:for(var le=0,N=P.length,q=N>>>1;le<q;){var ae=2*(le+1)-1,ee=P[ae],ce=ae+1,Se=P[ce];if(0>o(ee,X))ce<N&&0>o(Se,ee)?(P[le]=Se,P[ce]=X,le=ce):(P[le]=ee,P[ae]=X,le=ae);else if(ce<N&&0>o(Se,X))P[le]=Se,P[ce]=X,le=ce;else break e}}return Q}function o(P,Q){var X=P.sortIndex-Q.sortIndex;return X!==0?X:P.id-Q.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var m=[],g=[],y=1,b=null,w=3,x=!1,T=!1,C=!1,A=!1,j=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function I(P){for(var Q=a(g);Q!==null;){if(Q.callback===null)s(g);else if(Q.startTime<=P)s(g),Q.sortIndex=Q.expirationTime,n(m,Q);else break;Q=a(g)}}function V(P){if(C=!1,I(P),!T)if(a(m)!==null)T=!0,Y||(Y=!0,_e());else{var Q=a(g);Q!==null&&Ee(V,Q.startTime-P)}}var Y=!1,B=-1,J=5,ie=-1;function oe(){return A?!0:!(r.unstable_now()-ie<J)}function de(){if(A=!1,Y){var P=r.unstable_now();ie=P;var Q=!0;try{e:{T=!1,C&&(C=!1,z(B),B=-1),x=!0;var X=w;try{t:{for(I(P),b=a(m);b!==null&&!(b.expirationTime>P&&oe());){var le=b.callback;if(typeof le=="function"){b.callback=null,w=b.priorityLevel;var N=le(b.expirationTime<=P);if(P=r.unstable_now(),typeof N=="function"){b.callback=N,I(P),Q=!0;break t}b===a(m)&&s(m),I(P)}else s(m);b=a(m)}if(b!==null)Q=!0;else{var q=a(g);q!==null&&Ee(V,q.startTime-P),Q=!1}}break e}finally{b=null,w=X,x=!1}Q=void 0}}finally{Q?_e():Y=!1}}}var _e;if(typeof E=="function")_e=function(){E(de)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,Me=Ne.port2;Ne.port1.onmessage=de,_e=function(){Me.postMessage(null)}}else _e=function(){j(de,0)};function Ee(P,Q){B=j(function(){P(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_next=function(P){switch(w){case 1:case 2:case 3:var Q=3;break;default:Q=w}var X=w;w=Q;try{return P()}finally{w=X}},r.unstable_requestPaint=function(){A=!0},r.unstable_runWithPriority=function(P,Q){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var X=w;w=P;try{return Q()}finally{w=X}},r.unstable_scheduleCallback=function(P,Q,X){var le=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?le+X:le):X=le,P){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=X+N,P={id:y++,callback:Q,priorityLevel:P,startTime:X,expirationTime:N,sortIndex:-1},X>le?(P.sortIndex=X,n(g,P),a(m)===null&&P===a(g)&&(C?(z(B),B=-1):C=!0,Ee(V,X-le))):(P.sortIndex=N,n(m,P),T||x||(T=!0,Y||(Y=!0,_e()))),P},r.unstable_shouldYield=oe,r.unstable_wrapCallback=function(P){var Q=w;return function(){var X=w;w=Q;try{return P.apply(this,arguments)}finally{w=X}}}}(ld)),ld}var pg;function Gb(){return pg||(pg=1,rd.exports=Hb()),rd.exports}var od={exports:{}},Ut={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gg;function $b(){if(gg)return Ut;gg=1;var r=Kd();function n(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(m,g,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:m,containerInfo:g,implementation:y}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ut.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ut.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return c(m,g,null,y)},Ut.flushSync=function(m){var g=d.T,y=s.p;try{if(d.T=null,s.p=2,m)return m()}finally{d.T=g,s.p=y,s.d.f()}},Ut.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},Ut.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Ut.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,b=p(y,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,x=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:x}):y==="script"&&s.d.X(m,{crossOrigin:b,integrity:w,fetchPriority:x,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ut.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=p(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},Ut.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,b=p(y,g.crossOrigin);s.d.L(m,y,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ut.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=p(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},Ut.requestFormReset=function(m){s.d.r(m)},Ut.unstable_batchedUpdates=function(m,g){return m(g)},Ut.useFormState=function(m,g,y){return d.H.useFormState(m,g,y)},Ut.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ut.version="19.1.1",Ut}var yg;function jy(){if(yg)return od.exports;yg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),od.exports=$b(),od.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vg;function Vb(){if(vg)return kr;vg=1;var r=Gb(),n=Kd(),a=jy();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(s(188))}function m(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,l=t;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(l=u.return,l!==null){i=l;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return p(u),e;if(f===l)return p(u),t;f=f.sibling}throw Error(s(188))}if(i.return!==l.return)i=u,l=f;else{for(var v=!1,_=u.child;_;){if(_===i){v=!0,i=u,l=f;break}if(_===l){v=!0,l=u,i=f;break}_=_.sibling}if(!v){for(_=f.child;_;){if(_===i){v=!0,i=f,l=u;break}if(_===l){v=!0,l=f,i=u;break}_=_.sibling}if(!v)throw Error(s(189))}}if(i.alternate!==l)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),E=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function _e(e){return e===null||typeof e!="object"?null:(e=de&&e[de]||e["@@iterator"],typeof e=="function"?e:null)}var Ne=Symbol.for("react.client.reference");function Me(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ne?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case A:return"Profiler";case C:return"StrictMode";case V:return"Suspense";case Y:return"SuspenseList";case ie:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case x:return"Portal";case E:return(e.displayName||"Context")+".Provider";case z:return(e._context.displayName||"Context")+".Consumer";case I:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B:return t=e.displayName||null,t!==null?t:Me(e.type)||"Memo";case J:t=e._payload,e=e._init;try{return Me(e(t))}catch{}}return null}var Ee=Array.isArray,P=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},le=[],N=-1;function q(e){return{current:e}}function ae(e){0>N||(e.current=le[N],le[N]=null,N--)}function ee(e,t){N++,le[N]=e.current,e.current=t}var ce=q(null),Se=q(null),he=q(null),Le=q(null);function xe(e,t){switch(ee(he,t),ee(Se,e),ee(ce,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Bp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Bp(t),e=zp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ae(ce),ee(ce,e)}function et(){ae(ce),ae(Se),ae(he)}function te(e){e.memoizedState!==null&&ee(Le,e);var t=ce.current,i=zp(t,e.type);t!==i&&(ee(Se,e),ee(ce,i))}function se(e){Se.current===e&&(ae(ce),ae(Se)),Le.current===e&&(ae(Le),jr._currentValue=X)}var Z=Object.prototype.hasOwnProperty,fe=r.unstable_scheduleCallback,pe=r.unstable_cancelCallback,Te=r.unstable_shouldYield,it=r.unstable_requestPaint,ze=r.unstable_now,Pt=r.unstable_getCurrentPriorityLevel,Rt=r.unstable_ImmediatePriority,Kt=r.unstable_UserBlockingPriority,Xt=r.unstable_NormalPriority,la=r.unstable_LowPriority,An=r.unstable_IdlePriority,kt=r.log,$a=r.unstable_setDisableYieldValue,Bn=null,vt=null;function sn(e){if(typeof kt=="function"&&$a(e),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(Bn,e)}catch{}}var mt=Math.clz32?Math.clz32:Fa,On=Math.log,Va=Math.LN2;function Fa(e){return e>>>=0,e===0?32:31-(On(e)/Va|0)|0}var $=256,K=4194304;function ne(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function re(e,t,i){var l=e.pendingLanes;if(l===0)return 0;var u=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var _=l&134217727;return _!==0?(l=_&~f,l!==0?u=ne(l):(v&=_,v!==0?u=ne(v):i||(i=_&~e,i!==0&&(u=ne(i))))):(_=l&~f,_!==0?u=ne(_):v!==0?u=ne(v):i||(i=l&~e,i!==0&&(u=ne(i)))),u===0?0:t!==0&&t!==u&&(t&f)===0&&(f=u&-u,i=t&-t,f>=i||f===32&&(i&4194048)!==0)?t:u}function ve(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ot(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jt(){var e=$;return $<<=1,($&4194048)===0&&($=256),e}function yn(){var e=K;return K<<=1,(K&62914560)===0&&(K=4194304),e}function Qt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Nn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function tl(e,t,i,l,u,f){var v=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var _=e.entanglements,O=e.expirationTimes,M=e.hiddenUpdates;for(i=v&~i;0<i;){var H=31-mt(i),F=1<<H;_[H]=0,O[H]=-1;var U=M[H];if(U!==null)for(M[H]=null,H=0;H<U.length;H++){var L=U[H];L!==null&&(L.lane&=-536870913)}i&=~F}l!==0&&nl(e,l,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~t))}function nl(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-mt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|i&4194090}function Us(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var l=31-mt(i),u=1<<l;u&t|e[l]&t&&(e[l]|=t),i&=~u}}function Ei(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ls(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ef(){var e=Q.p;return e!==0?e:(e=window.event,e===void 0?32:ig(e.type))}function jv(e,t){var i=Q.p;try{return Q.p=e,t()}finally{Q.p=i}}var oa=Math.random().toString(36).slice(2),Dt="__reactFiber$"+oa,qt="__reactProps$"+oa,ji="__reactContainer$"+oa,Xo="__reactEvents$"+oa,Cv="__reactListeners$"+oa,Av="__reactHandles$"+oa,jf="__reactResources$"+oa,Ps="__reactMarker$"+oa;function Qo(e){delete e[Dt],delete e[qt],delete e[Xo],delete e[Cv],delete e[Av]}function Ci(e){var t=e[Dt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[ji]||i[Dt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Gp(e);e!==null;){if(i=e[Dt])return i;e=Gp(e)}return t}e=i,i=e.parentNode}return null}function Ai(e){if(e=e[Dt]||e[ji]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Bs(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function Oi(e){var t=e[jf];return t||(t=e[jf]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function bt(e){e[Ps]=!0}var Cf=new Set,Af={};function Ya(e,t){Ni(e,t),Ni(e+"Capture",t)}function Ni(e,t){for(Af[e]=t,e=0;e<t.length;e++)Cf.add(t[e])}var Ov=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Of={},Nf={};function Nv(e){return Z.call(Nf,e)?!0:Z.call(Of,e)?!1:Ov.test(e)?Nf[e]=!0:(Of[e]=!0,!1)}function al(e,t,i){if(Nv(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function il(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function zn(e,t,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+l)}}var Zo,Rf;function Ri(e){if(Zo===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Zo=t&&t[1]||"",Rf=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zo+e+Rf}var Jo=!1;function Wo(e,t){if(!e||Jo)return"";Jo=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(L){var U=L}Reflect.construct(e,[],F)}else{try{F.call()}catch(L){U=L}e.call(F.prototype)}}else{try{throw Error()}catch(L){U=L}(F=e())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(L){if(L&&U&&typeof L.stack=="string")return[L.stack,U.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),v=f[0],_=f[1];if(v&&_){var O=v.split(`
`),M=_.split(`
`);for(u=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;if(l===O.length||u===M.length)for(l=O.length-1,u=M.length-1;1<=l&&0<=u&&O[l]!==M[u];)u--;for(;1<=l&&0<=u;l--,u--)if(O[l]!==M[u]){if(l!==1||u!==1)do if(l--,u--,0>u||O[l]!==M[u]){var H=`
`+O[l].replace(" at new "," at ");return e.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",e.displayName)),H}while(1<=l&&0<=u);break}}}finally{Jo=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ri(i):""}function Rv(e){switch(e.tag){case 26:case 27:case 5:return Ri(e.type);case 16:return Ri("Lazy");case 13:return Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 15:return Wo(e.type,!1);case 11:return Wo(e.type.render,!1);case 1:return Wo(e.type,!0);case 31:return Ri("Activity");default:return""}}function kf(e){try{var t="";do t+=Rv(e),e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function rn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Df(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kv(e){var t=Df(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,f=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(v){l=""+v,f.call(this,v)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sl(e){e._valueTracker||(e._valueTracker=kv(e))}function Mf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),l="";return e&&(l=Df(e)?e.checked?"true":"false":e.value),e=l,e!==i?(t.setValue(e),!0):!1}function rl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Dv=/[\n"\\]/g;function ln(e){return e.replace(Dv,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ec(e,t,i,l,u,f,v,_){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+rn(t)):e.value!==""+rn(t)&&(e.value=""+rn(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?tc(e,v,rn(t)):i!=null?tc(e,v,rn(i)):l!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+rn(_):e.removeAttribute("name")}function Uf(e,t,i,l,u,f,v,_){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||t!=null))return;i=i!=null?""+rn(i):"",t=t!=null?""+rn(t):i,_||t===e.value||(e.value=t),e.defaultValue=t}l=l??u,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=_?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function tc(e,t,i){t==="number"&&rl(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function ki(e,t,i,l){if(e=e.options,t){t={};for(var u=0;u<i.length;u++)t["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=t.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&l&&(e[i].defaultSelected=!0)}else{for(i=""+rn(i),t=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function Lf(e,t,i){if(t!=null&&(t=""+rn(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+rn(i):""}function Pf(e,t,i,l){if(t==null){if(l!=null){if(i!=null)throw Error(s(92));if(Ee(l)){if(1<l.length)throw Error(s(93));l=l[0]}i=l}i==null&&(i=""),t=i}i=rn(t),e.defaultValue=i,l=e.textContent,l===i&&l!==""&&l!==null&&(e.value=l)}function Di(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Mv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bf(e,t,i){var l=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,i):typeof i!="number"||i===0||Mv.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function zf(e,t,i){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var u in t)l=t[u],t.hasOwnProperty(u)&&i[u]!==l&&Bf(e,u,l)}else for(var f in t)t.hasOwnProperty(f)&&Bf(e,f,t[f])}function nc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ll(e){return Lv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var ac=null;function ic(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mi=null,Ui=null;function If(e){var t=Ai(e);if(t&&(e=t.stateNode)){var i=e[qt]||null;e:switch(e=t.stateNode,t.type){case"input":if(ec(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+ln(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var l=i[t];if(l!==e&&l.form===e.form){var u=l[qt]||null;if(!u)throw Error(s(90));ec(l,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<i.length;t++)l=i[t],l.form===e.form&&Mf(l)}break e;case"textarea":Lf(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&ki(e,!!i.multiple,t,!1)}}}var sc=!1;function qf(e,t,i){if(sc)return e(t,i);sc=!0;try{var l=e(t);return l}finally{if(sc=!1,(Mi!==null||Ui!==null)&&(Fl(),Mi&&(t=Mi,e=Ui,Ui=Mi=null,If(t),e)))for(t=0;t<e.length;t++)If(e[t])}}function zs(e,t){var i=e.stateNode;if(i===null)return null;var l=i[qt]||null;if(l===null)return null;i=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rc=!1;if(In)try{var Is={};Object.defineProperty(Is,"passive",{get:function(){rc=!0}}),window.addEventListener("test",Is,Is),window.removeEventListener("test",Is,Is)}catch{rc=!1}var ca=null,lc=null,ol=null;function Hf(){if(ol)return ol;var e,t=lc,i=t.length,l,u="value"in ca?ca.value:ca.textContent,f=u.length;for(e=0;e<i&&t[e]===u[e];e++);var v=i-e;for(l=1;l<=v&&t[i-l]===u[f-l];l++);return ol=u.slice(e,1<l?1-l:void 0)}function cl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ul(){return!0}function Gf(){return!1}function Ht(e){function t(i,l,u,f,v){this._reactName=i,this._targetInst=u,this.type=l,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(i=e[_],this[_]=i?i(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ul:Gf,this.isPropagationStopped=Gf,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ul)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ul)},persist:function(){},isPersistent:ul}),t}var Ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dl=Ht(Ka),qs=y({},Ka,{view:0,detail:0}),Pv=Ht(qs),oc,cc,Hs,fl=y({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hs&&(Hs&&e.type==="mousemove"?(oc=e.screenX-Hs.screenX,cc=e.screenY-Hs.screenY):cc=oc=0,Hs=e),oc)},movementY:function(e){return"movementY"in e?e.movementY:cc}}),$f=Ht(fl),Bv=y({},fl,{dataTransfer:0}),zv=Ht(Bv),Iv=y({},qs,{relatedTarget:0}),uc=Ht(Iv),qv=y({},Ka,{animationName:0,elapsedTime:0,pseudoElement:0}),Hv=Ht(qv),Gv=y({},Ka,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$v=Ht(Gv),Vv=y({},Ka,{data:0}),Vf=Ht(Vv),Fv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Kv[e])?!!t[e]:!1}function dc(){return Xv}var Qv=y({},qs,{key:function(e){if(e.key){var t=Fv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Yv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dc,charCode:function(e){return e.type==="keypress"?cl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zv=Ht(Qv),Jv=y({},fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ff=Ht(Jv),Wv=y({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dc}),e0=Ht(Wv),t0=y({},Ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),n0=Ht(t0),a0=y({},fl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),i0=Ht(a0),s0=y({},Ka,{newState:0,oldState:0}),r0=Ht(s0),l0=[9,13,27,32],fc=In&&"CompositionEvent"in window,Gs=null;In&&"documentMode"in document&&(Gs=document.documentMode);var o0=In&&"TextEvent"in window&&!Gs,Yf=In&&(!fc||Gs&&8<Gs&&11>=Gs),Kf=" ",Xf=!1;function Qf(e,t){switch(e){case"keyup":return l0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Li=!1;function c0(e,t){switch(e){case"compositionend":return Zf(t);case"keypress":return t.which!==32?null:(Xf=!0,Kf);case"textInput":return e=t.data,e===Kf&&Xf?null:e;default:return null}}function u0(e,t){if(Li)return e==="compositionend"||!fc&&Qf(e,t)?(e=Hf(),ol=lc=ca=null,Li=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Yf&&t.locale!=="ko"?null:t.data;default:return null}}var d0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!d0[e.type]:t==="textarea"}function Wf(e,t,i,l){Mi?Ui?Ui.push(l):Ui=[l]:Mi=l,t=Jl(t,"onChange"),0<t.length&&(i=new dl("onChange","change",null,i,l),e.push({event:i,listeners:t}))}var $s=null,Vs=null;function f0(e){Dp(e,0)}function hl(e){var t=Bs(e);if(Mf(t))return e}function eh(e,t){if(e==="change")return t}var th=!1;if(In){var hc;if(In){var mc="oninput"in document;if(!mc){var nh=document.createElement("div");nh.setAttribute("oninput","return;"),mc=typeof nh.oninput=="function"}hc=mc}else hc=!1;th=hc&&(!document.documentMode||9<document.documentMode)}function ah(){$s&&($s.detachEvent("onpropertychange",ih),Vs=$s=null)}function ih(e){if(e.propertyName==="value"&&hl(Vs)){var t=[];Wf(t,Vs,e,ic(e)),qf(f0,t)}}function h0(e,t,i){e==="focusin"?(ah(),$s=t,Vs=i,$s.attachEvent("onpropertychange",ih)):e==="focusout"&&ah()}function m0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hl(Vs)}function p0(e,t){if(e==="click")return hl(t)}function g0(e,t){if(e==="input"||e==="change")return hl(t)}function y0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zt=typeof Object.is=="function"?Object.is:y0;function Fs(e,t){if(Zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var u=i[l];if(!Z.call(t,u)||!Zt(e[u],t[u]))return!1}return!0}function sh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rh(e,t){var i=sh(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=t&&l>=t)return{node:i,offset:t-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=sh(i)}}function lh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function oh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=rl(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=rl(e.document)}return t}function pc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var v0=In&&"documentMode"in document&&11>=document.documentMode,Pi=null,gc=null,Ys=null,yc=!1;function ch(e,t,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;yc||Pi==null||Pi!==rl(l)||(l=Pi,"selectionStart"in l&&pc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ys&&Fs(Ys,l)||(Ys=l,l=Jl(gc,"onSelect"),0<l.length&&(t=new dl("onSelect","select",null,t,i),e.push({event:t,listeners:l}),t.target=Pi)))}function Xa(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Bi={animationend:Xa("Animation","AnimationEnd"),animationiteration:Xa("Animation","AnimationIteration"),animationstart:Xa("Animation","AnimationStart"),transitionrun:Xa("Transition","TransitionRun"),transitionstart:Xa("Transition","TransitionStart"),transitioncancel:Xa("Transition","TransitionCancel"),transitionend:Xa("Transition","TransitionEnd")},vc={},uh={};In&&(uh=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function Qa(e){if(vc[e])return vc[e];if(!Bi[e])return e;var t=Bi[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in uh)return vc[e]=t[i];return e}var dh=Qa("animationend"),fh=Qa("animationiteration"),hh=Qa("animationstart"),b0=Qa("transitionrun"),w0=Qa("transitionstart"),_0=Qa("transitioncancel"),mh=Qa("transitionend"),ph=new Map,bc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bc.push("scrollEnd");function vn(e,t){ph.set(e,t),Ya(t,[e])}var gh=new WeakMap;function on(e,t){if(typeof e=="object"&&e!==null){var i=gh.get(e);return i!==void 0?i:(t={value:e,source:t,stack:kf(t)},gh.set(e,t),t)}return{value:e,source:t,stack:kf(t)}}var cn=[],zi=0,wc=0;function ml(){for(var e=zi,t=wc=zi=0;t<e;){var i=cn[t];cn[t++]=null;var l=cn[t];cn[t++]=null;var u=cn[t];cn[t++]=null;var f=cn[t];if(cn[t++]=null,l!==null&&u!==null){var v=l.pending;v===null?u.next=u:(u.next=v.next,v.next=u),l.pending=u}f!==0&&yh(i,u,f)}}function pl(e,t,i,l){cn[zi++]=e,cn[zi++]=t,cn[zi++]=i,cn[zi++]=l,wc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function _c(e,t,i,l){return pl(e,t,i,l),gl(e)}function Ii(e,t){return pl(e,null,null,t),gl(e)}function yh(e,t,i){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i);for(var u=!1,f=e.return;f!==null;)f.childLanes|=i,l=f.alternate,l!==null&&(l.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&t!==null&&(u=31-mt(i),e=f.hiddenUpdates,l=e[u],l===null?e[u]=[t]:l.push(t),t.lane=i|536870912),f):null}function gl(e){if(50<vr)throw vr=0,Cu=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var qi={};function S0(e,t,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(e,t,i,l){return new S0(e,t,i,l)}function Sc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qn(e,t){var i=e.alternate;return i===null?(i=Jt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function vh(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function yl(e,t,i,l,u,f){var v=0;if(l=e,typeof e=="function")Sc(e)&&(v=1);else if(typeof e=="string")v=Tb(e,i,ce.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ie:return e=Jt(31,i,t,u),e.elementType=ie,e.lanes=f,e;case T:return Za(i.children,u,f,t);case C:v=8,u|=24;break;case A:return e=Jt(12,i,t,u|2),e.elementType=A,e.lanes=f,e;case V:return e=Jt(13,i,t,u),e.elementType=V,e.lanes=f,e;case Y:return e=Jt(19,i,t,u),e.elementType=Y,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case j:case E:v=10;break e;case z:v=9;break e;case I:v=11;break e;case B:v=14;break e;case J:v=16,l=null;break e}v=29,i=Error(s(130,e===null?"null":typeof e,"")),l=null}return t=Jt(v,i,t,u),t.elementType=e,t.type=l,t.lanes=f,t}function Za(e,t,i,l){return e=Jt(7,e,l,t),e.lanes=i,e}function xc(e,t,i){return e=Jt(6,e,null,t),e.lanes=i,e}function Tc(e,t,i){return t=Jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hi=[],Gi=0,vl=null,bl=0,un=[],dn=0,Ja=null,Hn=1,Gn="";function Wa(e,t){Hi[Gi++]=bl,Hi[Gi++]=vl,vl=e,bl=t}function bh(e,t,i){un[dn++]=Hn,un[dn++]=Gn,un[dn++]=Ja,Ja=e;var l=Hn;e=Gn;var u=32-mt(l)-1;l&=~(1<<u),i+=1;var f=32-mt(t)+u;if(30<f){var v=u-u%5;f=(l&(1<<v)-1).toString(32),l>>=v,u-=v,Hn=1<<32-mt(t)+u|i<<u|l,Gn=f+e}else Hn=1<<f|i<<u|l,Gn=e}function Ec(e){e.return!==null&&(Wa(e,1),bh(e,1,0))}function jc(e){for(;e===vl;)vl=Hi[--Gi],Hi[Gi]=null,bl=Hi[--Gi],Hi[Gi]=null;for(;e===Ja;)Ja=un[--dn],un[dn]=null,Gn=un[--dn],un[dn]=null,Hn=un[--dn],un[dn]=null}var Bt=null,tt=null,Be=!1,ei=null,Rn=!1,Cc=Error(s(519));function ti(e){var t=Error(s(418,""));throw Qs(on(t,e)),Cc}function wh(e){var t=e.stateNode,i=e.type,l=e.memoizedProps;switch(t[Dt]=e,t[qt]=l,i){case"dialog":ke("cancel",t),ke("close",t);break;case"iframe":case"object":case"embed":ke("load",t);break;case"video":case"audio":for(i=0;i<wr.length;i++)ke(wr[i],t);break;case"source":ke("error",t);break;case"img":case"image":case"link":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"input":ke("invalid",t),Uf(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),sl(t);break;case"select":ke("invalid",t);break;case"textarea":ke("invalid",t),Pf(t,l.value,l.defaultValue,l.children),sl(t)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||l.suppressHydrationWarning===!0||Pp(t.textContent,i)?(l.popover!=null&&(ke("beforetoggle",t),ke("toggle",t)),l.onScroll!=null&&ke("scroll",t),l.onScrollEnd!=null&&ke("scrollend",t),l.onClick!=null&&(t.onclick=Wl),t=!0):t=!1,t||ti(e)}function _h(e){for(Bt=e.return;Bt;)switch(Bt.tag){case 5:case 13:Rn=!1;return;case 27:case 3:Rn=!0;return;default:Bt=Bt.return}}function Ks(e){if(e!==Bt)return!1;if(!Be)return _h(e),Be=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Gu(e.type,e.memoizedProps)),i=!i),i&&tt&&ti(e),_h(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(t===0){tt=wn(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++;e=e.nextSibling}tt=null}}else t===27?(t=tt,Ea(e.type)?(e=Yu,Yu=null,tt=e):tt=t):tt=Bt?wn(e.stateNode.nextSibling):null;return!0}function Xs(){tt=Bt=null,Be=!1}function Sh(){var e=ei;return e!==null&&(Vt===null?Vt=e:Vt.push.apply(Vt,e),ei=null),e}function Qs(e){ei===null?ei=[e]:ei.push(e)}var Ac=q(null),ni=null,$n=null;function ua(e,t,i){ee(Ac,t._currentValue),t._currentValue=i}function Vn(e){e._currentValue=Ac.current,ae(Ac)}function Oc(e,t,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===i)break;e=e.return}}function Nc(e,t,i,l){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var v=u.child;f=f.firstContext;e:for(;f!==null;){var _=f;f=u;for(var O=0;O<t.length;O++)if(_.context===t[O]){f.lanes|=i,_=f.alternate,_!==null&&(_.lanes|=i),Oc(f.return,i,e),l||(v=null);break e}f=_.next}}else if(u.tag===18){if(v=u.return,v===null)throw Error(s(341));v.lanes|=i,f=v.alternate,f!==null&&(f.lanes|=i),Oc(v,i,e),v=null}else v=u.child;if(v!==null)v.return=u;else for(v=u;v!==null;){if(v===e){v=null;break}if(u=v.sibling,u!==null){u.return=v.return,v=u;break}v=v.return}u=v}}function Zs(e,t,i,l){e=null;for(var u=t,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var v=u.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var _=u.type;Zt(u.pendingProps.value,v.value)||(e!==null?e.push(_):e=[_])}}else if(u===Le.current){if(v=u.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(jr):e=[jr])}u=u.return}e!==null&&Nc(t,e,i,l),t.flags|=262144}function wl(e){for(e=e.firstContext;e!==null;){if(!Zt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ai(e){ni=e,$n=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Mt(e){return xh(ni,e)}function _l(e,t){return ni===null&&ai(e),xh(e,t)}function xh(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},$n===null){if(e===null)throw Error(s(308));$n=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else $n=$n.next=t;return i}var x0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},T0=r.unstable_scheduleCallback,E0=r.unstable_NormalPriority,pt={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rc(){return{controller:new x0,data:new Map,refCount:0}}function Js(e){e.refCount--,e.refCount===0&&T0(E0,function(){e.controller.abort()})}var Ws=null,kc=0,$i=0,Vi=null;function j0(e,t){if(Ws===null){var i=Ws=[];kc=0,$i=Mu(),Vi={status:"pending",value:void 0,then:function(l){i.push(l)}}}return kc++,t.then(Th,Th),t}function Th(){if(--kc===0&&Ws!==null){Vi!==null&&(Vi.status="fulfilled");var e=Ws;Ws=null,$i=0,Vi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function C0(e,t){var i=[],l={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var u=0;u<i.length;u++)(0,i[u])(t)},function(u){for(l.status="rejected",l.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),l}var Eh=P.S;P.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&j0(e,t),Eh!==null&&Eh(e,t)};var ii=q(null);function Dc(){var e=ii.current;return e!==null?e:Fe.pooledCache}function Sl(e,t){t===null?ee(ii,ii.current):ee(ii,t.pool)}function jh(){var e=Dc();return e===null?null:{parent:pt._currentValue,pool:e}}var er=Error(s(460)),Ch=Error(s(474)),xl=Error(s(542)),Mc={then:function(){}};function Ah(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Tl(){}function Oh(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(Tl,Tl),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Rh(e),e;default:if(typeof t.status=="string")t.then(Tl,Tl);else{if(e=Fe,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=l}},function(l){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Rh(e),e}throw tr=t,er}}var tr=null;function Nh(){if(tr===null)throw Error(s(459));var e=tr;return tr=null,e}function Rh(e){if(e===er||e===xl)throw Error(s(483))}var da=!1;function Uc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function fa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ha(e,t,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ie&2)!==0){var u=l.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),l.pending=t,t=gl(e),yh(e,null,i),t}return pl(e,l,t,i),gl(e)}function nr(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,Us(e,i)}}function Pc(e,t){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var v={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?u=f=v:f=f.next=v,i=i.next}while(i!==null);f===null?u=f=t:f=f.next=t}else u=f=t;i={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Bc=!1;function ar(){if(Bc){var e=Vi;if(e!==null)throw e}}function ir(e,t,i,l){Bc=!1;var u=e.updateQueue;da=!1;var f=u.firstBaseUpdate,v=u.lastBaseUpdate,_=u.shared.pending;if(_!==null){u.shared.pending=null;var O=_,M=O.next;O.next=null,v===null?f=M:v.next=M,v=O;var H=e.alternate;H!==null&&(H=H.updateQueue,_=H.lastBaseUpdate,_!==v&&(_===null?H.firstBaseUpdate=M:_.next=M,H.lastBaseUpdate=O))}if(f!==null){var F=u.baseState;v=0,H=M=O=null,_=f;do{var U=_.lane&-536870913,L=U!==_.lane;if(L?(Ue&U)===U:(l&U)===U){U!==0&&U===$i&&(Bc=!0),H!==null&&(H=H.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var be=e,ge=_;U=t;var $e=i;switch(ge.tag){case 1:if(be=ge.payload,typeof be=="function"){F=be.call($e,F,U);break e}F=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=ge.payload,U=typeof be=="function"?be.call($e,F,U):be,U==null)break e;F=y({},F,U);break e;case 2:da=!0}}U=_.callback,U!==null&&(e.flags|=64,L&&(e.flags|=8192),L=u.callbacks,L===null?u.callbacks=[U]:L.push(U))}else L={lane:U,tag:_.tag,payload:_.payload,callback:_.callback,next:null},H===null?(M=H=L,O=F):H=H.next=L,v|=U;if(_=_.next,_===null){if(_=u.shared.pending,_===null)break;L=_,_=L.next,L.next=null,u.lastBaseUpdate=L,u.shared.pending=null}}while(!0);H===null&&(O=F),u.baseState=O,u.firstBaseUpdate=M,u.lastBaseUpdate=H,f===null&&(u.shared.lanes=0),_a|=v,e.lanes=v,e.memoizedState=F}}function kh(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Dh(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)kh(i[e],t)}var Fi=q(null),El=q(0);function Mh(e,t){e=Jn,ee(El,e),ee(Fi,t),Jn=e|t.baseLanes}function zc(){ee(El,Jn),ee(Fi,Fi.current)}function Ic(){Jn=El.current,ae(Fi),ae(El)}var ma=0,Ae=null,He=null,ct=null,jl=!1,Yi=!1,si=!1,Cl=0,sr=0,Ki=null,A0=0;function st(){throw Error(s(321))}function qc(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Zt(e[i],t[i]))return!1;return!0}function Hc(e,t,i,l,u,f){return ma=f,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=e===null||e.memoizedState===null?ym:vm,si=!1,f=i(l,u),si=!1,Yi&&(f=Lh(t,i,l,u)),Uh(e),f}function Uh(e){P.H=Dl;var t=He!==null&&He.next!==null;if(ma=0,ct=He=Ae=null,jl=!1,sr=0,Ki=null,t)throw Error(s(300));e===null||wt||(e=e.dependencies,e!==null&&wl(e)&&(wt=!0))}function Lh(e,t,i,l){Ae=e;var u=0;do{if(Yi&&(Ki=null),sr=0,Yi=!1,25<=u)throw Error(s(301));if(u+=1,ct=He=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}P.H=U0,f=t(i,l)}while(Yi);return f}function O0(){var e=P.H,t=e.useState()[0];return t=typeof t.then=="function"?rr(t):t,e=e.useState()[0],(He!==null?He.memoizedState:null)!==e&&(Ae.flags|=1024),t}function Gc(){var e=Cl!==0;return Cl=0,e}function $c(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Vc(e){if(jl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}jl=!1}ma=0,ct=He=Ae=null,Yi=!1,sr=Cl=0,Ki=null}function Gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Ae.memoizedState=ct=e:ct=ct.next=e,ct}function ut(){if(He===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=ct===null?Ae.memoizedState:ct.next;if(t!==null)ct=t,He=e;else{if(e===null)throw Ae.alternate===null?Error(s(467)):Error(s(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},ct===null?Ae.memoizedState=ct=e:ct=ct.next=e}return ct}function Fc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rr(e){var t=sr;return sr+=1,Ki===null&&(Ki=[]),e=Oh(Ki,e,t),t=Ae,(ct===null?t.memoizedState:ct.next)===null&&(t=t.alternate,P.H=t===null||t.memoizedState===null?ym:vm),e}function Al(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return rr(e);if(e.$$typeof===E)return Mt(e)}throw Error(s(438,String(e)))}function Yc(e){var t=null,i=Ae.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var l=Ae.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Fc(),Ae.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),l=0;l<e;l++)i[l]=oe;return t.index++,i}function Fn(e,t){return typeof t=="function"?t(e):t}function Ol(e){var t=ut();return Kc(t,He,e)}function Kc(e,t,i){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var u=e.baseQueue,f=l.pending;if(f!==null){if(u!==null){var v=u.next;u.next=f.next,f.next=v}t.baseQueue=u=f,l.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{t=u.next;var _=v=null,O=null,M=t,H=!1;do{var F=M.lane&-536870913;if(F!==M.lane?(Ue&F)===F:(ma&F)===F){var U=M.revertLane;if(U===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),F===$i&&(H=!0);else if((ma&U)===U){M=M.next,U===$i&&(H=!0);continue}else F={lane:0,revertLane:M.revertLane,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},O===null?(_=O=F,v=f):O=O.next=F,Ae.lanes|=U,_a|=U;F=M.action,si&&i(f,F),f=M.hasEagerState?M.eagerState:i(f,F)}else U={lane:F,revertLane:M.revertLane,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},O===null?(_=O=U,v=f):O=O.next=U,Ae.lanes|=F,_a|=F;M=M.next}while(M!==null&&M!==t);if(O===null?v=f:O.next=_,!Zt(f,e.memoizedState)&&(wt=!0,H&&(i=Vi,i!==null)))throw i;e.memoizedState=f,e.baseState=v,e.baseQueue=O,l.lastRenderedState=f}return u===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Xc(e){var t=ut(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var l=i.dispatch,u=i.pending,f=t.memoizedState;if(u!==null){i.pending=null;var v=u=u.next;do f=e(f,v.action),v=v.next;while(v!==u);Zt(f,t.memoizedState)||(wt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,l]}function Ph(e,t,i){var l=Ae,u=ut(),f=Be;if(f){if(i===void 0)throw Error(s(407));i=i()}else i=t();var v=!Zt((He||u).memoizedState,i);v&&(u.memoizedState=i,wt=!0),u=u.queue;var _=Ih.bind(null,l,u,e);if(lr(2048,8,_,[e]),u.getSnapshot!==t||v||ct!==null&&ct.memoizedState.tag&1){if(l.flags|=2048,Xi(9,Nl(),zh.bind(null,l,u,i,t),null),Fe===null)throw Error(s(349));f||(ma&124)!==0||Bh(l,t,i)}return i}function Bh(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ae.updateQueue,t===null?(t=Fc(),Ae.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function zh(e,t,i,l){t.value=i,t.getSnapshot=l,qh(t)&&Hh(e)}function Ih(e,t,i){return i(function(){qh(t)&&Hh(e)})}function qh(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Zt(e,i)}catch{return!0}}function Hh(e){var t=Ii(e,2);t!==null&&an(t,e,2)}function Qc(e){var t=Gt();if(typeof e=="function"){var i=e;if(e=i(),si){sn(!0);try{i()}finally{sn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:e},t}function Gh(e,t,i,l){return e.baseState=i,Kc(e,He,typeof l=="function"?l:Fn)}function N0(e,t,i,l,u){if(kl(e))throw Error(s(485));if(e=t.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};P.T!==null?i(!0):f.isTransition=!1,l(f),i=t.pending,i===null?(f.next=t.pending=f,$h(t,f)):(f.next=i.next,t.pending=i.next=f)}}function $h(e,t){var i=t.action,l=t.payload,u=e.state;if(t.isTransition){var f=P.T,v={};P.T=v;try{var _=i(u,l),O=P.S;O!==null&&O(v,_),Vh(e,t,_)}catch(M){Zc(e,t,M)}finally{P.T=f}}else try{f=i(u,l),Vh(e,t,f)}catch(M){Zc(e,t,M)}}function Vh(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){Fh(e,t,l)},function(l){return Zc(e,t,l)}):Fh(e,t,i)}function Fh(e,t,i){t.status="fulfilled",t.value=i,Yh(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,$h(e,i)))}function Zc(e,t,i){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=i,Yh(t),t=t.next;while(t!==l)}e.action=null}function Yh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Kh(e,t){return t}function Xh(e,t){if(Be){var i=Fe.formState;if(i!==null){e:{var l=Ae;if(Be){if(tt){t:{for(var u=tt,f=Rn;u.nodeType!==8;){if(!f){u=null;break t}if(u=wn(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){tt=wn(u.nextSibling),l=u.data==="F!";break e}}ti(l)}l=!1}l&&(t=i[0])}}return i=Gt(),i.memoizedState=i.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kh,lastRenderedState:t},i.queue=l,i=mm.bind(null,Ae,l),l.dispatch=i,l=Qc(!1),f=nu.bind(null,Ae,!1,l.queue),l=Gt(),u={state:t,dispatch:null,action:e,pending:null},l.queue=u,i=N0.bind(null,Ae,u,f,i),u.dispatch=i,l.memoizedState=e,[t,i,!1]}function Qh(e){var t=ut();return Zh(t,He,e)}function Zh(e,t,i){if(t=Kc(e,t,Kh)[0],e=Ol(Fn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=rr(t)}catch(v){throw v===er?xl:v}else l=t;t=ut();var u=t.queue,f=u.dispatch;return i!==t.memoizedState&&(Ae.flags|=2048,Xi(9,Nl(),R0.bind(null,u,i),null)),[l,f,e]}function R0(e,t){e.action=t}function Jh(e){var t=ut(),i=He;if(i!==null)return Zh(t,i,e);ut(),t=t.memoizedState,i=ut();var l=i.queue.dispatch;return i.memoizedState=e,[t,l,!1]}function Xi(e,t,i,l){return e={tag:e,create:i,deps:l,inst:t,next:null},t=Ae.updateQueue,t===null&&(t=Fc(),Ae.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,t.lastEffect=e),e}function Nl(){return{destroy:void 0,resource:void 0}}function Wh(){return ut().memoizedState}function Rl(e,t,i,l){var u=Gt();l=l===void 0?null:l,Ae.flags|=e,u.memoizedState=Xi(1|t,Nl(),i,l)}function lr(e,t,i,l){var u=ut();l=l===void 0?null:l;var f=u.memoizedState.inst;He!==null&&l!==null&&qc(l,He.memoizedState.deps)?u.memoizedState=Xi(t,f,i,l):(Ae.flags|=e,u.memoizedState=Xi(1|t,f,i,l))}function em(e,t){Rl(8390656,8,e,t)}function tm(e,t){lr(2048,8,e,t)}function nm(e,t){return lr(4,2,e,t)}function am(e,t){return lr(4,4,e,t)}function im(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sm(e,t,i){i=i!=null?i.concat([e]):null,lr(4,4,im.bind(null,t,e),i)}function Jc(){}function rm(e,t){var i=ut();t=t===void 0?null:t;var l=i.memoizedState;return t!==null&&qc(t,l[1])?l[0]:(i.memoizedState=[e,t],e)}function lm(e,t){var i=ut();t=t===void 0?null:t;var l=i.memoizedState;if(t!==null&&qc(t,l[1]))return l[0];if(l=e(),si){sn(!0);try{e()}finally{sn(!1)}}return i.memoizedState=[l,t],l}function Wc(e,t,i){return i===void 0||(ma&1073741824)!==0?e.memoizedState=t:(e.memoizedState=i,e=up(),Ae.lanes|=e,_a|=e,i)}function om(e,t,i,l){return Zt(i,t)?i:Fi.current!==null?(e=Wc(e,i,l),Zt(e,t)||(wt=!0),e):(ma&42)===0?(wt=!0,e.memoizedState=i):(e=up(),Ae.lanes|=e,_a|=e,t)}function cm(e,t,i,l,u){var f=Q.p;Q.p=f!==0&&8>f?f:8;var v=P.T,_={};P.T=_,nu(e,!1,t,i);try{var O=u(),M=P.S;if(M!==null&&M(_,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var H=C0(O,l);or(e,t,H,nn(e))}else or(e,t,l,nn(e))}catch(F){or(e,t,{then:function(){},status:"rejected",reason:F},nn())}finally{Q.p=f,P.T=v}}function k0(){}function eu(e,t,i,l){if(e.tag!==5)throw Error(s(476));var u=um(e).queue;cm(e,u,t,X,i===null?k0:function(){return dm(e),i(l)})}function um(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:X},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function dm(e){var t=um(e).next.queue;or(e,t,{},nn())}function tu(){return Mt(jr)}function fm(){return ut().memoizedState}function hm(){return ut().memoizedState}function D0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=nn();e=fa(i);var l=ha(t,e,i);l!==null&&(an(l,t,i),nr(l,t,i)),t={cache:Rc()},e.payload=t;return}t=t.return}}function M0(e,t,i){var l=nn();i={lane:l,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},kl(e)?pm(t,i):(i=_c(e,t,i,l),i!==null&&(an(i,e,l),gm(i,t,l)))}function mm(e,t,i){var l=nn();or(e,t,i,l)}function or(e,t,i,l){var u={lane:l,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(kl(e))pm(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,_=f(v,i);if(u.hasEagerState=!0,u.eagerState=_,Zt(_,v))return pl(e,t,u,0),Fe===null&&ml(),!1}catch{}finally{}if(i=_c(e,t,u,l),i!==null)return an(i,e,l),gm(i,t,l),!0}return!1}function nu(e,t,i,l){if(l={lane:2,revertLane:Mu(),action:l,hasEagerState:!1,eagerState:null,next:null},kl(e)){if(t)throw Error(s(479))}else t=_c(e,i,l,2),t!==null&&an(t,e,2)}function kl(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function pm(e,t){Yi=jl=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function gm(e,t,i){if((i&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,Us(e,i)}}var Dl={readContext:Mt,use:Al,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st,useHostTransitionStatus:st,useFormState:st,useActionState:st,useOptimistic:st,useMemoCache:st,useCacheRefresh:st},ym={readContext:Mt,use:Al,useCallback:function(e,t){return Gt().memoizedState=[e,t===void 0?null:t],e},useContext:Mt,useEffect:em,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Rl(4194308,4,im.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Rl(4194308,4,e,t)},useInsertionEffect:function(e,t){Rl(4,2,e,t)},useMemo:function(e,t){var i=Gt();t=t===void 0?null:t;var l=e();if(si){sn(!0);try{e()}finally{sn(!1)}}return i.memoizedState=[l,t],l},useReducer:function(e,t,i){var l=Gt();if(i!==void 0){var u=i(t);if(si){sn(!0);try{i(t)}finally{sn(!1)}}}else u=t;return l.memoizedState=l.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},l.queue=e,e=e.dispatch=M0.bind(null,Ae,e),[l.memoizedState,e]},useRef:function(e){var t=Gt();return e={current:e},t.memoizedState=e},useState:function(e){e=Qc(e);var t=e.queue,i=mm.bind(null,Ae,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Jc,useDeferredValue:function(e,t){var i=Gt();return Wc(i,e,t)},useTransition:function(){var e=Qc(!1);return e=cm.bind(null,Ae,e.queue,!0,!1),Gt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var l=Ae,u=Gt();if(Be){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),Fe===null)throw Error(s(349));(Ue&124)!==0||Bh(l,t,i)}u.memoizedState=i;var f={value:i,getSnapshot:t};return u.queue=f,em(Ih.bind(null,l,f,e),[e]),l.flags|=2048,Xi(9,Nl(),zh.bind(null,l,f,i,t),null),i},useId:function(){var e=Gt(),t=Fe.identifierPrefix;if(Be){var i=Gn,l=Hn;i=(l&~(1<<32-mt(l)-1)).toString(32)+i,t="«"+t+"R"+i,i=Cl++,0<i&&(t+="H"+i.toString(32)),t+="»"}else i=A0++,t="«"+t+"r"+i.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:tu,useFormState:Xh,useActionState:Xh,useOptimistic:function(e){var t=Gt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=nu.bind(null,Ae,!0,i),i.dispatch=t,[e,t]},useMemoCache:Yc,useCacheRefresh:function(){return Gt().memoizedState=D0.bind(null,Ae)}},vm={readContext:Mt,use:Al,useCallback:rm,useContext:Mt,useEffect:tm,useImperativeHandle:sm,useInsertionEffect:nm,useLayoutEffect:am,useMemo:lm,useReducer:Ol,useRef:Wh,useState:function(){return Ol(Fn)},useDebugValue:Jc,useDeferredValue:function(e,t){var i=ut();return om(i,He.memoizedState,e,t)},useTransition:function(){var e=Ol(Fn)[0],t=ut().memoizedState;return[typeof e=="boolean"?e:rr(e),t]},useSyncExternalStore:Ph,useId:fm,useHostTransitionStatus:tu,useFormState:Qh,useActionState:Qh,useOptimistic:function(e,t){var i=ut();return Gh(i,He,e,t)},useMemoCache:Yc,useCacheRefresh:hm},U0={readContext:Mt,use:Al,useCallback:rm,useContext:Mt,useEffect:tm,useImperativeHandle:sm,useInsertionEffect:nm,useLayoutEffect:am,useMemo:lm,useReducer:Xc,useRef:Wh,useState:function(){return Xc(Fn)},useDebugValue:Jc,useDeferredValue:function(e,t){var i=ut();return He===null?Wc(i,e,t):om(i,He.memoizedState,e,t)},useTransition:function(){var e=Xc(Fn)[0],t=ut().memoizedState;return[typeof e=="boolean"?e:rr(e),t]},useSyncExternalStore:Ph,useId:fm,useHostTransitionStatus:tu,useFormState:Jh,useActionState:Jh,useOptimistic:function(e,t){var i=ut();return He!==null?Gh(i,He,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Yc,useCacheRefresh:hm},Qi=null,cr=0;function Ml(e){var t=cr;return cr+=1,Qi===null&&(Qi=[]),Oh(Qi,e,t)}function ur(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ul(e,t){throw t.$$typeof===b?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function bm(e){var t=e._init;return t(e._payload)}function wm(e){function t(k,R){if(e){var D=k.deletions;D===null?(k.deletions=[R],k.flags|=16):D.push(R)}}function i(k,R){if(!e)return null;for(;R!==null;)t(k,R),R=R.sibling;return null}function l(k){for(var R=new Map;k!==null;)k.key!==null?R.set(k.key,k):R.set(k.index,k),k=k.sibling;return R}function u(k,R){return k=qn(k,R),k.index=0,k.sibling=null,k}function f(k,R,D){return k.index=D,e?(D=k.alternate,D!==null?(D=D.index,D<R?(k.flags|=67108866,R):D):(k.flags|=67108866,R)):(k.flags|=1048576,R)}function v(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function _(k,R,D,G){return R===null||R.tag!==6?(R=xc(D,k.mode,G),R.return=k,R):(R=u(R,D),R.return=k,R)}function O(k,R,D,G){var ue=D.type;return ue===T?H(k,R,D.props.children,G,D.key):R!==null&&(R.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===J&&bm(ue)===R.type)?(R=u(R,D.props),ur(R,D),R.return=k,R):(R=yl(D.type,D.key,D.props,null,k.mode,G),ur(R,D),R.return=k,R)}function M(k,R,D,G){return R===null||R.tag!==4||R.stateNode.containerInfo!==D.containerInfo||R.stateNode.implementation!==D.implementation?(R=Tc(D,k.mode,G),R.return=k,R):(R=u(R,D.children||[]),R.return=k,R)}function H(k,R,D,G,ue){return R===null||R.tag!==7?(R=Za(D,k.mode,G,ue),R.return=k,R):(R=u(R,D),R.return=k,R)}function F(k,R,D){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=xc(""+R,k.mode,D),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case w:return D=yl(R.type,R.key,R.props,null,k.mode,D),ur(D,R),D.return=k,D;case x:return R=Tc(R,k.mode,D),R.return=k,R;case J:var G=R._init;return R=G(R._payload),F(k,R,D)}if(Ee(R)||_e(R))return R=Za(R,k.mode,D,null),R.return=k,R;if(typeof R.then=="function")return F(k,Ml(R),D);if(R.$$typeof===E)return F(k,_l(k,R),D);Ul(k,R)}return null}function U(k,R,D,G){var ue=R!==null?R.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return ue!==null?null:_(k,R,""+D,G);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case w:return D.key===ue?O(k,R,D,G):null;case x:return D.key===ue?M(k,R,D,G):null;case J:return ue=D._init,D=ue(D._payload),U(k,R,D,G)}if(Ee(D)||_e(D))return ue!==null?null:H(k,R,D,G,null);if(typeof D.then=="function")return U(k,R,Ml(D),G);if(D.$$typeof===E)return U(k,R,_l(k,D),G);Ul(k,D)}return null}function L(k,R,D,G,ue){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return k=k.get(D)||null,_(R,k,""+G,ue);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return k=k.get(G.key===null?D:G.key)||null,O(R,k,G,ue);case x:return k=k.get(G.key===null?D:G.key)||null,M(R,k,G,ue);case J:var Oe=G._init;return G=Oe(G._payload),L(k,R,D,G,ue)}if(Ee(G)||_e(G))return k=k.get(D)||null,H(R,k,G,ue,null);if(typeof G.then=="function")return L(k,R,D,Ml(G),ue);if(G.$$typeof===E)return L(k,R,D,_l(R,G),ue);Ul(R,G)}return null}function be(k,R,D,G){for(var ue=null,Oe=null,me=R,ye=R=0,St=null;me!==null&&ye<D.length;ye++){me.index>ye?(St=me,me=null):St=me.sibling;var Pe=U(k,me,D[ye],G);if(Pe===null){me===null&&(me=St);break}e&&me&&Pe.alternate===null&&t(k,me),R=f(Pe,R,ye),Oe===null?ue=Pe:Oe.sibling=Pe,Oe=Pe,me=St}if(ye===D.length)return i(k,me),Be&&Wa(k,ye),ue;if(me===null){for(;ye<D.length;ye++)me=F(k,D[ye],G),me!==null&&(R=f(me,R,ye),Oe===null?ue=me:Oe.sibling=me,Oe=me);return Be&&Wa(k,ye),ue}for(me=l(me);ye<D.length;ye++)St=L(me,k,ye,D[ye],G),St!==null&&(e&&St.alternate!==null&&me.delete(St.key===null?ye:St.key),R=f(St,R,ye),Oe===null?ue=St:Oe.sibling=St,Oe=St);return e&&me.forEach(function(Na){return t(k,Na)}),Be&&Wa(k,ye),ue}function ge(k,R,D,G){if(D==null)throw Error(s(151));for(var ue=null,Oe=null,me=R,ye=R=0,St=null,Pe=D.next();me!==null&&!Pe.done;ye++,Pe=D.next()){me.index>ye?(St=me,me=null):St=me.sibling;var Na=U(k,me,Pe.value,G);if(Na===null){me===null&&(me=St);break}e&&me&&Na.alternate===null&&t(k,me),R=f(Na,R,ye),Oe===null?ue=Na:Oe.sibling=Na,Oe=Na,me=St}if(Pe.done)return i(k,me),Be&&Wa(k,ye),ue;if(me===null){for(;!Pe.done;ye++,Pe=D.next())Pe=F(k,Pe.value,G),Pe!==null&&(R=f(Pe,R,ye),Oe===null?ue=Pe:Oe.sibling=Pe,Oe=Pe);return Be&&Wa(k,ye),ue}for(me=l(me);!Pe.done;ye++,Pe=D.next())Pe=L(me,k,ye,Pe.value,G),Pe!==null&&(e&&Pe.alternate!==null&&me.delete(Pe.key===null?ye:Pe.key),R=f(Pe,R,ye),Oe===null?ue=Pe:Oe.sibling=Pe,Oe=Pe);return e&&me.forEach(function(Lb){return t(k,Lb)}),Be&&Wa(k,ye),ue}function $e(k,R,D,G){if(typeof D=="object"&&D!==null&&D.type===T&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case w:e:{for(var ue=D.key;R!==null;){if(R.key===ue){if(ue=D.type,ue===T){if(R.tag===7){i(k,R.sibling),G=u(R,D.props.children),G.return=k,k=G;break e}}else if(R.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===J&&bm(ue)===R.type){i(k,R.sibling),G=u(R,D.props),ur(G,D),G.return=k,k=G;break e}i(k,R);break}else t(k,R);R=R.sibling}D.type===T?(G=Za(D.props.children,k.mode,G,D.key),G.return=k,k=G):(G=yl(D.type,D.key,D.props,null,k.mode,G),ur(G,D),G.return=k,k=G)}return v(k);case x:e:{for(ue=D.key;R!==null;){if(R.key===ue)if(R.tag===4&&R.stateNode.containerInfo===D.containerInfo&&R.stateNode.implementation===D.implementation){i(k,R.sibling),G=u(R,D.children||[]),G.return=k,k=G;break e}else{i(k,R);break}else t(k,R);R=R.sibling}G=Tc(D,k.mode,G),G.return=k,k=G}return v(k);case J:return ue=D._init,D=ue(D._payload),$e(k,R,D,G)}if(Ee(D))return be(k,R,D,G);if(_e(D)){if(ue=_e(D),typeof ue!="function")throw Error(s(150));return D=ue.call(D),ge(k,R,D,G)}if(typeof D.then=="function")return $e(k,R,Ml(D),G);if(D.$$typeof===E)return $e(k,R,_l(k,D),G);Ul(k,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,R!==null&&R.tag===6?(i(k,R.sibling),G=u(R,D),G.return=k,k=G):(i(k,R),G=xc(D,k.mode,G),G.return=k,k=G),v(k)):i(k,R)}return function(k,R,D,G){try{cr=0;var ue=$e(k,R,D,G);return Qi=null,ue}catch(me){if(me===er||me===xl)throw me;var Oe=Jt(29,me,null,k.mode);return Oe.lanes=G,Oe.return=k,Oe}finally{}}}var Zi=wm(!0),_m=wm(!1),fn=q(null),kn=null;function pa(e){var t=e.alternate;ee(gt,gt.current&1),ee(fn,e),kn===null&&(t===null||Fi.current!==null||t.memoizedState!==null)&&(kn=e)}function Sm(e){if(e.tag===22){if(ee(gt,gt.current),ee(fn,e),kn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(kn=e)}}else ga()}function ga(){ee(gt,gt.current),ee(fn,fn.current)}function Yn(e){ae(fn),kn===e&&(kn=null),ae(gt)}var gt=q(0);function Ll(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||Fu(i)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function au(e,t,i,l){t=e.memoizedState,i=i(l,t),i=i==null?t:y({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var iu={enqueueSetState:function(e,t,i){e=e._reactInternals;var l=nn(),u=fa(l);u.payload=t,i!=null&&(u.callback=i),t=ha(e,u,l),t!==null&&(an(t,e,l),nr(t,e,l))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var l=nn(),u=fa(l);u.tag=1,u.payload=t,i!=null&&(u.callback=i),t=ha(e,u,l),t!==null&&(an(t,e,l),nr(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=nn(),l=fa(i);l.tag=2,t!=null&&(l.callback=t),t=ha(e,l,i),t!==null&&(an(t,e,i),nr(t,e,i))}};function xm(e,t,i,l,u,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,v):t.prototype&&t.prototype.isPureReactComponent?!Fs(i,l)||!Fs(u,f):!0}function Tm(e,t,i,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,l),t.state!==e&&iu.enqueueReplaceState(t,t.state,null)}function ri(e,t){var i=t;if("ref"in t){i={};for(var l in t)l!=="ref"&&(i[l]=t[l])}if(e=e.defaultProps){i===t&&(i=y({},i));for(var u in e)i[u]===void 0&&(i[u]=e[u])}return i}var Pl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Em(e){Pl(e)}function jm(e){console.error(e)}function Cm(e){Pl(e)}function Bl(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Am(e,t,i){try{var l=e.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function su(e,t,i){return i=fa(i),i.tag=3,i.payload={element:null},i.callback=function(){Bl(e,t)},i}function Om(e){return e=fa(e),e.tag=3,e}function Nm(e,t,i,l){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=l.value;e.payload=function(){return u(f)},e.callback=function(){Am(t,i,l)}}var v=i.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Am(t,i,l),typeof u!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function L0(e,t,i,l,u){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=i.alternate,t!==null&&Zs(t,i,u,!0),i=fn.current,i!==null){switch(i.tag){case 13:return kn===null?Ou():i.alternate===null&&nt===0&&(nt=3),i.flags&=-257,i.flags|=65536,i.lanes=u,l===Mc?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([l]):t.add(l),Ru(e,l,u)),!1;case 22:return i.flags|=65536,l===Mc?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([l]):i.add(l)),Ru(e,l,u)),!1}throw Error(s(435,i.tag))}return Ru(e,l,u),Ou(),!1}if(Be)return t=fn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,l!==Cc&&(e=Error(s(422),{cause:l}),Qs(on(e,i)))):(l!==Cc&&(t=Error(s(423),{cause:l}),Qs(on(t,i))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,l=on(l,i),u=su(e.stateNode,l,u),Pc(e,u),nt!==4&&(nt=2)),!1;var f=Error(s(520),{cause:l});if(f=on(f,i),yr===null?yr=[f]:yr.push(f),nt!==4&&(nt=2),t===null)return!0;l=on(l,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=u&-u,i.lanes|=e,e=su(i.stateNode,l,e),Pc(i,e),!1;case 1:if(t=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Sa===null||!Sa.has(f))))return i.flags|=65536,u&=-u,i.lanes|=u,u=Om(u),Nm(u,e,i,l),Pc(i,u),!1}i=i.return}while(i!==null);return!1}var Rm=Error(s(461)),wt=!1;function Ct(e,t,i,l){t.child=e===null?_m(t,null,i,l):Zi(t,e.child,i,l)}function km(e,t,i,l,u){i=i.render;var f=t.ref;if("ref"in l){var v={};for(var _ in l)_!=="ref"&&(v[_]=l[_])}else v=l;return ai(t),l=Hc(e,t,i,v,f,u),_=Gc(),e!==null&&!wt?($c(e,t,u),Kn(e,t,u)):(Be&&_&&Ec(t),t.flags|=1,Ct(e,t,l,u),t.child)}function Dm(e,t,i,l,u){if(e===null){var f=i.type;return typeof f=="function"&&!Sc(f)&&f.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=f,Mm(e,t,f,l,u)):(e=yl(i.type,null,l,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!hu(e,u)){var v=f.memoizedProps;if(i=i.compare,i=i!==null?i:Fs,i(v,l)&&e.ref===t.ref)return Kn(e,t,u)}return t.flags|=1,e=qn(f,l),e.ref=t.ref,e.return=t,t.child=e}function Mm(e,t,i,l,u){if(e!==null){var f=e.memoizedProps;if(Fs(f,l)&&e.ref===t.ref)if(wt=!1,t.pendingProps=l=f,hu(e,u))(e.flags&131072)!==0&&(wt=!0);else return t.lanes=e.lanes,Kn(e,t,u)}return ru(e,t,i,l,u)}function Um(e,t,i){var l=t.pendingProps,u=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((t.flags&128)!==0){if(l=f!==null?f.baseLanes|i:i,e!==null){for(u=t.child=e.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;t.childLanes=f&~l}else t.childLanes=0,t.child=null;return Lm(e,t,l,i)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Sl(t,f!==null?f.cachePool:null),f!==null?Mh(t,f):zc(),Sm(t);else return t.lanes=t.childLanes=536870912,Lm(e,t,f!==null?f.baseLanes|i:i,i)}else f!==null?(Sl(t,f.cachePool),Mh(t,f),ga(),t.memoizedState=null):(e!==null&&Sl(t,null),zc(),ga());return Ct(e,t,u,i),t.child}function Lm(e,t,i,l){var u=Dc();return u=u===null?null:{parent:pt._currentValue,pool:u},t.memoizedState={baseLanes:i,cachePool:u},e!==null&&Sl(t,null),zc(),Sm(t),e!==null&&Zs(e,t,l,!0),null}function zl(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function ru(e,t,i,l,u){return ai(t),i=Hc(e,t,i,l,void 0,u),l=Gc(),e!==null&&!wt?($c(e,t,u),Kn(e,t,u)):(Be&&l&&Ec(t),t.flags|=1,Ct(e,t,i,u),t.child)}function Pm(e,t,i,l,u,f){return ai(t),t.updateQueue=null,i=Lh(t,l,i,u),Uh(e),l=Gc(),e!==null&&!wt?($c(e,t,f),Kn(e,t,f)):(Be&&l&&Ec(t),t.flags|=1,Ct(e,t,i,f),t.child)}function Bm(e,t,i,l,u){if(ai(t),t.stateNode===null){var f=qi,v=i.contextType;typeof v=="object"&&v!==null&&(f=Mt(v)),f=new i(l,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=iu,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=l,f.state=t.memoizedState,f.refs={},Uc(t),v=i.contextType,f.context=typeof v=="object"&&v!==null?Mt(v):qi,f.state=t.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(au(t,i,v,l),f.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&iu.enqueueReplaceState(f,f.state,null),ir(t,l,f,u),ar(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){f=t.stateNode;var _=t.memoizedProps,O=ri(i,_);f.props=O;var M=f.context,H=i.contextType;v=qi,typeof H=="object"&&H!==null&&(v=Mt(H));var F=i.getDerivedStateFromProps;H=typeof F=="function"||typeof f.getSnapshotBeforeUpdate=="function",_=t.pendingProps!==_,H||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_||M!==v)&&Tm(t,f,l,v),da=!1;var U=t.memoizedState;f.state=U,ir(t,l,f,u),ar(),M=t.memoizedState,_||U!==M||da?(typeof F=="function"&&(au(t,i,F,l),M=t.memoizedState),(O=da||xm(t,i,O,l,U,M,v))?(H||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=M),f.props=l,f.state=M,f.context=v,l=O):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{f=t.stateNode,Lc(e,t),v=t.memoizedProps,H=ri(i,v),f.props=H,F=t.pendingProps,U=f.context,M=i.contextType,O=qi,typeof M=="object"&&M!==null&&(O=Mt(M)),_=i.getDerivedStateFromProps,(M=typeof _=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==F||U!==O)&&Tm(t,f,l,O),da=!1,U=t.memoizedState,f.state=U,ir(t,l,f,u),ar();var L=t.memoizedState;v!==F||U!==L||da||e!==null&&e.dependencies!==null&&wl(e.dependencies)?(typeof _=="function"&&(au(t,i,_,l),L=t.memoizedState),(H=da||xm(t,i,H,l,U,L,O)||e!==null&&e.dependencies!==null&&wl(e.dependencies))?(M||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,L,O),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,L,O)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=L),f.props=l,f.state=L,f.context=O,l=H):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),l=!1)}return f=l,zl(e,t),l=(t.flags&128)!==0,f||l?(f=t.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&l?(t.child=Zi(t,e.child,null,u),t.child=Zi(t,null,i,u)):Ct(e,t,i,u),t.memoizedState=f.state,e=t.child):e=Kn(e,t,u),e}function zm(e,t,i,l){return Xs(),t.flags|=256,Ct(e,t,i,l),t.child}var lu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ou(e){return{baseLanes:e,cachePool:jh()}}function cu(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=hn),e}function Im(e,t,i){var l=t.pendingProps,u=!1,f=(t.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(gt.current&2)!==0),v&&(u=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(Be){if(u?pa(t):ga(),Be){var _=tt,O;if(O=_){e:{for(O=_,_=Rn;O.nodeType!==8;){if(!_){_=null;break e}if(O=wn(O.nextSibling),O===null){_=null;break e}}_=O}_!==null?(t.memoizedState={dehydrated:_,treeContext:Ja!==null?{id:Hn,overflow:Gn}:null,retryLane:536870912,hydrationErrors:null},O=Jt(18,null,null,0),O.stateNode=_,O.return=t,t.child=O,Bt=t,tt=null,O=!0):O=!1}O||ti(t)}if(_=t.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return Fu(_)?t.lanes=32:t.lanes=536870912,null;Yn(t)}return _=l.children,l=l.fallback,u?(ga(),u=t.mode,_=Il({mode:"hidden",children:_},u),l=Za(l,u,i,null),_.return=t,l.return=t,_.sibling=l,t.child=_,u=t.child,u.memoizedState=ou(i),u.childLanes=cu(e,v,i),t.memoizedState=lu,l):(pa(t),uu(t,_))}if(O=e.memoizedState,O!==null&&(_=O.dehydrated,_!==null)){if(f)t.flags&256?(pa(t),t.flags&=-257,t=du(e,t,i)):t.memoizedState!==null?(ga(),t.child=e.child,t.flags|=128,t=null):(ga(),u=l.fallback,_=t.mode,l=Il({mode:"visible",children:l.children},_),u=Za(u,_,i,null),u.flags|=2,l.return=t,u.return=t,l.sibling=u,t.child=l,Zi(t,e.child,null,i),l=t.child,l.memoizedState=ou(i),l.childLanes=cu(e,v,i),t.memoizedState=lu,t=u);else if(pa(t),Fu(_)){if(v=_.nextSibling&&_.nextSibling.dataset,v)var M=v.dgst;v=M,l=Error(s(419)),l.stack="",l.digest=v,Qs({value:l,source:null,stack:null}),t=du(e,t,i)}else if(wt||Zs(e,t,i,!1),v=(i&e.childLanes)!==0,wt||v){if(v=Fe,v!==null&&(l=i&-i,l=(l&42)!==0?1:Ei(l),l=(l&(v.suspendedLanes|i))!==0?0:l,l!==0&&l!==O.retryLane))throw O.retryLane=l,Ii(e,l),an(v,e,l),Rm;_.data==="$?"||Ou(),t=du(e,t,i)}else _.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=O.treeContext,tt=wn(_.nextSibling),Bt=t,Be=!0,ei=null,Rn=!1,e!==null&&(un[dn++]=Hn,un[dn++]=Gn,un[dn++]=Ja,Hn=e.id,Gn=e.overflow,Ja=t),t=uu(t,l.children),t.flags|=4096);return t}return u?(ga(),u=l.fallback,_=t.mode,O=e.child,M=O.sibling,l=qn(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,M!==null?u=qn(M,u):(u=Za(u,_,i,null),u.flags|=2),u.return=t,l.return=t,l.sibling=u,t.child=l,l=u,u=t.child,_=e.child.memoizedState,_===null?_=ou(i):(O=_.cachePool,O!==null?(M=pt._currentValue,O=O.parent!==M?{parent:M,pool:M}:O):O=jh(),_={baseLanes:_.baseLanes|i,cachePool:O}),u.memoizedState=_,u.childLanes=cu(e,v,i),t.memoizedState=lu,l):(pa(t),i=e.child,e=i.sibling,i=qn(i,{mode:"visible",children:l.children}),i.return=t,i.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=i,t.memoizedState=null,i)}function uu(e,t){return t=Il({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Il(e,t){return e=Jt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function du(e,t,i){return Zi(t,e.child,null,i),e=uu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qm(e,t,i){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Oc(e.return,t,i)}function fu(e,t,i,l,u){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:u}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=i,f.tailMode=u)}function Hm(e,t,i){var l=t.pendingProps,u=l.revealOrder,f=l.tail;if(Ct(e,t,l.children,i),l=gt.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qm(e,i,t);else if(e.tag===19)qm(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(ee(gt,l),u){case"forwards":for(i=t.child,u=null;i!==null;)e=i.alternate,e!==null&&Ll(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=t.child,t.child=null):(u=i.sibling,i.sibling=null),fu(t,!1,u,i,f);break;case"backwards":for(i=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Ll(e)===null){t.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}fu(t,!0,i,null,f);break;case"together":fu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Kn(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),_a|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Zs(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=qn(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=qn(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function hu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&wl(e)))}function P0(e,t,i){switch(t.tag){case 3:xe(t,t.stateNode.containerInfo),ua(t,pt,e.memoizedState.cache),Xs();break;case 27:case 5:te(t);break;case 4:xe(t,t.stateNode.containerInfo);break;case 10:ua(t,t.type,t.memoizedProps.value);break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(pa(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Im(e,t,i):(pa(t),e=Kn(e,t,i),e!==null?e.sibling:null);pa(t);break;case 19:var u=(e.flags&128)!==0;if(l=(i&t.childLanes)!==0,l||(Zs(e,t,i,!1),l=(i&t.childLanes)!==0),u){if(l)return Hm(e,t,i);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),ee(gt,gt.current),l)break;return null;case 22:case 23:return t.lanes=0,Um(e,t,i);case 24:ua(t,pt,e.memoizedState.cache)}return Kn(e,t,i)}function Gm(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)wt=!0;else{if(!hu(e,i)&&(t.flags&128)===0)return wt=!1,P0(e,t,i);wt=(e.flags&131072)!==0}else wt=!1,Be&&(t.flags&1048576)!==0&&bh(t,bl,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var l=t.elementType,u=l._init;if(l=u(l._payload),t.type=l,typeof l=="function")Sc(l)?(e=ri(l,e),t.tag=1,t=Bm(null,t,l,e,i)):(t.tag=0,t=ru(null,t,l,e,i));else{if(l!=null){if(u=l.$$typeof,u===I){t.tag=11,t=km(null,t,l,e,i);break e}else if(u===B){t.tag=14,t=Dm(null,t,l,e,i);break e}}throw t=Me(l)||l,Error(s(306,t,""))}}return t;case 0:return ru(e,t,t.type,t.pendingProps,i);case 1:return l=t.type,u=ri(l,t.pendingProps),Bm(e,t,l,u,i);case 3:e:{if(xe(t,t.stateNode.containerInfo),e===null)throw Error(s(387));l=t.pendingProps;var f=t.memoizedState;u=f.element,Lc(e,t),ir(t,l,null,i);var v=t.memoizedState;if(l=v.cache,ua(t,pt,l),l!==f.cache&&Nc(t,[pt],i,!0),ar(),l=v.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=zm(e,t,l,i);break e}else if(l!==u){u=on(Error(s(424)),t),Qs(u),t=zm(e,t,l,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(tt=wn(e.firstChild),Bt=t,Be=!0,ei=null,Rn=!0,i=_m(t,null,l,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Xs(),l===u){t=Kn(e,t,i);break e}Ct(e,t,l,i)}t=t.child}return t;case 26:return zl(e,t),e===null?(i=Yp(t.type,null,t.pendingProps,null))?t.memoizedState=i:Be||(i=t.type,e=t.pendingProps,l=eo(he.current).createElement(i),l[Dt]=t,l[qt]=e,Ot(l,i,e),bt(l),t.stateNode=l):t.memoizedState=Yp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),e===null&&Be&&(l=t.stateNode=$p(t.type,t.pendingProps,he.current),Bt=t,Rn=!0,u=tt,Ea(t.type)?(Yu=u,tt=wn(l.firstChild)):tt=u),Ct(e,t,t.pendingProps.children,i),zl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Be&&((u=l=tt)&&(l=db(l,t.type,t.pendingProps,Rn),l!==null?(t.stateNode=l,Bt=t,tt=wn(l.firstChild),Rn=!1,u=!0):u=!1),u||ti(t)),te(t),u=t.type,f=t.pendingProps,v=e!==null?e.memoizedProps:null,l=f.children,Gu(u,f)?l=null:v!==null&&Gu(u,v)&&(t.flags|=32),t.memoizedState!==null&&(u=Hc(e,t,O0,null,null,i),jr._currentValue=u),zl(e,t),Ct(e,t,l,i),t.child;case 6:return e===null&&Be&&((e=i=tt)&&(i=fb(i,t.pendingProps,Rn),i!==null?(t.stateNode=i,Bt=t,tt=null,e=!0):e=!1),e||ti(t)),null;case 13:return Im(e,t,i);case 4:return xe(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Zi(t,null,l,i):Ct(e,t,l,i),t.child;case 11:return km(e,t,t.type,t.pendingProps,i);case 7:return Ct(e,t,t.pendingProps,i),t.child;case 8:return Ct(e,t,t.pendingProps.children,i),t.child;case 12:return Ct(e,t,t.pendingProps.children,i),t.child;case 10:return l=t.pendingProps,ua(t,t.type,l.value),Ct(e,t,l.children,i),t.child;case 9:return u=t.type._context,l=t.pendingProps.children,ai(t),u=Mt(u),l=l(u),t.flags|=1,Ct(e,t,l,i),t.child;case 14:return Dm(e,t,t.type,t.pendingProps,i);case 15:return Mm(e,t,t.type,t.pendingProps,i);case 19:return Hm(e,t,i);case 31:return l=t.pendingProps,i=t.mode,l={mode:l.mode,children:l.children},e===null?(i=Il(l,i),i.ref=t.ref,t.child=i,i.return=t,t=i):(i=qn(e.child,l),i.ref=t.ref,t.child=i,i.return=t,t=i),t;case 22:return Um(e,t,i);case 24:return ai(t),l=Mt(pt),e===null?(u=Dc(),u===null&&(u=Fe,f=Rc(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=i),u=f),t.memoizedState={parent:l,cache:u},Uc(t),ua(t,pt,u)):((e.lanes&i)!==0&&(Lc(e,t),ir(t,null,null,i),ar()),u=e.memoizedState,f=t.memoizedState,u.parent!==l?(u={parent:l,cache:l},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),ua(t,pt,l)):(l=f.cache,ua(t,pt,l),l!==u.cache&&Nc(t,[pt],i,!0))),Ct(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Xn(e){e.flags|=4}function $m(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Jp(t)){if(t=fn.current,t!==null&&((Ue&4194048)===Ue?kn!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||t!==kn))throw tr=Mc,Ch;e.flags|=8192}}function ql(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?yn():536870912,e.lanes|=t,ts|=t)}function dr(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(t)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags&65011712,l|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=i,t}function B0(e,t,i){var l=t.pendingProps;switch(jc(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return Ze(t),null;case 3:return i=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Vn(pt),et(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Ks(t)?Xn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Sh())),Ze(t),null;case 26:return i=t.memoizedState,e===null?(Xn(t),i!==null?(Ze(t),$m(t,i)):(Ze(t),t.flags&=-16777217)):i?i!==e.memoizedState?(Xn(t),Ze(t),$m(t,i)):(Ze(t),t.flags&=-16777217):(e.memoizedProps!==l&&Xn(t),Ze(t),t.flags&=-16777217),null;case 27:se(t),i=he.current;var u=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Xn(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return Ze(t),null}e=ce.current,Ks(t)?wh(t):(e=$p(u,l,i),t.stateNode=e,Xn(t))}return Ze(t),null;case 5:if(se(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Xn(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return Ze(t),null}if(e=ce.current,Ks(t))wh(t);else{switch(u=eo(he.current),e){case 1:e=u.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=u.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=u.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=u.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?u.createElement("select",{is:l.is}):u.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?u.createElement(i,{is:l.is}):u.createElement(i)}}e[Dt]=t,e[qt]=l;e:for(u=t.child;u!==null;){if(u.tag===5||u.tag===6)e.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}t.stateNode=e;e:switch(Ot(e,i,l),i){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Xn(t)}}return Ze(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Xn(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(s(166));if(e=he.current,Ks(t)){if(e=t.stateNode,i=t.memoizedProps,l=null,u=Bt,u!==null)switch(u.tag){case 27:case 5:l=u.memoizedProps}e[Dt]=t,e=!!(e.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||Pp(e.nodeValue,i)),e||ti(t)}else e=eo(e).createTextNode(l),e[Dt]=t,t.stateNode=e}return Ze(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Ks(t),l!==null&&l.dehydrated!==null){if(e===null){if(!u)throw Error(s(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[Dt]=t}else Xs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ze(t),u=!1}else u=Sh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(Yn(t),t):(Yn(t),null)}if(Yn(t),(t.flags&128)!==0)return t.lanes=i,t;if(i=l!==null,e=e!==null&&e.memoizedState!==null,i){l=t.child,u=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(u=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==u&&(l.flags|=2048)}return i!==e&&i&&(t.child.flags|=8192),ql(t,t.updateQueue),Ze(t),null;case 4:return et(),e===null&&Bu(t.stateNode.containerInfo),Ze(t),null;case 10:return Vn(t.type),Ze(t),null;case 19:if(ae(gt),u=t.memoizedState,u===null)return Ze(t),null;if(l=(t.flags&128)!==0,f=u.rendering,f===null)if(l)dr(u,!1);else{if(nt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=Ll(e),f!==null){for(t.flags|=128,dr(u,!1),e=f.updateQueue,t.updateQueue=e,ql(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)vh(i,e),i=i.sibling;return ee(gt,gt.current&1|2),t.child}e=e.sibling}u.tail!==null&&ze()>$l&&(t.flags|=128,l=!0,dr(u,!1),t.lanes=4194304)}else{if(!l)if(e=Ll(f),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,ql(t,e),dr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!Be)return Ze(t),null}else 2*ze()-u.renderingStartTime>$l&&i!==536870912&&(t.flags|=128,l=!0,dr(u,!1),t.lanes=4194304);u.isBackwards?(f.sibling=t.child,t.child=f):(e=u.last,e!==null?e.sibling=f:t.child=f,u.last=f)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=ze(),t.sibling=null,e=gt.current,ee(gt,l?e&1|2:e&1),t):(Ze(t),null);case 22:case 23:return Yn(t),Ic(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(i&536870912)!==0&&(t.flags&128)===0&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),i=t.updateQueue,i!==null&&ql(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==i&&(t.flags|=2048),e!==null&&ae(ii),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Vn(pt),Ze(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function z0(e,t){switch(jc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Vn(pt),et(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return se(t),null;case 13:if(Yn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Xs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ae(gt),null;case 4:return et(),null;case 10:return Vn(t.type),null;case 22:case 23:return Yn(t),Ic(),e!==null&&ae(ii),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Vn(pt),null;case 25:return null;default:return null}}function Vm(e,t){switch(jc(t),t.tag){case 3:Vn(pt),et();break;case 26:case 27:case 5:se(t);break;case 4:et();break;case 13:Yn(t);break;case 19:ae(gt);break;case 10:Vn(t.type);break;case 22:case 23:Yn(t),Ic(),e!==null&&ae(ii);break;case 24:Vn(pt)}}function fr(e,t){try{var i=t.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var u=l.next;i=u;do{if((i.tag&e)===e){l=void 0;var f=i.create,v=i.inst;l=f(),v.destroy=l}i=i.next}while(i!==u)}}catch(_){Ve(t,t.return,_)}}function ya(e,t,i){try{var l=t.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var f=u.next;l=f;do{if((l.tag&e)===e){var v=l.inst,_=v.destroy;if(_!==void 0){v.destroy=void 0,u=t;var O=i,M=_;try{M()}catch(H){Ve(u,O,H)}}}l=l.next}while(l!==f)}}catch(H){Ve(t,t.return,H)}}function Fm(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{Dh(t,i)}catch(l){Ve(e,e.return,l)}}}function Ym(e,t,i){i.props=ri(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(l){Ve(e,t,l)}}function hr(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof i=="function"?e.refCleanup=i(l):i.current=l}}catch(u){Ve(e,t,u)}}function Dn(e,t){var i=e.ref,l=e.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(u){Ve(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){Ve(e,t,u)}else i.current=null}function Km(e){var t=e.type,i=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(u){Ve(e,e.return,u)}}function mu(e,t,i){try{var l=e.stateNode;rb(l,e.type,i,t),l[qt]=t}catch(u){Ve(e,e.return,u)}}function Xm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ea(e.type)||e.tag===4}function pu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ea(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gu(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Wl));else if(l!==4&&(l===27&&Ea(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(gu(e,t,i),e=e.sibling;e!==null;)gu(e,t,i),e=e.sibling}function Hl(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(l!==4&&(l===27&&Ea(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Hl(e,t,i),e=e.sibling;e!==null;)Hl(e,t,i),e=e.sibling}function Qm(e){var t=e.stateNode,i=e.memoizedProps;try{for(var l=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);Ot(t,l,i),t[Dt]=e,t[qt]=i}catch(f){Ve(e,e.return,f)}}var Qn=!1,rt=!1,yu=!1,Zm=typeof WeakSet=="function"?WeakSet:Set,_t=null;function I0(e,t){if(e=e.containerInfo,qu=ro,e=oh(e),pc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var u=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var v=0,_=-1,O=-1,M=0,H=0,F=e,U=null;t:for(;;){for(var L;F!==i||u!==0&&F.nodeType!==3||(_=v+u),F!==f||l!==0&&F.nodeType!==3||(O=v+l),F.nodeType===3&&(v+=F.nodeValue.length),(L=F.firstChild)!==null;)U=F,F=L;for(;;){if(F===e)break t;if(U===i&&++M===u&&(_=v),U===f&&++H===l&&(O=v),(L=F.nextSibling)!==null)break;F=U,U=F.parentNode}F=L}i=_===-1||O===-1?null:{start:_,end:O}}else i=null}i=i||{start:0,end:0}}else i=null;for(Hu={focusedElem:e,selectionRange:i},ro=!1,_t=t;_t!==null;)if(t=_t,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,_t=e;else for(;_t!==null;){switch(t=_t,f=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=t,u=f.memoizedProps,f=f.memoizedState,l=i.stateNode;try{var be=ri(i.type,u,i.elementType===i.type);e=l.getSnapshotBeforeUpdate(be,f),l.__reactInternalSnapshotBeforeUpdate=e}catch(ge){Ve(i,i.return,ge)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Vu(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Vu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,_t=e;break}_t=t.return}}function Jm(e,t,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:va(e,i),l&4&&fr(5,i);break;case 1:if(va(e,i),l&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(v){Ve(i,i.return,v)}else{var u=ri(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Ve(i,i.return,v)}}l&64&&Fm(i),l&512&&hr(i,i.return);break;case 3:if(va(e,i),l&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Dh(e,t)}catch(v){Ve(i,i.return,v)}}break;case 27:t===null&&l&4&&Qm(i);case 26:case 5:va(e,i),t===null&&l&4&&Km(i),l&512&&hr(i,i.return);break;case 12:va(e,i);break;case 13:va(e,i),l&4&&tp(e,i),l&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=X0.bind(null,i),hb(e,i))));break;case 22:if(l=i.memoizedState!==null||Qn,!l){t=t!==null&&t.memoizedState!==null||rt,u=Qn;var f=rt;Qn=l,(rt=t)&&!f?ba(e,i,(i.subtreeFlags&8772)!==0):va(e,i),Qn=u,rt=f}break;case 30:break;default:va(e,i)}}function Wm(e){var t=e.alternate;t!==null&&(e.alternate=null,Wm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Qo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Xe=null,$t=!1;function Zn(e,t,i){for(i=i.child;i!==null;)ep(e,t,i),i=i.sibling}function ep(e,t,i){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(Bn,i)}catch{}switch(i.tag){case 26:rt||Dn(i,t),Zn(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:rt||Dn(i,t);var l=Xe,u=$t;Ea(i.type)&&(Xe=i.stateNode,$t=!1),Zn(e,t,i),Sr(i.stateNode),Xe=l,$t=u;break;case 5:rt||Dn(i,t);case 6:if(l=Xe,u=$t,Xe=null,Zn(e,t,i),Xe=l,$t=u,Xe!==null)if($t)try{(Xe.nodeType===9?Xe.body:Xe.nodeName==="HTML"?Xe.ownerDocument.body:Xe).removeChild(i.stateNode)}catch(f){Ve(i,t,f)}else try{Xe.removeChild(i.stateNode)}catch(f){Ve(i,t,f)}break;case 18:Xe!==null&&($t?(e=Xe,Hp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Nr(e)):Hp(Xe,i.stateNode));break;case 4:l=Xe,u=$t,Xe=i.stateNode.containerInfo,$t=!0,Zn(e,t,i),Xe=l,$t=u;break;case 0:case 11:case 14:case 15:rt||ya(2,i,t),rt||ya(4,i,t),Zn(e,t,i);break;case 1:rt||(Dn(i,t),l=i.stateNode,typeof l.componentWillUnmount=="function"&&Ym(i,t,l)),Zn(e,t,i);break;case 21:Zn(e,t,i);break;case 22:rt=(l=rt)||i.memoizedState!==null,Zn(e,t,i),rt=l;break;default:Zn(e,t,i)}}function tp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Nr(e)}catch(i){Ve(t,t.return,i)}}function q0(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Zm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Zm),t;default:throw Error(s(435,e.tag))}}function vu(e,t){var i=q0(e);t.forEach(function(l){var u=Q0.bind(null,e,l);i.has(l)||(i.add(l),l.then(u,u))})}function Wt(e,t){var i=t.deletions;if(i!==null)for(var l=0;l<i.length;l++){var u=i[l],f=e,v=t,_=v;e:for(;_!==null;){switch(_.tag){case 27:if(Ea(_.type)){Xe=_.stateNode,$t=!1;break e}break;case 5:Xe=_.stateNode,$t=!1;break e;case 3:case 4:Xe=_.stateNode.containerInfo,$t=!0;break e}_=_.return}if(Xe===null)throw Error(s(160));ep(f,v,u),Xe=null,$t=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)np(t,e),t=t.sibling}var bn=null;function np(e,t){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Wt(t,e),en(e),l&4&&(ya(3,e,e.return),fr(3,e),ya(5,e,e.return));break;case 1:Wt(t,e),en(e),l&512&&(rt||i===null||Dn(i,i.return)),l&64&&Qn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var u=bn;if(Wt(t,e),en(e),l&512&&(rt||i===null||Dn(i,i.return)),l&4){var f=i!==null?i.memoizedState:null;if(l=e.memoizedState,i===null)if(l===null)if(e.stateNode===null){e:{l=e.type,i=e.memoizedProps,u=u.ownerDocument||u;t:switch(l){case"title":f=u.getElementsByTagName("title")[0],(!f||f[Ps]||f[Dt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(l),u.head.insertBefore(f,u.querySelector("head > title"))),Ot(f,l,i),f[Dt]=e,bt(f),l=f;break e;case"link":var v=Qp("link","href",u).get(l+(i.href||""));if(v){for(var _=0;_<v.length;_++)if(f=v[_],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){v.splice(_,1);break t}}f=u.createElement(l),Ot(f,l,i),u.head.appendChild(f);break;case"meta":if(v=Qp("meta","content",u).get(l+(i.content||""))){for(_=0;_<v.length;_++)if(f=v[_],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){v.splice(_,1);break t}}f=u.createElement(l),Ot(f,l,i),u.head.appendChild(f);break;default:throw Error(s(468,l))}f[Dt]=e,bt(f),l=f}e.stateNode=l}else Zp(u,e.type,e.stateNode);else e.stateNode=Xp(u,l,e.memoizedProps);else f!==l?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,l===null?Zp(u,e.type,e.stateNode):Xp(u,l,e.memoizedProps)):l===null&&e.stateNode!==null&&mu(e,e.memoizedProps,i.memoizedProps)}break;case 27:Wt(t,e),en(e),l&512&&(rt||i===null||Dn(i,i.return)),i!==null&&l&4&&mu(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Wt(t,e),en(e),l&512&&(rt||i===null||Dn(i,i.return)),e.flags&32){u=e.stateNode;try{Di(u,"")}catch(L){Ve(e,e.return,L)}}l&4&&e.stateNode!=null&&(u=e.memoizedProps,mu(e,u,i!==null?i.memoizedProps:u)),l&1024&&(yu=!0);break;case 6:if(Wt(t,e),en(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,i=e.stateNode;try{i.nodeValue=l}catch(L){Ve(e,e.return,L)}}break;case 3:if(ao=null,u=bn,bn=to(t.containerInfo),Wt(t,e),bn=u,en(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Nr(t.containerInfo)}catch(L){Ve(e,e.return,L)}yu&&(yu=!1,ap(e));break;case 4:l=bn,bn=to(e.stateNode.containerInfo),Wt(t,e),en(e),bn=l;break;case 12:Wt(t,e),en(e);break;case 13:Wt(t,e),en(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Tu=ze()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,vu(e,l)));break;case 22:u=e.memoizedState!==null;var O=i!==null&&i.memoizedState!==null,M=Qn,H=rt;if(Qn=M||u,rt=H||O,Wt(t,e),rt=H,Qn=M,en(e),l&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(i===null||O||Qn||rt||li(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){O=i=t;try{if(f=O.stateNode,u)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{_=O.stateNode;var F=O.memoizedProps.style,U=F!=null&&F.hasOwnProperty("display")?F.display:null;_.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(L){Ve(O,O.return,L)}}}else if(t.tag===6){if(i===null){O=t;try{O.stateNode.nodeValue=u?"":O.memoizedProps}catch(L){Ve(O,O.return,L)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,vu(e,i))));break;case 19:Wt(t,e),en(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,vu(e,l)));break;case 30:break;case 21:break;default:Wt(t,e),en(e)}}function en(e){var t=e.flags;if(t&2){try{for(var i,l=e.return;l!==null;){if(Xm(l)){i=l;break}l=l.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var u=i.stateNode,f=pu(e);Hl(e,f,u);break;case 5:var v=i.stateNode;i.flags&32&&(Di(v,""),i.flags&=-33);var _=pu(e);Hl(e,_,v);break;case 3:case 4:var O=i.stateNode.containerInfo,M=pu(e);gu(e,M,O);break;default:throw Error(s(161))}}catch(H){Ve(e,e.return,H)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ap(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ap(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function va(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Jm(e,t.alternate,t),t=t.sibling}function li(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ya(4,t,t.return),li(t);break;case 1:Dn(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&Ym(t,t.return,i),li(t);break;case 27:Sr(t.stateNode);case 26:case 5:Dn(t,t.return),li(t);break;case 22:t.memoizedState===null&&li(t);break;case 30:li(t);break;default:li(t)}e=e.sibling}}function ba(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,u=e,f=t,v=f.flags;switch(f.tag){case 0:case 11:case 15:ba(u,f,i),fr(4,f);break;case 1:if(ba(u,f,i),l=f,u=l.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(M){Ve(l,l.return,M)}if(l=f,u=l.updateQueue,u!==null){var _=l.stateNode;try{var O=u.shared.hiddenCallbacks;if(O!==null)for(u.shared.hiddenCallbacks=null,u=0;u<O.length;u++)kh(O[u],_)}catch(M){Ve(l,l.return,M)}}i&&v&64&&Fm(f),hr(f,f.return);break;case 27:Qm(f);case 26:case 5:ba(u,f,i),i&&l===null&&v&4&&Km(f),hr(f,f.return);break;case 12:ba(u,f,i);break;case 13:ba(u,f,i),i&&v&4&&tp(u,f);break;case 22:f.memoizedState===null&&ba(u,f,i),hr(f,f.return);break;case 30:break;default:ba(u,f,i)}t=t.sibling}}function bu(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Js(i))}function wu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Js(e))}function Mn(e,t,i,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ip(e,t,i,l),t=t.sibling}function ip(e,t,i,l){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Mn(e,t,i,l),u&2048&&fr(9,t);break;case 1:Mn(e,t,i,l);break;case 3:Mn(e,t,i,l),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Js(e)));break;case 12:if(u&2048){Mn(e,t,i,l),e=t.stateNode;try{var f=t.memoizedProps,v=f.id,_=f.onPostCommit;typeof _=="function"&&_(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){Ve(t,t.return,O)}}else Mn(e,t,i,l);break;case 13:Mn(e,t,i,l);break;case 23:break;case 22:f=t.stateNode,v=t.alternate,t.memoizedState!==null?f._visibility&2?Mn(e,t,i,l):mr(e,t):f._visibility&2?Mn(e,t,i,l):(f._visibility|=2,Ji(e,t,i,l,(t.subtreeFlags&10256)!==0)),u&2048&&bu(v,t);break;case 24:Mn(e,t,i,l),u&2048&&wu(t.alternate,t);break;default:Mn(e,t,i,l)}}function Ji(e,t,i,l,u){for(u=u&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var f=e,v=t,_=i,O=l,M=v.flags;switch(v.tag){case 0:case 11:case 15:Ji(f,v,_,O,u),fr(8,v);break;case 23:break;case 22:var H=v.stateNode;v.memoizedState!==null?H._visibility&2?Ji(f,v,_,O,u):mr(f,v):(H._visibility|=2,Ji(f,v,_,O,u)),u&&M&2048&&bu(v.alternate,v);break;case 24:Ji(f,v,_,O,u),u&&M&2048&&wu(v.alternate,v);break;default:Ji(f,v,_,O,u)}t=t.sibling}}function mr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,l=t,u=l.flags;switch(l.tag){case 22:mr(i,l),u&2048&&bu(l.alternate,l);break;case 24:mr(i,l),u&2048&&wu(l.alternate,l);break;default:mr(i,l)}t=t.sibling}}var pr=8192;function Wi(e){if(e.subtreeFlags&pr)for(e=e.child;e!==null;)sp(e),e=e.sibling}function sp(e){switch(e.tag){case 26:Wi(e),e.flags&pr&&e.memoizedState!==null&&jb(bn,e.memoizedState,e.memoizedProps);break;case 5:Wi(e);break;case 3:case 4:var t=bn;bn=to(e.stateNode.containerInfo),Wi(e),bn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=pr,pr=16777216,Wi(e),pr=t):Wi(e));break;default:Wi(e)}}function rp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function gr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var l=t[i];_t=l,op(l,e)}rp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)lp(e),e=e.sibling}function lp(e){switch(e.tag){case 0:case 11:case 15:gr(e),e.flags&2048&&ya(9,e,e.return);break;case 3:gr(e);break;case 12:gr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Gl(e)):gr(e);break;default:gr(e)}}function Gl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var l=t[i];_t=l,op(l,e)}rp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ya(8,t,t.return),Gl(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,Gl(t));break;default:Gl(t)}e=e.sibling}}function op(e,t){for(;_t!==null;){var i=_t;switch(i.tag){case 0:case 11:case 15:ya(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Js(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,_t=l;else e:for(i=e;_t!==null;){l=_t;var u=l.sibling,f=l.return;if(Wm(l),l===i){_t=null;break e}if(u!==null){u.return=f,_t=u;break e}_t=f}}}var H0={getCacheForType:function(e){var t=Mt(pt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i}},G0=typeof WeakMap=="function"?WeakMap:Map,Ie=0,Fe=null,Re=null,Ue=0,qe=0,tn=null,wa=!1,es=!1,_u=!1,Jn=0,nt=0,_a=0,oi=0,Su=0,hn=0,ts=0,yr=null,Vt=null,xu=!1,Tu=0,$l=1/0,Vl=null,Sa=null,At=0,xa=null,ns=null,as=0,Eu=0,ju=null,cp=null,vr=0,Cu=null;function nn(){if((Ie&2)!==0&&Ue!==0)return Ue&-Ue;if(P.T!==null){var e=$i;return e!==0?e:Mu()}return Ef()}function up(){hn===0&&(hn=(Ue&536870912)===0||Be?jt():536870912);var e=fn.current;return e!==null&&(e.flags|=32),hn}function an(e,t,i){(e===Fe&&(qe===2||qe===9)||e.cancelPendingCommit!==null)&&(is(e,0),Ta(e,Ue,hn,!1)),Nn(e,i),((Ie&2)===0||e!==Fe)&&(e===Fe&&((Ie&2)===0&&(oi|=i),nt===4&&Ta(e,Ue,hn,!1)),Un(e))}function dp(e,t,i){if((Ie&6)!==0)throw Error(s(327));var l=!i&&(t&124)===0&&(t&e.expiredLanes)===0||ve(e,t),u=l?F0(e,t):Nu(e,t,!0),f=l;do{if(u===0){es&&!l&&Ta(e,t,0,!1);break}else{if(i=e.current.alternate,f&&!$0(i)){u=Nu(e,t,!1),f=!1;continue}if(u===2){if(f=t,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var _=e;u=yr;var O=_.current.memoizedState.isDehydrated;if(O&&(is(_,v).flags|=256),v=Nu(_,v,!1),v!==2){if(_u&&!O){_.errorRecoveryDisabledLanes|=f,oi|=f,u=4;break e}f=Vt,Vt=u,f!==null&&(Vt===null?Vt=f:Vt.push.apply(Vt,f))}u=v}if(f=!1,u!==2)continue}}if(u===1){is(e,0),Ta(e,t,0,!0);break}e:{switch(l=e,f=u,f){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Ta(l,t,hn,!wa);break e;case 2:Vt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(u=Tu+300-ze(),10<u)){if(Ta(l,t,hn,!wa),re(l,0,!0)!==0)break e;l.timeoutHandle=Ip(fp.bind(null,l,i,Vt,Vl,xu,t,hn,oi,ts,wa,f,2,-0,0),u);break e}fp(l,i,Vt,Vl,xu,t,hn,oi,ts,wa,f,0,-0,0)}}break}while(!0);Un(e)}function fp(e,t,i,l,u,f,v,_,O,M,H,F,U,L){if(e.timeoutHandle=-1,F=t.subtreeFlags,(F&8192||(F&16785408)===16785408)&&(Er={stylesheets:null,count:0,unsuspend:Eb},sp(t),F=Cb(),F!==null)){e.cancelPendingCommit=F(bp.bind(null,e,t,f,i,l,u,v,_,O,H,1,U,L)),Ta(e,f,v,!M);return}bp(e,t,f,i,l,u,v,_,O)}function $0(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var u=i[l],f=u.getSnapshot;u=u.value;try{if(!Zt(f(),u))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ta(e,t,i,l){t&=~Su,t&=~oi,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var u=t;0<u;){var f=31-mt(u),v=1<<f;l[f]=-1,u&=~v}i!==0&&nl(e,i,t)}function Fl(){return(Ie&6)===0?(br(0),!1):!0}function Au(){if(Re!==null){if(qe===0)var e=Re.return;else e=Re,$n=ni=null,Vc(e),Qi=null,cr=0,e=Re;for(;e!==null;)Vm(e.alternate,e),e=e.return;Re=null}}function is(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,ob(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Au(),Fe=e,Re=i=qn(e.current,null),Ue=t,qe=0,tn=null,wa=!1,es=ve(e,t),_u=!1,ts=hn=Su=oi=_a=nt=0,Vt=yr=null,xu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var u=31-mt(l),f=1<<u;t|=e[u],l&=~f}return Jn=t,ml(),i}function hp(e,t){Ae=null,P.H=Dl,t===er||t===xl?(t=Nh(),qe=3):t===Ch?(t=Nh(),qe=4):qe=t===Rm?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,tn=t,Re===null&&(nt=1,Bl(e,on(t,e.current)))}function mp(){var e=P.H;return P.H=Dl,e===null?Dl:e}function pp(){var e=P.A;return P.A=H0,e}function Ou(){nt=4,wa||(Ue&4194048)!==Ue&&fn.current!==null||(es=!0),(_a&134217727)===0&&(oi&134217727)===0||Fe===null||Ta(Fe,Ue,hn,!1)}function Nu(e,t,i){var l=Ie;Ie|=2;var u=mp(),f=pp();(Fe!==e||Ue!==t)&&(Vl=null,is(e,t)),t=!1;var v=nt;e:do try{if(qe!==0&&Re!==null){var _=Re,O=tn;switch(qe){case 8:Au(),v=6;break e;case 3:case 2:case 9:case 6:fn.current===null&&(t=!0);var M=qe;if(qe=0,tn=null,ss(e,_,O,M),i&&es){v=0;break e}break;default:M=qe,qe=0,tn=null,ss(e,_,O,M)}}V0(),v=nt;break}catch(H){hp(e,H)}while(!0);return t&&e.shellSuspendCounter++,$n=ni=null,Ie=l,P.H=u,P.A=f,Re===null&&(Fe=null,Ue=0,ml()),v}function V0(){for(;Re!==null;)gp(Re)}function F0(e,t){var i=Ie;Ie|=2;var l=mp(),u=pp();Fe!==e||Ue!==t?(Vl=null,$l=ze()+500,is(e,t)):es=ve(e,t);e:do try{if(qe!==0&&Re!==null){t=Re;var f=tn;t:switch(qe){case 1:qe=0,tn=null,ss(e,t,f,1);break;case 2:case 9:if(Ah(f)){qe=0,tn=null,yp(t);break}t=function(){qe!==2&&qe!==9||Fe!==e||(qe=7),Un(e)},f.then(t,t);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:Ah(f)?(qe=0,tn=null,yp(t)):(qe=0,tn=null,ss(e,t,f,7));break;case 5:var v=null;switch(Re.tag){case 26:v=Re.memoizedState;case 5:case 27:var _=Re;if(!v||Jp(v)){qe=0,tn=null;var O=_.sibling;if(O!==null)Re=O;else{var M=_.return;M!==null?(Re=M,Yl(M)):Re=null}break t}}qe=0,tn=null,ss(e,t,f,5);break;case 6:qe=0,tn=null,ss(e,t,f,6);break;case 8:Au(),nt=6;break e;default:throw Error(s(462))}}Y0();break}catch(H){hp(e,H)}while(!0);return $n=ni=null,P.H=l,P.A=u,Ie=i,Re!==null?0:(Fe=null,Ue=0,ml(),nt)}function Y0(){for(;Re!==null&&!Te();)gp(Re)}function gp(e){var t=Gm(e.alternate,e,Jn);e.memoizedProps=e.pendingProps,t===null?Yl(e):Re=t}function yp(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Pm(i,t,t.pendingProps,t.type,void 0,Ue);break;case 11:t=Pm(i,t,t.pendingProps,t.type.render,t.ref,Ue);break;case 5:Vc(t);default:Vm(i,t),t=Re=vh(t,Jn),t=Gm(i,t,Jn)}e.memoizedProps=e.pendingProps,t===null?Yl(e):Re=t}function ss(e,t,i,l){$n=ni=null,Vc(t),Qi=null,cr=0;var u=t.return;try{if(L0(e,u,t,i,Ue)){nt=1,Bl(e,on(i,e.current)),Re=null;return}}catch(f){if(u!==null)throw Re=u,f;nt=1,Bl(e,on(i,e.current)),Re=null;return}t.flags&32768?(Be||l===1?e=!0:es||(Ue&536870912)!==0?e=!1:(wa=e=!0,(l===2||l===9||l===3||l===6)&&(l=fn.current,l!==null&&l.tag===13&&(l.flags|=16384))),vp(t,e)):Yl(t)}function Yl(e){var t=e;do{if((t.flags&32768)!==0){vp(t,wa);return}e=t.return;var i=B0(t.alternate,t,Jn);if(i!==null){Re=i;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);nt===0&&(nt=5)}function vp(e,t){do{var i=z0(e.alternate,e);if(i!==null){i.flags&=32767,Re=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Re=e;return}Re=e=i}while(e!==null);nt=6,Re=null}function bp(e,t,i,l,u,f,v,_,O){e.cancelPendingCommit=null;do Kl();while(At!==0);if((Ie&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(f=t.lanes|t.childLanes,f|=wc,tl(e,i,f,v,_,O),e===Fe&&(Re=Fe=null,Ue=0),ns=t,xa=e,as=i,Eu=f,ju=u,cp=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Z0(Xt,function(){return Tp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=P.T,P.T=null,u=Q.p,Q.p=2,v=Ie,Ie|=4;try{I0(e,t,i)}finally{Ie=v,Q.p=u,P.T=l}}At=1,wp(),_p(),Sp()}}function wp(){if(At===1){At=0;var e=xa,t=ns,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=P.T,P.T=null;var l=Q.p;Q.p=2;var u=Ie;Ie|=4;try{np(t,e);var f=Hu,v=oh(e.containerInfo),_=f.focusedElem,O=f.selectionRange;if(v!==_&&_&&_.ownerDocument&&lh(_.ownerDocument.documentElement,_)){if(O!==null&&pc(_)){var M=O.start,H=O.end;if(H===void 0&&(H=M),"selectionStart"in _)_.selectionStart=M,_.selectionEnd=Math.min(H,_.value.length);else{var F=_.ownerDocument||document,U=F&&F.defaultView||window;if(U.getSelection){var L=U.getSelection(),be=_.textContent.length,ge=Math.min(O.start,be),$e=O.end===void 0?ge:Math.min(O.end,be);!L.extend&&ge>$e&&(v=$e,$e=ge,ge=v);var k=rh(_,ge),R=rh(_,$e);if(k&&R&&(L.rangeCount!==1||L.anchorNode!==k.node||L.anchorOffset!==k.offset||L.focusNode!==R.node||L.focusOffset!==R.offset)){var D=F.createRange();D.setStart(k.node,k.offset),L.removeAllRanges(),ge>$e?(L.addRange(D),L.extend(R.node,R.offset)):(D.setEnd(R.node,R.offset),L.addRange(D))}}}}for(F=[],L=_;L=L.parentNode;)L.nodeType===1&&F.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<F.length;_++){var G=F[_];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}ro=!!qu,Hu=qu=null}finally{Ie=u,Q.p=l,P.T=i}}e.current=t,At=2}}function _p(){if(At===2){At=0;var e=xa,t=ns,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=P.T,P.T=null;var l=Q.p;Q.p=2;var u=Ie;Ie|=4;try{Jm(e,t.alternate,t)}finally{Ie=u,Q.p=l,P.T=i}}At=3}}function Sp(){if(At===4||At===3){At=0,it();var e=xa,t=ns,i=as,l=cp;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?At=5:(At=0,ns=xa=null,xp(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Sa=null),Ls(i),t=t.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(Bn,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=P.T,u=Q.p,Q.p=2,P.T=null;try{for(var f=e.onRecoverableError,v=0;v<l.length;v++){var _=l[v];f(_.value,{componentStack:_.stack})}}finally{P.T=t,Q.p=u}}(as&3)!==0&&Kl(),Un(e),u=e.pendingLanes,(i&4194090)!==0&&(u&42)!==0?e===Cu?vr++:(vr=0,Cu=e):vr=0,br(0)}}function xp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Js(t)))}function Kl(e){return wp(),_p(),Sp(),Tp()}function Tp(){if(At!==5)return!1;var e=xa,t=Eu;Eu=0;var i=Ls(as),l=P.T,u=Q.p;try{Q.p=32>i?32:i,P.T=null,i=ju,ju=null;var f=xa,v=as;if(At=0,ns=xa=null,as=0,(Ie&6)!==0)throw Error(s(331));var _=Ie;if(Ie|=4,lp(f.current),ip(f,f.current,v,i),Ie=_,br(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(Bn,f)}catch{}return!0}finally{Q.p=u,P.T=l,xp(e,t)}}function Ep(e,t,i){t=on(i,t),t=su(e.stateNode,t,2),e=ha(e,t,2),e!==null&&(Nn(e,2),Un(e))}function Ve(e,t,i){if(e.tag===3)Ep(e,e,i);else for(;t!==null;){if(t.tag===3){Ep(t,e,i);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Sa===null||!Sa.has(l))){e=on(i,e),i=Om(2),l=ha(t,i,2),l!==null&&(Nm(i,l,t,e),Nn(l,2),Un(l));break}}t=t.return}}function Ru(e,t,i){var l=e.pingCache;if(l===null){l=e.pingCache=new G0;var u=new Set;l.set(t,u)}else u=l.get(t),u===void 0&&(u=new Set,l.set(t,u));u.has(i)||(_u=!0,u.add(i),e=K0.bind(null,e,t,i),t.then(e,e))}function K0(e,t,i){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Fe===e&&(Ue&i)===i&&(nt===4||nt===3&&(Ue&62914560)===Ue&&300>ze()-Tu?(Ie&2)===0&&is(e,0):Su|=i,ts===Ue&&(ts=0)),Un(e)}function jp(e,t){t===0&&(t=yn()),e=Ii(e,t),e!==null&&(Nn(e,t),Un(e))}function X0(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),jp(e,i)}function Q0(e,t){var i=0;switch(e.tag){case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(t),jp(e,i)}function Z0(e,t){return fe(e,t)}var Xl=null,rs=null,ku=!1,Ql=!1,Du=!1,ci=0;function Un(e){e!==rs&&e.next===null&&(rs===null?Xl=rs=e:rs=rs.next=e),Ql=!0,ku||(ku=!0,W0())}function br(e,t){if(!Du&&Ql){Du=!0;do for(var i=!1,l=Xl;l!==null;){if(e!==0){var u=l.pendingLanes;if(u===0)var f=0;else{var v=l.suspendedLanes,_=l.pingedLanes;f=(1<<31-mt(42|e)+1)-1,f&=u&~(v&~_),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,Np(l,f))}else f=Ue,f=re(l,l===Fe?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||ve(l,f)||(i=!0,Np(l,f));l=l.next}while(i);Du=!1}}function J0(){Cp()}function Cp(){Ql=ku=!1;var e=0;ci!==0&&(lb()&&(e=ci),ci=0);for(var t=ze(),i=null,l=Xl;l!==null;){var u=l.next,f=Ap(l,t);f===0?(l.next=null,i===null?Xl=u:i.next=u,u===null&&(rs=i)):(i=l,(e!==0||(f&3)!==0)&&(Ql=!0)),l=u}br(e)}function Ap(e,t){for(var i=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-mt(f),_=1<<v,O=u[v];O===-1?((_&i)===0||(_&l)!==0)&&(u[v]=ot(_,t)):O<=t&&(e.expiredLanes|=_),f&=~_}if(t=Fe,i=Ue,i=re(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,i===0||e===t&&(qe===2||qe===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&pe(l),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||ve(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(l!==null&&pe(l),Ls(i)){case 2:case 8:i=Kt;break;case 32:i=Xt;break;case 268435456:i=An;break;default:i=Xt}return l=Op.bind(null,e),i=fe(i,l),e.callbackPriority=t,e.callbackNode=i,t}return l!==null&&l!==null&&pe(l),e.callbackPriority=2,e.callbackNode=null,2}function Op(e,t){if(At!==0&&At!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Kl()&&e.callbackNode!==i)return null;var l=Ue;return l=re(e,e===Fe?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(dp(e,l,t),Ap(e,ze()),e.callbackNode!=null&&e.callbackNode===i?Op.bind(null,e):null)}function Np(e,t){if(Kl())return null;dp(e,t,!0)}function W0(){cb(function(){(Ie&6)!==0?fe(Rt,J0):Cp()})}function Mu(){return ci===0&&(ci=jt()),ci}function Rp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ll(""+e)}function kp(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function eb(e,t,i,l,u){if(t==="submit"&&i&&i.stateNode===u){var f=Rp((u[qt]||null).action),v=l.submitter;v&&(t=(t=v[qt]||null)?Rp(t.formAction):v.getAttribute("formAction"),t!==null&&(f=t,v=null));var _=new dl("action","action",null,l,u);e.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ci!==0){var O=v?kp(u,v):new FormData(u);eu(i,{pending:!0,data:O,method:u.method,action:f},null,O)}}else typeof f=="function"&&(_.preventDefault(),O=v?kp(u,v):new FormData(u),eu(i,{pending:!0,data:O,method:u.method,action:f},f,O))},currentTarget:u}]})}}for(var Uu=0;Uu<bc.length;Uu++){var Lu=bc[Uu],tb=Lu.toLowerCase(),nb=Lu[0].toUpperCase()+Lu.slice(1);vn(tb,"on"+nb)}vn(dh,"onAnimationEnd"),vn(fh,"onAnimationIteration"),vn(hh,"onAnimationStart"),vn("dblclick","onDoubleClick"),vn("focusin","onFocus"),vn("focusout","onBlur"),vn(b0,"onTransitionRun"),vn(w0,"onTransitionStart"),vn(_0,"onTransitionCancel"),vn(mh,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),Ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ya("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ab=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wr));function Dp(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],u=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var v=l.length-1;0<=v;v--){var _=l[v],O=_.instance,M=_.currentTarget;if(_=_.listener,O!==f&&u.isPropagationStopped())break e;f=_,u.currentTarget=M;try{f(u)}catch(H){Pl(H)}u.currentTarget=null,f=O}else for(v=0;v<l.length;v++){if(_=l[v],O=_.instance,M=_.currentTarget,_=_.listener,O!==f&&u.isPropagationStopped())break e;f=_,u.currentTarget=M;try{f(u)}catch(H){Pl(H)}u.currentTarget=null,f=O}}}}function ke(e,t){var i=t[Xo];i===void 0&&(i=t[Xo]=new Set);var l=e+"__bubble";i.has(l)||(Mp(t,e,2,!1),i.add(l))}function Pu(e,t,i){var l=0;t&&(l|=4),Mp(i,e,l,t)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function Bu(e){if(!e[Zl]){e[Zl]=!0,Cf.forEach(function(i){i!=="selectionchange"&&(ab.has(i)||Pu(i,!1,e),Pu(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Zl]||(t[Zl]=!0,Pu("selectionchange",!1,t))}}function Mp(e,t,i,l){switch(ig(t)){case 2:var u=Nb;break;case 8:u=Rb;break;default:u=Ju}i=u.bind(null,t,i,e),u=void 0,!rc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(t,i,{capture:!0,passive:u}):e.addEventListener(t,i,!0):u!==void 0?e.addEventListener(t,i,{passive:u}):e.addEventListener(t,i,!1)}function zu(e,t,i,l,u){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var _=l.stateNode.containerInfo;if(_===u)break;if(v===4)for(v=l.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===u)return;v=v.return}for(;_!==null;){if(v=Ci(_),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){l=f=v;continue e}_=_.parentNode}}l=l.return}qf(function(){var M=f,H=ic(i),F=[];e:{var U=ph.get(e);if(U!==void 0){var L=dl,be=e;switch(e){case"keypress":if(cl(i)===0)break e;case"keydown":case"keyup":L=Zv;break;case"focusin":be="focus",L=uc;break;case"focusout":be="blur",L=uc;break;case"beforeblur":case"afterblur":L=uc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=$f;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=zv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=e0;break;case dh:case fh:case hh:L=Hv;break;case mh:L=n0;break;case"scroll":case"scrollend":L=Pv;break;case"wheel":L=i0;break;case"copy":case"cut":case"paste":L=$v;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=Ff;break;case"toggle":case"beforetoggle":L=r0}var ge=(t&4)!==0,$e=!ge&&(e==="scroll"||e==="scrollend"),k=ge?U!==null?U+"Capture":null:U;ge=[];for(var R=M,D;R!==null;){var G=R;if(D=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||D===null||k===null||(G=zs(R,k),G!=null&&ge.push(_r(R,G,D))),$e)break;R=R.return}0<ge.length&&(U=new L(U,be,null,i,H),F.push({event:U,listeners:ge}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",U&&i!==ac&&(be=i.relatedTarget||i.fromElement)&&(Ci(be)||be[ji]))break e;if((L||U)&&(U=H.window===H?H:(U=H.ownerDocument)?U.defaultView||U.parentWindow:window,L?(be=i.relatedTarget||i.toElement,L=M,be=be?Ci(be):null,be!==null&&($e=c(be),ge=be.tag,be!==$e||ge!==5&&ge!==27&&ge!==6)&&(be=null)):(L=null,be=M),L!==be)){if(ge=$f,G="onMouseLeave",k="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(ge=Ff,G="onPointerLeave",k="onPointerEnter",R="pointer"),$e=L==null?U:Bs(L),D=be==null?U:Bs(be),U=new ge(G,R+"leave",L,i,H),U.target=$e,U.relatedTarget=D,G=null,Ci(H)===M&&(ge=new ge(k,R+"enter",be,i,H),ge.target=D,ge.relatedTarget=$e,G=ge),$e=G,L&&be)t:{for(ge=L,k=be,R=0,D=ge;D;D=ls(D))R++;for(D=0,G=k;G;G=ls(G))D++;for(;0<R-D;)ge=ls(ge),R--;for(;0<D-R;)k=ls(k),D--;for(;R--;){if(ge===k||k!==null&&ge===k.alternate)break t;ge=ls(ge),k=ls(k)}ge=null}else ge=null;L!==null&&Up(F,U,L,ge,!1),be!==null&&$e!==null&&Up(F,$e,be,ge,!0)}}e:{if(U=M?Bs(M):window,L=U.nodeName&&U.nodeName.toLowerCase(),L==="select"||L==="input"&&U.type==="file")var ue=eh;else if(Jf(U))if(th)ue=g0;else{ue=m0;var Oe=h0}else L=U.nodeName,!L||L.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?M&&nc(M.elementType)&&(ue=eh):ue=p0;if(ue&&(ue=ue(e,M))){Wf(F,ue,i,H);break e}Oe&&Oe(e,U,M),e==="focusout"&&M&&U.type==="number"&&M.memoizedProps.value!=null&&tc(U,"number",U.value)}switch(Oe=M?Bs(M):window,e){case"focusin":(Jf(Oe)||Oe.contentEditable==="true")&&(Pi=Oe,gc=M,Ys=null);break;case"focusout":Ys=gc=Pi=null;break;case"mousedown":yc=!0;break;case"contextmenu":case"mouseup":case"dragend":yc=!1,ch(F,i,H);break;case"selectionchange":if(v0)break;case"keydown":case"keyup":ch(F,i,H)}var me;if(fc)e:{switch(e){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Li?Qf(e,i)&&(ye="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ye="onCompositionStart");ye&&(Yf&&i.locale!=="ko"&&(Li||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Li&&(me=Hf()):(ca=H,lc="value"in ca?ca.value:ca.textContent,Li=!0)),Oe=Jl(M,ye),0<Oe.length&&(ye=new Vf(ye,e,null,i,H),F.push({event:ye,listeners:Oe}),me?ye.data=me:(me=Zf(i),me!==null&&(ye.data=me)))),(me=o0?c0(e,i):u0(e,i))&&(ye=Jl(M,"onBeforeInput"),0<ye.length&&(Oe=new Vf("onBeforeInput","beforeinput",null,i,H),F.push({event:Oe,listeners:ye}),Oe.data=me)),eb(F,e,M,i,H)}Dp(F,t)})}function _r(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Jl(e,t){for(var i=t+"Capture",l=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=zs(e,i),u!=null&&l.unshift(_r(e,u,f)),u=zs(e,t),u!=null&&l.push(_r(e,u,f))),e.tag===3)return l;e=e.return}return[]}function ls(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Up(e,t,i,l,u){for(var f=t._reactName,v=[];i!==null&&i!==l;){var _=i,O=_.alternate,M=_.stateNode;if(_=_.tag,O!==null&&O===l)break;_!==5&&_!==26&&_!==27||M===null||(O=M,u?(M=zs(i,f),M!=null&&v.unshift(_r(i,M,O))):u||(M=zs(i,f),M!=null&&v.push(_r(i,M,O)))),i=i.return}v.length!==0&&e.push({event:t,listeners:v})}var ib=/\r\n?/g,sb=/\u0000|\uFFFD/g;function Lp(e){return(typeof e=="string"?e:""+e).replace(ib,`
`).replace(sb,"")}function Pp(e,t){return t=Lp(t),Lp(e)===t}function Wl(){}function Ge(e,t,i,l,u,f){switch(i){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Di(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Di(e,""+l);break;case"className":il(e,"class",l);break;case"tabIndex":il(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":il(e,i,l);break;case"style":zf(e,l,f);break;case"data":if(t!=="object"){il(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=ll(""+l),e.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(t!=="input"&&Ge(e,t,"name",u.name,u,null),Ge(e,t,"formEncType",u.formEncType,u,null),Ge(e,t,"formMethod",u.formMethod,u,null),Ge(e,t,"formTarget",u.formTarget,u,null)):(Ge(e,t,"encType",u.encType,u,null),Ge(e,t,"method",u.method,u,null),Ge(e,t,"target",u.target,u,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=ll(""+l),e.setAttribute(i,l);break;case"onClick":l!=null&&(e.onclick=Wl);break;case"onScroll":l!=null&&ke("scroll",e);break;case"onScrollEnd":l!=null&&ke("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}i=ll(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""+l):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":l===!0?e.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,l):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(i,l):e.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(i):e.setAttribute(i,l);break;case"popover":ke("beforetoggle",e),ke("toggle",e),al(e,"popover",l);break;case"xlinkActuate":zn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":zn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":zn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":zn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":zn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":zn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":zn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":zn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":zn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":al(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Uv.get(i)||i,al(e,i,l))}}function Iu(e,t,i,l,u,f){switch(i){case"style":zf(e,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof l=="string"?Di(e,l):(typeof l=="number"||typeof l=="bigint")&&Di(e,""+l);break;case"onScroll":l!=null&&ke("scroll",e);break;case"onScrollEnd":l!=null&&ke("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Wl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Af.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),t=i.slice(2,u?i.length-7:void 0),f=e[qt]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(t,f,u),typeof l=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,l,u);break e}i in e?e[i]=l:l===!0?e.setAttribute(i,""):al(e,i,l)}}}function Ot(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",e),ke("load",e);var l=!1,u=!1,f;for(f in i)if(i.hasOwnProperty(f)){var v=i[f];if(v!=null)switch(f){case"src":l=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Ge(e,t,f,v,i,null)}}u&&Ge(e,t,"srcSet",i.srcSet,i,null),l&&Ge(e,t,"src",i.src,i,null);return;case"input":ke("invalid",e);var _=f=v=u=null,O=null,M=null;for(l in i)if(i.hasOwnProperty(l)){var H=i[l];if(H!=null)switch(l){case"name":u=H;break;case"type":v=H;break;case"checked":O=H;break;case"defaultChecked":M=H;break;case"value":f=H;break;case"defaultValue":_=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,t));break;default:Ge(e,t,l,H,i,null)}}Uf(e,f,_,O,M,v,u,!1),sl(e);return;case"select":ke("invalid",e),l=v=f=null;for(u in i)if(i.hasOwnProperty(u)&&(_=i[u],_!=null))switch(u){case"value":f=_;break;case"defaultValue":v=_;break;case"multiple":l=_;default:Ge(e,t,u,_,i,null)}t=f,i=v,e.multiple=!!l,t!=null?ki(e,!!l,t,!1):i!=null&&ki(e,!!l,i,!0);return;case"textarea":ke("invalid",e),f=u=l=null;for(v in i)if(i.hasOwnProperty(v)&&(_=i[v],_!=null))switch(v){case"value":l=_;break;case"defaultValue":u=_;break;case"children":f=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:Ge(e,t,v,_,i,null)}Pf(e,l,u,f),sl(e);return;case"option":for(O in i)if(i.hasOwnProperty(O)&&(l=i[O],l!=null))switch(O){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ge(e,t,O,l,i,null)}return;case"dialog":ke("beforetoggle",e),ke("toggle",e),ke("cancel",e),ke("close",e);break;case"iframe":case"object":ke("load",e);break;case"video":case"audio":for(l=0;l<wr.length;l++)ke(wr[l],e);break;case"image":ke("error",e),ke("load",e);break;case"details":ke("toggle",e);break;case"embed":case"source":case"link":ke("error",e),ke("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(M in i)if(i.hasOwnProperty(M)&&(l=i[M],l!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Ge(e,t,M,l,i,null)}return;default:if(nc(t)){for(H in i)i.hasOwnProperty(H)&&(l=i[H],l!==void 0&&Iu(e,t,H,l,i,void 0));return}}for(_ in i)i.hasOwnProperty(_)&&(l=i[_],l!=null&&Ge(e,t,_,l,i,null))}function rb(e,t,i,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,v=null,_=null,O=null,M=null,H=null;for(L in i){var F=i[L];if(i.hasOwnProperty(L)&&F!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":O=F;default:l.hasOwnProperty(L)||Ge(e,t,L,null,l,F)}}for(var U in l){var L=l[U];if(F=i[U],l.hasOwnProperty(U)&&(L!=null||F!=null))switch(U){case"type":f=L;break;case"name":u=L;break;case"checked":M=L;break;case"defaultChecked":H=L;break;case"value":v=L;break;case"defaultValue":_=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(137,t));break;default:L!==F&&Ge(e,t,U,L,l,F)}}ec(e,v,_,O,M,H,f,u);return;case"select":L=v=_=U=null;for(f in i)if(O=i[f],i.hasOwnProperty(f)&&O!=null)switch(f){case"value":break;case"multiple":L=O;default:l.hasOwnProperty(f)||Ge(e,t,f,null,l,O)}for(u in l)if(f=l[u],O=i[u],l.hasOwnProperty(u)&&(f!=null||O!=null))switch(u){case"value":U=f;break;case"defaultValue":_=f;break;case"multiple":v=f;default:f!==O&&Ge(e,t,u,f,l,O)}t=_,i=v,l=L,U!=null?ki(e,!!i,U,!1):!!l!=!!i&&(t!=null?ki(e,!!i,t,!0):ki(e,!!i,i?[]:"",!1));return;case"textarea":L=U=null;for(_ in i)if(u=i[_],i.hasOwnProperty(_)&&u!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Ge(e,t,_,null,l,u)}for(v in l)if(u=l[v],f=i[v],l.hasOwnProperty(v)&&(u!=null||f!=null))switch(v){case"value":U=u;break;case"defaultValue":L=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==f&&Ge(e,t,v,u,l,f)}Lf(e,U,L);return;case"option":for(var be in i)if(U=i[be],i.hasOwnProperty(be)&&U!=null&&!l.hasOwnProperty(be))switch(be){case"selected":e.selected=!1;break;default:Ge(e,t,be,null,l,U)}for(O in l)if(U=l[O],L=i[O],l.hasOwnProperty(O)&&U!==L&&(U!=null||L!=null))switch(O){case"selected":e.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:Ge(e,t,O,U,l,L)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in i)U=i[ge],i.hasOwnProperty(ge)&&U!=null&&!l.hasOwnProperty(ge)&&Ge(e,t,ge,null,l,U);for(M in l)if(U=l[M],L=i[M],l.hasOwnProperty(M)&&U!==L&&(U!=null||L!=null))switch(M){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(137,t));break;default:Ge(e,t,M,U,l,L)}return;default:if(nc(t)){for(var $e in i)U=i[$e],i.hasOwnProperty($e)&&U!==void 0&&!l.hasOwnProperty($e)&&Iu(e,t,$e,void 0,l,U);for(H in l)U=l[H],L=i[H],!l.hasOwnProperty(H)||U===L||U===void 0&&L===void 0||Iu(e,t,H,U,l,L);return}}for(var k in i)U=i[k],i.hasOwnProperty(k)&&U!=null&&!l.hasOwnProperty(k)&&Ge(e,t,k,null,l,U);for(F in l)U=l[F],L=i[F],!l.hasOwnProperty(F)||U===L||U==null&&L==null||Ge(e,t,F,U,l,L)}var qu=null,Hu=null;function eo(e){return e.nodeType===9?e:e.ownerDocument}function Bp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Gu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $u=null;function lb(){var e=window.event;return e&&e.type==="popstate"?e===$u?!1:($u=e,!0):($u=null,!1)}var Ip=typeof setTimeout=="function"?setTimeout:void 0,ob=typeof clearTimeout=="function"?clearTimeout:void 0,qp=typeof Promise=="function"?Promise:void 0,cb=typeof queueMicrotask=="function"?queueMicrotask:typeof qp<"u"?function(e){return qp.resolve(null).then(e).catch(ub)}:Ip;function ub(e){setTimeout(function(){throw e})}function Ea(e){return e==="head"}function Hp(e,t){var i=t,l=0,u=0;do{var f=i.nextSibling;if(e.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"){if(0<l&&8>l){i=l;var v=e.ownerDocument;if(i&1&&Sr(v.documentElement),i&2&&Sr(v.body),i&4)for(i=v.head,Sr(i),v=i.firstChild;v;){var _=v.nextSibling,O=v.nodeName;v[Ps]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&v.rel.toLowerCase()==="stylesheet"||i.removeChild(v),v=_}}if(u===0){e.removeChild(f),Nr(t);return}u--}else i==="$"||i==="$?"||i==="$!"?u++:l=i.charCodeAt(0)-48;else l=0;i=f}while(i);Nr(t)}function Vu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Vu(i),Qo(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function db(e,t,i,l){for(;e.nodeType===1;){var u=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Ps])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=wn(e.nextSibling),e===null)break}return null}function fb(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=wn(e.nextSibling),e===null))return null;return e}function Fu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function hb(e,t){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")t();else{var l=function(){t(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Yu=null;function Gp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}function $p(e,t,i){switch(t=eo(i),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Sr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Qo(e)}var mn=new Map,Vp=new Set;function to(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Wn=Q.d;Q.d={f:mb,r:pb,D:gb,C:yb,L:vb,m:bb,X:_b,S:wb,M:Sb};function mb(){var e=Wn.f(),t=Fl();return e||t}function pb(e){var t=Ai(e);t!==null&&t.tag===5&&t.type==="form"?dm(t):Wn.r(e)}var os=typeof document>"u"?null:document;function Fp(e,t,i){var l=os;if(l&&typeof t=="string"&&t){var u=ln(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),Vp.has(u)||(Vp.add(u),e={rel:e,crossOrigin:i,href:t},l.querySelector(u)===null&&(t=l.createElement("link"),Ot(t,"link",e),bt(t),l.head.appendChild(t)))}}function gb(e){Wn.D(e),Fp("dns-prefetch",e,null)}function yb(e,t){Wn.C(e,t),Fp("preconnect",e,t)}function vb(e,t,i){Wn.L(e,t,i);var l=os;if(l&&e&&t){var u='link[rel="preload"][as="'+ln(t)+'"]';t==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+ln(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+ln(i.imageSizes)+'"]')):u+='[href="'+ln(e)+'"]';var f=u;switch(t){case"style":f=cs(e);break;case"script":f=us(e)}mn.has(f)||(e=y({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),mn.set(f,e),l.querySelector(u)!==null||t==="style"&&l.querySelector(xr(f))||t==="script"&&l.querySelector(Tr(f))||(t=l.createElement("link"),Ot(t,"link",e),bt(t),l.head.appendChild(t)))}}function bb(e,t){Wn.m(e,t);var i=os;if(i&&e){var l=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+ln(l)+'"][href="'+ln(e)+'"]',f=u;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=us(e)}if(!mn.has(f)&&(e=y({rel:"modulepreload",href:e},t),mn.set(f,e),i.querySelector(u)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Tr(f)))return}l=i.createElement("link"),Ot(l,"link",e),bt(l),i.head.appendChild(l)}}}function wb(e,t,i){Wn.S(e,t,i);var l=os;if(l&&e){var u=Oi(l).hoistableStyles,f=cs(e);t=t||"default";var v=u.get(f);if(!v){var _={loading:0,preload:null};if(v=l.querySelector(xr(f)))_.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},i),(i=mn.get(f))&&Ku(e,i);var O=v=l.createElement("link");bt(O),Ot(O,"link",e),O._p=new Promise(function(M,H){O.onload=M,O.onerror=H}),O.addEventListener("load",function(){_.loading|=1}),O.addEventListener("error",function(){_.loading|=2}),_.loading|=4,no(v,t,l)}v={type:"stylesheet",instance:v,count:1,state:_},u.set(f,v)}}}function _b(e,t){Wn.X(e,t);var i=os;if(i&&e){var l=Oi(i).hoistableScripts,u=us(e),f=l.get(u);f||(f=i.querySelector(Tr(u)),f||(e=y({src:e,async:!0},t),(t=mn.get(u))&&Xu(e,t),f=i.createElement("script"),bt(f),Ot(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(u,f))}}function Sb(e,t){Wn.M(e,t);var i=os;if(i&&e){var l=Oi(i).hoistableScripts,u=us(e),f=l.get(u);f||(f=i.querySelector(Tr(u)),f||(e=y({src:e,async:!0,type:"module"},t),(t=mn.get(u))&&Xu(e,t),f=i.createElement("script"),bt(f),Ot(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(u,f))}}function Yp(e,t,i,l){var u=(u=he.current)?to(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=cs(i.href),i=Oi(u).hoistableStyles,l=i.get(t),l||(l={type:"style",instance:null,count:0,state:null},i.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=cs(i.href);var f=Oi(u).hoistableStyles,v=f.get(e);if(v||(u=u.ownerDocument||u,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=u.querySelector(xr(e)))&&!f._p&&(v.instance=f,v.state.loading=5),mn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},mn.set(e,i),f||xb(u,e,i,v.state))),t&&l===null)throw Error(s(528,""));return v}if(t&&l!==null)throw Error(s(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=us(i),i=Oi(u).hoistableScripts,l=i.get(t),l||(l={type:"script",instance:null,count:0,state:null},i.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function cs(e){return'href="'+ln(e)+'"'}function xr(e){return'link[rel="stylesheet"]['+e+"]"}function Kp(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function xb(e,t,i,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Ot(t,"link",i),bt(t),e.head.appendChild(t))}function us(e){return'[src="'+ln(e)+'"]'}function Tr(e){return"script[async]"+e}function Xp(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+ln(i.href)+'"]');if(l)return t.instance=l,bt(l),l;var u=y({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),bt(l),Ot(l,"style",u),no(l,i.precedence,e),t.instance=l;case"stylesheet":u=cs(i.href);var f=e.querySelector(xr(u));if(f)return t.state.loading|=4,t.instance=f,bt(f),f;l=Kp(i),(u=mn.get(u))&&Ku(l,u),f=(e.ownerDocument||e).createElement("link"),bt(f);var v=f;return v._p=new Promise(function(_,O){v.onload=_,v.onerror=O}),Ot(f,"link",l),t.state.loading|=4,no(f,i.precedence,e),t.instance=f;case"script":return f=us(i.src),(u=e.querySelector(Tr(f)))?(t.instance=u,bt(u),u):(l=i,(u=mn.get(f))&&(l=y({},i),Xu(l,u)),e=e.ownerDocument||e,u=e.createElement("script"),bt(u),Ot(u,"link",l),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,no(l,i.precedence,e));return t.instance}function no(e,t,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=l.length?l[l.length-1]:null,f=u,v=0;v<l.length;v++){var _=l[v];if(_.dataset.precedence===t)f=_;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Ku(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Xu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ao=null;function Qp(e,t,i){if(ao===null){var l=new Map,u=ao=new Map;u.set(i,l)}else u=ao,l=u.get(i),l||(l=new Map,u.set(i,l));if(l.has(e))return l;for(l.set(e,null),i=i.getElementsByTagName(e),u=0;u<i.length;u++){var f=i[u];if(!(f[Ps]||f[Dt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(t)||"";v=e+v;var _=l.get(v);_?_.push(f):l.set(v,[f])}}return l}function Zp(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function Tb(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Jp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Er=null;function Eb(){}function jb(e,t,i){if(Er===null)throw Error(s(475));var l=Er;if(t.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var u=cs(i.href),f=e.querySelector(xr(u));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=io.bind(l),e.then(l,l)),t.state.loading|=4,t.instance=f,bt(f);return}f=e.ownerDocument||e,i=Kp(i),(u=mn.get(u))&&Ku(i,u),f=f.createElement("link"),bt(f);var v=f;v._p=new Promise(function(_,O){v.onload=_,v.onerror=O}),Ot(f,"link",i),t.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(l.count++,t=io.bind(l),e.addEventListener("load",t),e.addEventListener("error",t))}}function Cb(){if(Er===null)throw Error(s(475));var e=Er;return e.stylesheets&&e.count===0&&Qu(e,e.stylesheets),0<e.count?function(t){var i=setTimeout(function(){if(e.stylesheets&&Qu(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(i)}}:null}function io(){if(this.count--,this.count===0){if(this.stylesheets)Qu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var so=null;function Qu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,so=new Map,t.forEach(Ab,e),so=null,io.call(e))}function Ab(e,t){if(!(t.state.loading&4)){var i=so.get(e);if(i)var l=i.get(null);else{i=new Map,so.set(e,i);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var v=u[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(i.set(v.dataset.precedence,v),l=v)}l&&i.set(null,l)}u=t.instance,v=u.getAttribute("data-precedence"),f=i.get(v)||l,f===l&&i.set(null,u),i.set(v,u),this.count++,l=io.bind(this),u.addEventListener("load",l),u.addEventListener("error",l),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var jr={$$typeof:E,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function Ob(e,t,i,l,u,f,v,_){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qt(0),this.hiddenUpdates=Qt(null),this.identifierPrefix=l,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function Wp(e,t,i,l,u,f,v,_,O,M,H,F){return e=new Ob(e,t,i,v,_,O,M,F),t=1,f===!0&&(t|=24),f=Jt(3,null,null,t),e.current=f,f.stateNode=e,t=Rc(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:l,isDehydrated:i,cache:t},Uc(f),e}function eg(e){return e?(e=qi,e):qi}function tg(e,t,i,l,u,f){u=eg(u),l.context===null?l.context=u:l.pendingContext=u,l=fa(t),l.payload={element:i},f=f===void 0?null:f,f!==null&&(l.callback=f),i=ha(e,l,t),i!==null&&(an(i,e,t),nr(i,e,t))}function ng(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Zu(e,t){ng(e,t),(e=e.alternate)&&ng(e,t)}function ag(e){if(e.tag===13){var t=Ii(e,67108864);t!==null&&an(t,e,67108864),Zu(e,67108864)}}var ro=!0;function Nb(e,t,i,l){var u=P.T;P.T=null;var f=Q.p;try{Q.p=2,Ju(e,t,i,l)}finally{Q.p=f,P.T=u}}function Rb(e,t,i,l){var u=P.T;P.T=null;var f=Q.p;try{Q.p=8,Ju(e,t,i,l)}finally{Q.p=f,P.T=u}}function Ju(e,t,i,l){if(ro){var u=Wu(l);if(u===null)zu(e,t,l,lo,i),sg(e,l);else if(Db(u,e,t,i,l))l.stopPropagation();else if(sg(e,l),t&4&&-1<kb.indexOf(e)){for(;u!==null;){var f=Ai(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=ne(f.pendingLanes);if(v!==0){var _=f;for(_.pendingLanes|=2,_.entangledLanes|=2;v;){var O=1<<31-mt(v);_.entanglements[1]|=O,v&=~O}Un(f),(Ie&6)===0&&($l=ze()+500,br(0))}}break;case 13:_=Ii(f,2),_!==null&&an(_,f,2),Fl(),Zu(f,2)}if(f=Wu(l),f===null&&zu(e,t,l,lo,i),f===u)break;u=f}u!==null&&l.stopPropagation()}else zu(e,t,l,null,i)}}function Wu(e){return e=ic(e),ed(e)}var lo=null;function ed(e){if(lo=null,e=Ci(e),e!==null){var t=c(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=d(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lo=e,null}function ig(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pt()){case Rt:return 2;case Kt:return 8;case Xt:case la:return 32;case An:return 268435456;default:return 32}default:return 32}}var td=!1,ja=null,Ca=null,Aa=null,Cr=new Map,Ar=new Map,Oa=[],kb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sg(e,t){switch(e){case"focusin":case"focusout":ja=null;break;case"dragenter":case"dragleave":Ca=null;break;case"mouseover":case"mouseout":Aa=null;break;case"pointerover":case"pointerout":Cr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(t.pointerId)}}function Or(e,t,i,l,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:l,nativeEvent:f,targetContainers:[u]},t!==null&&(t=Ai(t),t!==null&&ag(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Db(e,t,i,l,u){switch(t){case"focusin":return ja=Or(ja,e,t,i,l,u),!0;case"dragenter":return Ca=Or(Ca,e,t,i,l,u),!0;case"mouseover":return Aa=Or(Aa,e,t,i,l,u),!0;case"pointerover":var f=u.pointerId;return Cr.set(f,Or(Cr.get(f)||null,e,t,i,l,u)),!0;case"gotpointercapture":return f=u.pointerId,Ar.set(f,Or(Ar.get(f)||null,e,t,i,l,u)),!0}return!1}function rg(e){var t=Ci(e.target);if(t!==null){var i=c(t);if(i!==null){if(t=i.tag,t===13){if(t=d(i),t!==null){e.blockedOn=t,jv(e.priority,function(){if(i.tag===13){var l=nn();l=Ei(l);var u=Ii(i,l);u!==null&&an(u,i,l),Zu(i,l)}});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Wu(e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);ac=l,i.target.dispatchEvent(l),ac=null}else return t=Ai(i),t!==null&&ag(t),e.blockedOn=i,!1;t.shift()}return!0}function lg(e,t,i){oo(e)&&i.delete(t)}function Mb(){td=!1,ja!==null&&oo(ja)&&(ja=null),Ca!==null&&oo(Ca)&&(Ca=null),Aa!==null&&oo(Aa)&&(Aa=null),Cr.forEach(lg),Ar.forEach(lg)}function co(e,t){e.blockedOn===t&&(e.blockedOn=null,td||(td=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Mb)))}var uo=null;function og(e){uo!==e&&(uo=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){uo===e&&(uo=null);for(var t=0;t<e.length;t+=3){var i=e[t],l=e[t+1],u=e[t+2];if(typeof l!="function"){if(ed(l||i)===null)continue;break}var f=Ai(i);f!==null&&(e.splice(t,3),t-=3,eu(f,{pending:!0,data:u,method:i.method,action:l},l,u))}}))}function Nr(e){function t(O){return co(O,e)}ja!==null&&co(ja,e),Ca!==null&&co(Ca,e),Aa!==null&&co(Aa,e),Cr.forEach(t),Ar.forEach(t);for(var i=0;i<Oa.length;i++){var l=Oa[i];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Oa.length&&(i=Oa[0],i.blockedOn===null);)rg(i),i.blockedOn===null&&Oa.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var u=i[l],f=i[l+1],v=u[qt]||null;if(typeof f=="function")v||og(i);else if(v){var _=null;if(f&&f.hasAttribute("formAction")){if(u=f,v=f[qt]||null)_=v.formAction;else if(ed(u)!==null)continue}else _=v.action;typeof _=="function"?i[l+1]=_:(i.splice(l,3),l-=3),og(i)}}}function nd(e){this._internalRoot=e}fo.prototype.render=nd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var i=t.current,l=nn();tg(i,l,e,t,null,null)},fo.prototype.unmount=nd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tg(e.current,2,null,e,null,null),Fl(),t[ji]=null}};function fo(e){this._internalRoot=e}fo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ef();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Oa.length&&t!==0&&t<Oa[i].priority;i++);Oa.splice(i,0,e),i===0&&rg(e)}};var cg=n.version;if(cg!=="19.1.1")throw Error(s(527,cg,"19.1.1"));Q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var Ub={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ho=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ho.isDisabled&&ho.supportsFiber)try{Bn=ho.inject(Ub),vt=ho}catch{}}return kr.createRoot=function(e,t){if(!o(e))throw Error(s(299));var i=!1,l="",u=Em,f=jm,v=Cm,_=null;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(_=t.unstable_transitionCallbacks)),t=Wp(e,1,!1,null,null,i,l,u,f,v,_,null),e[ji]=t.current,Bu(e),new nd(t)},kr.hydrateRoot=function(e,t,i){if(!o(e))throw Error(s(299));var l=!1,u="",f=Em,v=jm,_=Cm,O=null,M=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(O=i.unstable_transitionCallbacks),i.formState!==void 0&&(M=i.formState)),t=Wp(e,1,!0,t,i??null,l,u,f,v,_,O,M),t.context=eg(null),i=t.current,l=nn(),l=Ei(l),u=fa(l),u.callback=null,ha(i,u,l),i=l,t.current.lanes=i,Nn(t,i),Un(t),e[ji]=t.current,Bu(e),new fo(t)},kr.version="19.1.1",kr}var bg;function Fb(){if(bg)return sd.exports;bg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),sd.exports=Vb(),sd.exports}var Yb=Fb();/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var wg="popstate";function Kb(r={}){function n(s,o){let{pathname:c,search:d,hash:p}=s.location;return Ad("",{pathname:c,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function a(s,o){return typeof o=="string"?o:$r(o)}return Qb(n,a,null,r)}function Qe(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function En(r,n){if(!r){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Xb(){return Math.random().toString(36).substring(2,10)}function _g(r,n){return{usr:r.state,key:r.key,idx:n}}function Ad(r,n,a=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof n=="string"?Os(n):n,state:a,key:n&&n.key||s||Xb()}}function $r({pathname:r="/",search:n="",hash:a=""}){return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Os(r){let n={};if(r){let a=r.indexOf("#");a>=0&&(n.hash=r.substring(a),r=r.substring(0,a));let s=r.indexOf("?");s>=0&&(n.search=r.substring(s),r=r.substring(0,s)),r&&(n.pathname=r)}return n}function Qb(r,n,a,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,d=o.history,p="POP",m=null,g=y();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function y(){return(d.state||{idx:null}).idx}function b(){p="POP";let A=y(),j=A==null?null:A-g;g=A,m&&m({action:p,location:C.location,delta:j})}function w(A,j){p="PUSH";let z=Ad(C.location,A,j);g=y()+1;let E=_g(z,g),I=C.createHref(z);try{d.pushState(E,"",I)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;o.location.assign(I)}c&&m&&m({action:p,location:C.location,delta:1})}function x(A,j){p="REPLACE";let z=Ad(C.location,A,j);g=y();let E=_g(z,g),I=C.createHref(z);d.replaceState(E,"",I),c&&m&&m({action:p,location:C.location,delta:0})}function T(A){return Zb(A)}let C={get action(){return p},get location(){return r(o,d)},listen(A){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(wg,b),m=A,()=>{o.removeEventListener(wg,b),m=null}},createHref(A){return n(o,A)},createURL:T,encodeLocation(A){let j=T(A);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:w,replace:x,go(A){return d.go(A)}};return C}function Zb(r,n=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),Qe(a,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:$r(r);return s=s.replace(/ $/,"%20"),!n&&s.startsWith("//")&&(s=a+s),new URL(s,a)}function Cy(r,n,a="/"){return Jb(r,n,a,!1)}function Jb(r,n,a,s){let o=typeof n=="string"?Os(n):n,c=sa(o.pathname||"/",a);if(c==null)return null;let d=Ay(r);Wb(d);let p=null;for(let m=0;p==null&&m<d.length;++m){let g=uw(c);p=ow(d[m],g,s)}return p}function Ay(r,n=[],a=[],s=""){let o=(c,d,p)=>{let m={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};m.relativePath.startsWith("/")&&(Qe(m.relativePath.startsWith(s),`Absolute route path "${m.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(s.length));let g=ia([s,m.relativePath]),y=a.concat(m);c.children&&c.children.length>0&&(Qe(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Ay(c.children,n,y,g)),!(c.path==null&&!c.index)&&n.push({path:g,score:rw(g,c.index),routesMeta:y})};return r.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))o(c,d);else for(let p of Oy(c.path))o(c,d,p)}),n}function Oy(r){let n=r.split("/");if(n.length===0)return[];let[a,...s]=n,o=a.endsWith("?"),c=a.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let d=Oy(s.join("/")),p=[];return p.push(...d.map(m=>m===""?c:[c,m].join("/"))),o&&p.push(...d),p.map(m=>r.startsWith("/")&&m===""?"/":m)}function Wb(r){r.sort((n,a)=>n.score!==a.score?a.score-n.score:lw(n.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}var ew=/^:[\w-]+$/,tw=3,nw=2,aw=1,iw=10,sw=-2,Sg=r=>r==="*";function rw(r,n){let a=r.split("/"),s=a.length;return a.some(Sg)&&(s+=sw),n&&(s+=nw),a.filter(o=>!Sg(o)).reduce((o,c)=>o+(ew.test(c)?tw:c===""?aw:iw),s)}function lw(r,n){return r.length===n.length&&r.slice(0,-1).every((s,o)=>s===n[o])?r[r.length-1]-n[n.length-1]:0}function ow(r,n,a=!1){let{routesMeta:s}=r,o={},c="/",d=[];for(let p=0;p<s.length;++p){let m=s[p],g=p===s.length-1,y=c==="/"?n:n.slice(c.length)||"/",b=jo({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),w=m.route;if(!b&&g&&a&&!s[s.length-1].route.index&&(b=jo({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!b)return null;Object.assign(o,b.params),d.push({params:o,pathname:ia([c,b.pathname]),pathnameBase:mw(ia([c,b.pathnameBase])),route:w}),b.pathnameBase!=="/"&&(c=ia([c,b.pathnameBase]))}return d}function jo(r,n){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[a,s]=cw(r.path,r.caseSensitive,r.end),o=n.match(a);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((g,{paramName:y,isOptional:b},w)=>{if(y==="*"){let T=p[w]||"";d=c.slice(0,c.length-T.length).replace(/(.)\/+$/,"$1")}const x=p[w];return b&&!x?g[y]=void 0:g[y]=(x||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:d,pattern:r}}function cw(r,n=!1,a=!0){En(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,m)=>(s.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,n?void 0:"i"),s]}function uw(r){try{return r.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return En(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),r}}function sa(r,n){if(n==="/")return r;if(!r.toLowerCase().startsWith(n.toLowerCase()))return null;let a=n.endsWith("/")?n.length-1:n.length,s=r.charAt(a);return s&&s!=="/"?null:r.slice(a)||"/"}function dw(r,n="/"){let{pathname:a,search:s="",hash:o=""}=typeof r=="string"?Os(r):r;return{pathname:a?a.startsWith("/")?a:fw(a,n):n,search:pw(s),hash:gw(o)}}function fw(r,n){let a=n.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?a.length>1&&a.pop():o!=="."&&a.push(o)}),a.length>1?a.join("/"):"/"}function cd(r,n,a,s){return`Cannot include a '${r}' character in a manually specified \`to.${n}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hw(r){return r.filter((n,a)=>a===0||n.route.path&&n.route.path.length>0)}function Xd(r){let n=hw(r);return n.map((a,s)=>s===n.length-1?a.pathname:a.pathnameBase)}function Qd(r,n,a,s=!1){let o;typeof r=="string"?o=Os(r):(o={...r},Qe(!o.pathname||!o.pathname.includes("?"),cd("?","pathname","search",o)),Qe(!o.pathname||!o.pathname.includes("#"),cd("#","pathname","hash",o)),Qe(!o.search||!o.search.includes("#"),cd("#","search","hash",o)));let c=r===""||o.pathname==="",d=c?"/":o.pathname,p;if(d==null)p=a;else{let b=n.length-1;if(!s&&d.startsWith("..")){let w=d.split("/");for(;w[0]==="..";)w.shift(),b-=1;o.pathname=w.join("/")}p=b>=0?n[b]:"/"}let m=dw(o,p),g=d&&d!=="/"&&d.endsWith("/"),y=(c||d===".")&&a.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}var ia=r=>r.join("/").replace(/\/\/+/g,"/"),mw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),pw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,gw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function yw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Ny=["POST","PUT","PATCH","DELETE"];new Set(Ny);var vw=["GET",...Ny];new Set(vw);var Ns=S.createContext(null);Ns.displayName="DataRouter";var Uo=S.createContext(null);Uo.displayName="DataRouterState";S.createContext(!1);var Ry=S.createContext({isTransitioning:!1});Ry.displayName="ViewTransition";var bw=S.createContext(new Map);bw.displayName="Fetchers";var ww=S.createContext(null);ww.displayName="Await";var jn=S.createContext(null);jn.displayName="Navigation";var Qr=S.createContext(null);Qr.displayName="Location";var gn=S.createContext({outlet:null,matches:[],isDataRoute:!1});gn.displayName="Route";var Zd=S.createContext(null);Zd.displayName="RouteError";function _w(r,{relative:n}={}){Qe(Rs(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:s}=S.useContext(jn),{hash:o,pathname:c,search:d}=Zr(r,{relative:n}),p=c;return a!=="/"&&(p=c==="/"?a:ia([a,c])),s.createHref({pathname:p,search:d,hash:o})}function Rs(){return S.useContext(Qr)!=null}function ra(){return Qe(Rs(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Qr).location}var ky="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Dy(r){S.useContext(jn).static||S.useLayoutEffect(r)}function Lo(){let{isDataRoute:r}=S.useContext(gn);return r?Lw():Sw()}function Sw(){Qe(Rs(),"useNavigate() may be used only in the context of a <Router> component.");let r=S.useContext(Ns),{basename:n,navigator:a}=S.useContext(jn),{matches:s}=S.useContext(gn),{pathname:o}=ra(),c=JSON.stringify(Xd(s)),d=S.useRef(!1);return Dy(()=>{d.current=!0}),S.useCallback((m,g={})=>{if(En(d.current,ky),!d.current)return;if(typeof m=="number"){a.go(m);return}let y=Qd(m,JSON.parse(c),o,g.relative==="path");r==null&&n!=="/"&&(y.pathname=y.pathname==="/"?n:ia([n,y.pathname])),(g.replace?a.replace:a.push)(y,g.state,g)},[n,a,c,o,r])}var xw=S.createContext(null);function Tw(r){let n=S.useContext(gn).outlet;return n&&S.createElement(xw.Provider,{value:r},n)}function My(){let{matches:r}=S.useContext(gn),n=r[r.length-1];return n?n.params:{}}function Zr(r,{relative:n}={}){let{matches:a}=S.useContext(gn),{pathname:s}=ra(),o=JSON.stringify(Xd(a));return S.useMemo(()=>Qd(r,JSON.parse(o),s,n==="path"),[r,o,s,n])}function Ew(r,n){return Uy(r,n)}function Uy(r,n,a,s){Qe(Rs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=S.useContext(jn),{matches:c}=S.useContext(gn),d=c[c.length-1],p=d?d.params:{},m=d?d.pathname:"/",g=d?d.pathnameBase:"/",y=d&&d.route;{let j=y&&y.path||"";Ly(m,!y||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let b=ra(),w;if(n){let j=typeof n=="string"?Os(n):n;Qe(g==="/"||j.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${j.pathname}" was given in the \`location\` prop.`),w=j}else w=b;let x=w.pathname||"/",T=x;if(g!=="/"){let j=g.replace(/^\//,"").split("/");T="/"+x.replace(/^\//,"").split("/").slice(j.length).join("/")}let C=Cy(r,{pathname:T});En(y||C!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),En(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=Nw(C&&C.map(j=>Object.assign({},j,{params:Object.assign({},p,j.params),pathname:ia([g,o.encodeLocation?o.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?g:ia([g,o.encodeLocation?o.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),c,a,s);return n&&A?S.createElement(Qr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},A):A}function jw(){let r=Uw(),n=yw(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),a=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=S.createElement(S.Fragment,null,S.createElement("p",null,"💿 Hey developer 👋"),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:c},"ErrorBoundary")," or"," ",S.createElement("code",{style:c},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},n),a?S.createElement("pre",{style:o},a):null,d)}var Cw=S.createElement(jw,null),Aw=class extends S.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?S.createElement(gn.Provider,{value:this.props.routeContext},S.createElement(Zd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ow({routeContext:r,match:n,children:a}){let s=S.useContext(Ns);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(gn.Provider,{value:r},a)}function Nw(r,n=[],a=null,s=null){if(r==null){if(!a)return null;if(a.errors)r=a.matches;else if(n.length===0&&!a.initialized&&a.matches.length>0)r=a.matches;else return null}let o=r,c=a?.errors;if(c!=null){let m=o.findIndex(g=>g.route.id&&c?.[g.route.id]!==void 0);Qe(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let d=!1,p=-1;if(a)for(let m=0;m<o.length;m++){let g=o[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(p=m),g.route.id){let{loaderData:y,errors:b}=a,w=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||w){d=!0,p>=0?o=o.slice(0,p+1):o=[o[0]];break}}}return o.reduceRight((m,g,y)=>{let b,w=!1,x=null,T=null;a&&(b=c&&g.route.id?c[g.route.id]:void 0,x=g.route.errorElement||Cw,d&&(p<0&&y===0?(Ly("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,T=null):p===y&&(w=!0,T=g.route.hydrateFallbackElement||null)));let C=n.concat(o.slice(0,y+1)),A=()=>{let j;return b?j=x:w?j=T:g.route.Component?j=S.createElement(g.route.Component,null):g.route.element?j=g.route.element:j=m,S.createElement(Ow,{match:g,routeContext:{outlet:m,matches:C,isDataRoute:a!=null},children:j})};return a&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?S.createElement(Aw,{location:a.location,revalidation:a.revalidation,component:x,error:b,children:A(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):A()},null)}function Jd(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rw(r){let n=S.useContext(Ns);return Qe(n,Jd(r)),n}function kw(r){let n=S.useContext(Uo);return Qe(n,Jd(r)),n}function Dw(r){let n=S.useContext(gn);return Qe(n,Jd(r)),n}function Wd(r){let n=Dw(r),a=n.matches[n.matches.length-1];return Qe(a.route.id,`${r} can only be used on routes that contain a unique "id"`),a.route.id}function Mw(){return Wd("useRouteId")}function Uw(){let r=S.useContext(Zd),n=kw("useRouteError"),a=Wd("useRouteError");return r!==void 0?r:n.errors?.[a]}function Lw(){let{router:r}=Rw("useNavigate"),n=Wd("useNavigate"),a=S.useRef(!1);return Dy(()=>{a.current=!0}),S.useCallback(async(o,c={})=>{En(a.current,ky),a.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:n,...c}))},[r,n])}var xg={};function Ly(r,n,a){!n&&!xg[r]&&(xg[r]=!0,En(!1,a))}S.memo(Pw);function Pw({routes:r,future:n,state:a}){return Uy(r,void 0,a,n)}function Bw({to:r,replace:n,state:a,relative:s}){Qe(Rs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=S.useContext(jn);En(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=S.useContext(gn),{pathname:d}=ra(),p=Lo(),m=Qd(r,Xd(c),d,s==="path"),g=JSON.stringify(m);return S.useEffect(()=>{p(JSON.parse(g),{replace:n,state:a,relative:s})},[p,g,s,n,a]),null}function zw(r){return Tw(r.context)}function fi(r){Qe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Iw({basename:r="/",children:n=null,location:a,navigationType:s="POP",navigator:o,static:c=!1}){Qe(!Rs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=r.replace(/^\/*/,"/"),p=S.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof a=="string"&&(a=Os(a));let{pathname:m="/",search:g="",hash:y="",state:b=null,key:w="default"}=a,x=S.useMemo(()=>{let T=sa(m,d);return T==null?null:{location:{pathname:T,search:g,hash:y,state:b,key:w},navigationType:s}},[d,m,g,y,b,w,s]);return En(x!=null,`<Router basename="${d}"> is not able to match the URL "${m}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:S.createElement(jn.Provider,{value:p},S.createElement(Qr.Provider,{children:n,value:x}))}function qw({children:r,location:n}){return Ew(Od(r),n)}function Od(r,n=[]){let a=[];return S.Children.forEach(r,(s,o)=>{if(!S.isValidElement(s))return;let c=[...n,o];if(s.type===S.Fragment){a.push.apply(a,Od(s.props.children,c));return}Qe(s.type===fi,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qe(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Od(s.props.children,c)),a.push(d)}),a}var xo="get",To="application/x-www-form-urlencoded";function Po(r){return r!=null&&typeof r.tagName=="string"}function Hw(r){return Po(r)&&r.tagName.toLowerCase()==="button"}function Gw(r){return Po(r)&&r.tagName.toLowerCase()==="form"}function $w(r){return Po(r)&&r.tagName.toLowerCase()==="input"}function Vw(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Fw(r,n){return r.button===0&&(!n||n==="_self")&&!Vw(r)}var mo=null;function Yw(){if(mo===null)try{new FormData(document.createElement("form"),0),mo=!1}catch{mo=!0}return mo}var Kw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ud(r){return r!=null&&!Kw.has(r)?(En(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${To}"`),null):r}function Xw(r,n){let a,s,o,c,d;if(Gw(r)){let p=r.getAttribute("action");s=p?sa(p,n):null,a=r.getAttribute("method")||xo,o=ud(r.getAttribute("enctype"))||To,c=new FormData(r)}else if(Hw(r)||$w(r)&&(r.type==="submit"||r.type==="image")){let p=r.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||p.getAttribute("action");if(s=m?sa(m,n):null,a=r.getAttribute("formmethod")||p.getAttribute("method")||xo,o=ud(r.getAttribute("formenctype"))||ud(p.getAttribute("enctype"))||To,c=new FormData(p,r),!Yw()){let{name:g,type:y,value:b}=r;if(y==="image"){let w=g?`${g}.`:"";c.append(`${w}x`,"0"),c.append(`${w}y`,"0")}else g&&c.append(g,b)}}else{if(Po(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=xo,s=null,o=To,d=r}return c&&o==="text/plain"&&(d=c,c=void 0),{action:s,method:a.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ef(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function Qw(r,n,a){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${a}`:n&&sa(s.pathname,n)==="/"?s.pathname=`${n.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function Zw(r,n){if(r.id in n)return n[r.id];try{let a=await import(r.module);return n[r.id]=a,a}catch(a){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Jw(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Ww(r,n,a){let s=await Promise.all(r.map(async o=>{let c=n.routes[o.route.id];if(c){let d=await Zw(c,a);return d.links?d.links():[]}return[]}));return a1(s.flat(1).filter(Jw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Tg(r,n,a,s,o,c){let d=(m,g)=>a[g]?m.route.id!==a[g].route.id:!0,p=(m,g)=>a[g].pathname!==m.pathname||a[g].route.path?.endsWith("*")&&a[g].params["*"]!==m.params["*"];return c==="assets"?n.filter((m,g)=>d(m,g)||p(m,g)):c==="data"?n.filter((m,g)=>{let y=s.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(d(m,g)||p(m,g))return!0;if(m.route.shouldRevalidate){let b=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function e1(r,n,{includeHydrateFallback:a}={}){return t1(r.map(s=>{let o=n.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),a&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function t1(r){return[...new Set(r)]}function n1(r){let n={},a=Object.keys(r).sort();for(let s of a)n[s]=r[s];return n}function a1(r,n){let a=new Set;return new Set(n),r.reduce((s,o)=>{let c=JSON.stringify(n1(o));return a.has(c)||(a.add(c),s.push({key:c,link:o})),s},[])}function Py(){let r=S.useContext(Ns);return ef(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function i1(){let r=S.useContext(Uo);return ef(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var tf=S.createContext(void 0);tf.displayName="FrameworkContext";function By(){let r=S.useContext(tf);return ef(r,"You must render this element inside a <HydratedRouter> element"),r}function s1(r,n){let a=S.useContext(tf),[s,o]=S.useState(!1),[c,d]=S.useState(!1),{onFocus:p,onBlur:m,onMouseEnter:g,onMouseLeave:y,onTouchStart:b}=n,w=S.useRef(null);S.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let C=j=>{j.forEach(z=>{d(z.isIntersecting)})},A=new IntersectionObserver(C,{threshold:.5});return w.current&&A.observe(w.current),()=>{A.disconnect()}}},[r]),S.useEffect(()=>{if(s){let C=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(C)}}},[s]);let x=()=>{o(!0)},T=()=>{o(!1),d(!1)};return a?r!=="intent"?[c,w,{}]:[c,w,{onFocus:Dr(p,x),onBlur:Dr(m,T),onMouseEnter:Dr(g,x),onMouseLeave:Dr(y,T),onTouchStart:Dr(b,x)}]:[!1,w,{}]}function Dr(r,n){return a=>{r&&r(a),a.defaultPrevented||n(a)}}function r1({page:r,...n}){let{router:a}=Py(),s=S.useMemo(()=>Cy(a.routes,r,a.basename),[a.routes,r,a.basename]);return s?S.createElement(o1,{page:r,matches:s,...n}):null}function l1(r){let{manifest:n,routeModules:a}=By(),[s,o]=S.useState([]);return S.useEffect(()=>{let c=!1;return Ww(r,n,a).then(d=>{c||o(d)}),()=>{c=!0}},[r,n,a]),s}function o1({page:r,matches:n,...a}){let s=ra(),{manifest:o,routeModules:c}=By(),{basename:d}=Py(),{loaderData:p,matches:m}=i1(),g=S.useMemo(()=>Tg(r,n,m,o,s,"data"),[r,n,m,o,s]),y=S.useMemo(()=>Tg(r,n,m,o,s,"assets"),[r,n,m,o,s]),b=S.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let T=new Set,C=!1;if(n.forEach(j=>{let z=o.routes[j.route.id];!z||!z.hasLoader||(!g.some(E=>E.route.id===j.route.id)&&j.route.id in p&&c[j.route.id]?.shouldRevalidate||z.hasClientLoader?C=!0:T.add(j.route.id))}),T.size===0)return[];let A=Qw(r,d,"data");return C&&T.size>0&&A.searchParams.set("_routes",n.filter(j=>T.has(j.route.id)).map(j=>j.route.id).join(",")),[A.pathname+A.search]},[d,p,s,o,g,n,r,c]),w=S.useMemo(()=>e1(y,o),[y,o]),x=l1(y);return S.createElement(S.Fragment,null,b.map(T=>S.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...a})),w.map(T=>S.createElement("link",{key:T,rel:"modulepreload",href:T,...a})),x.map(({key:T,link:C})=>S.createElement("link",{key:T,nonce:a.nonce,...C})))}function c1(...r){return n=>{r.forEach(a=>{typeof a=="function"?a(n):a!=null&&(a.current=n)})}}var zy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zy&&(window.__reactRouterVersion="7.8.0")}catch{}function u1({basename:r,children:n,window:a}){let s=S.useRef();s.current==null&&(s.current=Kb({window:a,v5Compat:!0}));let o=s.current,[c,d]=S.useState({action:o.action,location:o.location}),p=S.useCallback(m=>{S.startTransition(()=>d(m))},[d]);return S.useLayoutEffect(()=>o.listen(p),[o,p]),S.createElement(Iw,{basename:r,children:n,location:c.location,navigationType:c.action,navigator:o})}var Iy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ua=S.forwardRef(function({onClick:n,discover:a="render",prefetch:s="none",relative:o,reloadDocument:c,replace:d,state:p,target:m,to:g,preventScrollReset:y,viewTransition:b,...w},x){let{basename:T}=S.useContext(jn),C=typeof g=="string"&&Iy.test(g),A,j=!1;if(typeof g=="string"&&C&&(A=g,zy))try{let ie=new URL(window.location.href),oe=g.startsWith("//")?new URL(ie.protocol+g):new URL(g),de=sa(oe.pathname,T);oe.origin===ie.origin&&de!=null?g=de+oe.search+oe.hash:j=!0}catch{En(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=_w(g,{relative:o}),[E,I,V]=s1(s,w),Y=h1(g,{replace:d,state:p,target:m,preventScrollReset:y,relative:o,viewTransition:b});function B(ie){n&&n(ie),ie.defaultPrevented||Y(ie)}let J=S.createElement("a",{...w,...V,href:A||z,onClick:j||c?n:B,ref:c1(x,I),target:m,"data-discover":!C&&a==="render"?"true":void 0});return E&&!C?S.createElement(S.Fragment,null,J,S.createElement(r1,{page:z})):J});Ua.displayName="Link";var Nd=S.forwardRef(function({"aria-current":n="page",caseSensitive:a=!1,className:s="",end:o=!1,style:c,to:d,viewTransition:p,children:m,...g},y){let b=Zr(d,{relative:g.relative}),w=ra(),x=S.useContext(Uo),{navigator:T,basename:C}=S.useContext(jn),A=x!=null&&v1(b)&&p===!0,j=T.encodeLocation?T.encodeLocation(b).pathname:b.pathname,z=w.pathname,E=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(z=z.toLowerCase(),E=E?E.toLowerCase():null,j=j.toLowerCase()),E&&C&&(E=sa(E,C)||E);const I=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let V=z===j||!o&&z.startsWith(j)&&z.charAt(I)==="/",Y=E!=null&&(E===j||!o&&E.startsWith(j)&&E.charAt(j.length)==="/"),B={isActive:V,isPending:Y,isTransitioning:A},J=V?n:void 0,ie;typeof s=="function"?ie=s(B):ie=[s,V?"active":null,Y?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let oe=typeof c=="function"?c(B):c;return S.createElement(Ua,{...g,"aria-current":J,className:ie,ref:y,style:oe,to:d,viewTransition:p},typeof m=="function"?m(B):m)});Nd.displayName="NavLink";var d1=S.forwardRef(({discover:r="render",fetcherKey:n,navigate:a,reloadDocument:s,replace:o,state:c,method:d=xo,action:p,onSubmit:m,relative:g,preventScrollReset:y,viewTransition:b,...w},x)=>{let T=g1(),C=y1(p,{relative:g}),A=d.toLowerCase()==="get"?"get":"post",j=typeof p=="string"&&Iy.test(p),z=E=>{if(m&&m(E),E.defaultPrevented)return;E.preventDefault();let I=E.nativeEvent.submitter,V=I?.getAttribute("formmethod")||d;T(I||E.currentTarget,{fetcherKey:n,method:V,navigate:a,replace:o,state:c,relative:g,preventScrollReset:y,viewTransition:b})};return S.createElement("form",{ref:x,method:A,action:C,onSubmit:s?m:z,...w,"data-discover":!j&&r==="render"?"true":void 0})});d1.displayName="Form";function f1(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qy(r){let n=S.useContext(Ns);return Qe(n,f1(r)),n}function h1(r,{target:n,replace:a,state:s,preventScrollReset:o,relative:c,viewTransition:d}={}){let p=Lo(),m=ra(),g=Zr(r,{relative:c});return S.useCallback(y=>{if(Fw(y,n)){y.preventDefault();let b=a!==void 0?a:$r(m)===$r(g);p(r,{replace:b,state:s,preventScrollReset:o,relative:c,viewTransition:d})}},[m,p,g,a,s,n,r,o,c,d])}var m1=0,p1=()=>`__${String(++m1)}__`;function g1(){let{router:r}=qy("useSubmit"),{basename:n}=S.useContext(jn),a=Mw();return S.useCallback(async(s,o={})=>{let{action:c,method:d,encType:p,formData:m,body:g}=Xw(s,n);if(o.navigate===!1){let y=o.fetcherKey||p1();await r.fetch(y,a,o.action||c,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||d,formEncType:o.encType||p,flushSync:o.flushSync})}else await r.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||d,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,n,a])}function y1(r,{relative:n}={}){let{basename:a}=S.useContext(jn),s=S.useContext(gn);Qe(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...Zr(r||".",{relative:n})},d=ra();if(r==null){c.search=d.search;let p=new URLSearchParams(c.search),m=p.getAll("index");if(m.some(y=>y==="")){p.delete("index"),m.filter(b=>b).forEach(b=>p.append("index",b));let y=p.toString();c.search=y?`?${y}`:""}}return(!r||r===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(c.pathname=c.pathname==="/"?a:ia([a,c.pathname])),$r(c)}function v1(r,{relative:n}={}){let a=S.useContext(Ry);Qe(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=qy("useViewTransitionState"),o=Zr(r,{relative:n});if(!a.isTransitioning)return!1;let c=sa(a.currentLocation.pathname,s)||a.currentLocation.pathname,d=sa(a.nextLocation.pathname,s)||a.nextLocation.pathname;return jo(o.pathname,d)!=null||jo(o.pathname,c)!=null}var Bo=jy();const b1=[{slug:"front-yard",label:"Front yard",image:"/images/front.svg"},{slug:"back-yard",label:"Back yard",image:"/images/back.svg"}],w1="modulepreload",_1=function(r){return"/"+r},Eg={},Jr=function(n,a,s){let o=Promise.resolve();if(a&&a.length>0){let g=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};var d=g;document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),m=p?.nonce||p?.getAttribute("nonce");o=g(a.map(y=>{if(y=_1(y),y in Eg)return;Eg[y]=!0;const b=y.endsWith(".css"),w=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${w}`))return;const x=document.createElement("link");if(x.rel=b?"stylesheet":w1,b||(x.as="script"),x.crossOrigin="",x.href=y,m&&x.setAttribute("nonce",m),document.head.appendChild(x),b)return new Promise((T,C)=>{x.addEventListener("load",T),x.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${y}`)))})}))}function c(p){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=p,window.dispatchEvent(m),!m.defaultPrevented)throw p}return o.then(p=>{for(const m of p||[])m.status==="rejected"&&c(m.reason);return n().catch(c)})},S1=r=>{let n;return r?n=r:typeof fetch>"u"?n=(...a)=>Jr(async()=>{const{default:s}=await Promise.resolve().then(()=>ks);return{default:s}},[]).then(({default:s})=>s(...a)):n=fetch,(...a)=>n(...a)};class nf extends Error{constructor(n,a="FunctionsError",s){super(n),this.name=a,this.context=s}}class x1 extends nf{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class jg extends nf{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Cg extends nf{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Rd;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Rd||(Rd={}));var T1=function(r,n,a,s){function o(c){return c instanceof a?c:new a(function(d){d(c)})}return new(a||(a=Promise))(function(c,d){function p(y){try{g(s.next(y))}catch(b){d(b)}}function m(y){try{g(s.throw(y))}catch(b){d(b)}}function g(y){y.done?c(y.value):o(y.value).then(p,m)}g((s=s.apply(r,n||[])).next())})};class E1{constructor(n,{headers:a={},customFetch:s,region:o=Rd.Any}={}){this.url=n,this.headers=a,this.region=o,this.fetch=S1(s)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,a={}){var s;return T1(this,void 0,void 0,function*(){try{const{headers:o,method:c,body:d}=a;let p={},{region:m}=a;m||(m=this.region);const g=new URL(`${this.url}/${n}`);m&&m!=="any"&&(p["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let y;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",y=d):typeof d=="string"?(p["Content-Type"]="text/plain",y=d):typeof FormData<"u"&&d instanceof FormData?y=d:(p["Content-Type"]="application/json",y=JSON.stringify(d)));const b=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),o),body:y}).catch(C=>{throw new x1(C)}),w=b.headers.get("x-relay-error");if(w&&w==="true")throw new jg(b);if(!b.ok)throw new Cg(b);let x=((s=b.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),T;return x==="application/json"?T=yield b.json():x==="application/octet-stream"?T=yield b.blob():x==="text/event-stream"?T=b:x==="multipart/form-data"?T=yield b.formData():T=yield b.text(),{data:T,error:null,response:b}}catch(o){return{data:null,error:o,response:o instanceof Cg||o instanceof jg?o.context:void 0}}})}}var xt={},ds={},fs={},hs={},ms={},ps={},j1=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},As=j1();const C1=As.fetch,Hy=As.fetch.bind(As),Gy=As.Headers,A1=As.Request,O1=As.Response,ks=Object.freeze(Object.defineProperty({__proto__:null,Headers:Gy,Request:A1,Response:O1,default:Hy,fetch:C1},Symbol.toStringTag,{value:"Module"})),N1=Bb(ks);var po={},Ag;function $y(){if(Ag)return po;Ag=1,Object.defineProperty(po,"__esModule",{value:!0});class r extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}return po.default=r,po}var Og;function Vy(){if(Og)return ps;Og=1;var r=ps&&ps.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ps,"__esModule",{value:!0});const n=r(N1),a=r($y());class s{constructor(c){this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=c.headers,this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=c.shouldThrowOnError,this.signal=c.signal,this.isMaybeSingle=c.isMaybeSingle,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,d){return this.headers=Object.assign({},this.headers),this.headers[c]=d,this}then(c,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const p=this.fetch;let m=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var y,b,w;let x=null,T=null,C=null,A=g.status,j=g.statusText;if(g.ok){if(this.method!=="HEAD"){const V=await g.text();V===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?T=V:T=JSON.parse(V))}const E=(y=this.headers.Prefer)===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),I=(b=g.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");E&&I&&I.length>1&&(C=parseInt(I[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(x={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,C=null,A=406,j="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const E=await g.text();try{x=JSON.parse(E),Array.isArray(x)&&g.status===404&&(T=[],x=null,A=200,j="OK")}catch{g.status===404&&E===""?(A=204,j="No Content"):x={message:E}}if(x&&this.isMaybeSingle&&(!((w=x?.details)===null||w===void 0)&&w.includes("0 rows"))&&(x=null,A=200,j="OK"),x&&this.shouldThrowOnError)throw new a.default(x)}return{error:x,data:T,count:C,status:A,statusText:j}});return this.shouldThrowOnError||(m=m.catch(g=>{var y,b,w;return{error:{message:`${(y=g?.name)!==null&&y!==void 0?y:"FetchError"}: ${g?.message}`,details:`${(b=g?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(w=g?.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),m.then(c,d)}returns(){return this}overrideTypes(){return this}}return ps.default=s,ps}var Ng;function Fy(){if(Ng)return ms;Ng=1;var r=ms&&ms.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ms,"__esModule",{value:!0});const n=r(Vy());class a extends n.default{select(o){let c=!1;const d=(o??"*").split("").map(p=>/\s/.test(p)&&!c?"":(p==='"'&&(c=!c),p)).join("");return this.url.searchParams.set("select",d),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:c=!0,nullsFirst:d,foreignTable:p,referencedTable:m=p}={}){const g=m?`${m}.order`:"order",y=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${y?`${y},`:""}${o}.${c?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:c,referencedTable:d=c}={}){const p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(p,`${o}`),this}range(o,c,{foreignTable:d,referencedTable:p=d}={}){const m=typeof p>"u"?"offset":`${p}.offset`,g=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(m,`${o}`),this.url.searchParams.set(g,`${c-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:c=!1,settings:d=!1,buffers:p=!1,wal:m=!1,format:g="text"}={}){var y;const b=[o?"analyze":null,c?"verbose":null,d?"settings":null,p?"buffers":null,m?"wal":null].filter(Boolean).join("|"),w=(y=this.headers.Accept)!==null&&y!==void 0?y:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${g}; for="${w}"; options=${b};`,g==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return ms.default=a,ms}var Rg;function af(){if(Rg)return hs;Rg=1;var r=hs&&hs.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(hs,"__esModule",{value:!0});const n=r(Fy());class a extends n.default{eq(o,c){return this.url.searchParams.append(o,`eq.${c}`),this}neq(o,c){return this.url.searchParams.append(o,`neq.${c}`),this}gt(o,c){return this.url.searchParams.append(o,`gt.${c}`),this}gte(o,c){return this.url.searchParams.append(o,`gte.${c}`),this}lt(o,c){return this.url.searchParams.append(o,`lt.${c}`),this}lte(o,c){return this.url.searchParams.append(o,`lte.${c}`),this}like(o,c){return this.url.searchParams.append(o,`like.${c}`),this}likeAllOf(o,c){return this.url.searchParams.append(o,`like(all).{${c.join(",")}}`),this}likeAnyOf(o,c){return this.url.searchParams.append(o,`like(any).{${c.join(",")}}`),this}ilike(o,c){return this.url.searchParams.append(o,`ilike.${c}`),this}ilikeAllOf(o,c){return this.url.searchParams.append(o,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(o,c){return this.url.searchParams.append(o,`ilike(any).{${c.join(",")}}`),this}is(o,c){return this.url.searchParams.append(o,`is.${c}`),this}in(o,c){const d=Array.from(new Set(c)).map(p=>typeof p=="string"&&new RegExp("[,()]").test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cs.{${c.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(c)}`),this}containedBy(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cd.{${c.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(c)}`),this}rangeGt(o,c){return this.url.searchParams.append(o,`sr.${c}`),this}rangeGte(o,c){return this.url.searchParams.append(o,`nxl.${c}`),this}rangeLt(o,c){return this.url.searchParams.append(o,`sl.${c}`),this}rangeLte(o,c){return this.url.searchParams.append(o,`nxr.${c}`),this}rangeAdjacent(o,c){return this.url.searchParams.append(o,`adj.${c}`),this}overlaps(o,c){return typeof c=="string"?this.url.searchParams.append(o,`ov.${c}`):this.url.searchParams.append(o,`ov.{${c.join(",")}}`),this}textSearch(o,c,{config:d,type:p}={}){let m="";p==="plain"?m="pl":p==="phrase"?m="ph":p==="websearch"&&(m="w");const g=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${m}fts${g}.${c}`),this}match(o){return Object.entries(o).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(o,c,d){return this.url.searchParams.append(o,`not.${c}.${d}`),this}or(o,{foreignTable:c,referencedTable:d=c}={}){const p=d?`${d}.or`:"or";return this.url.searchParams.append(p,`(${o})`),this}filter(o,c,d){return this.url.searchParams.append(o,`${c}.${d}`),this}}return hs.default=a,hs}var kg;function Yy(){if(kg)return fs;kg=1;var r=fs&&fs.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(fs,"__esModule",{value:!0});const n=r(af());class a{constructor(o,{headers:c={},schema:d,fetch:p}){this.url=o,this.headers=c,this.schema=d,this.fetch=p}select(o,{head:c=!1,count:d}={}){const p=c?"HEAD":"GET";let m=!1;const g=(o??"*").split("").map(y=>/\s/.test(y)&&!m?"":(y==='"'&&(m=!m),y)).join("");return this.url.searchParams.set("select",g),d&&(this.headers.Prefer=`count=${d}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:c,defaultToNull:d=!0}={}){const p="POST",m=[];if(this.headers.Prefer&&m.push(this.headers.Prefer),c&&m.push(`count=${c}`),d||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(o)){const g=o.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(g.length>0){const y=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:c,ignoreDuplicates:d=!1,count:p,defaultToNull:m=!0}={}){const g="POST",y=[`resolution=${d?"ignore":"merge"}-duplicates`];if(c!==void 0&&this.url.searchParams.set("on_conflict",c),this.headers.Prefer&&y.push(this.headers.Prefer),p&&y.push(`count=${p}`),m||y.push("missing=default"),this.headers.Prefer=y.join(","),Array.isArray(o)){const b=o.reduce((w,x)=>w.concat(Object.keys(x)),[]);if(b.length>0){const w=[...new Set(b)].map(x=>`"${x}"`);this.url.searchParams.set("columns",w.join(","))}}return new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:c}={}){const d="PATCH",p=[];return this.headers.Prefer&&p.push(this.headers.Prefer),c&&p.push(`count=${c}`),this.headers.Prefer=p.join(","),new n.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const c="DELETE",d=[];return o&&d.push(`count=${o}`),this.headers.Prefer&&d.unshift(this.headers.Prefer),this.headers.Prefer=d.join(","),new n.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return fs.default=a,fs}var Mr={},Ur={},Dg;function R1(){return Dg||(Dg=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.version=void 0,Ur.version="0.0.0-automated"),Ur}var Mg;function k1(){if(Mg)return Mr;Mg=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.DEFAULT_HEADERS=void 0;const r=R1();return Mr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`},Mr}var Ug;function D1(){if(Ug)return ds;Ug=1;var r=ds&&ds.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ds,"__esModule",{value:!0});const n=r(Yy()),a=r(af()),s=k1();class o{constructor(d,{headers:p={},schema:m,fetch:g}={}){this.url=d,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),p),this.schemaName=m,this.fetch=g}from(d){const p=new URL(`${this.url}/${d}`);return new n.default(p,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new o(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,p={},{head:m=!1,get:g=!1,count:y}={}){let b;const w=new URL(`${this.url}/rpc/${d}`);let x;m||g?(b=m?"HEAD":"GET",Object.entries(p).filter(([C,A])=>A!==void 0).map(([C,A])=>[C,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([C,A])=>{w.searchParams.append(C,A)})):(b="POST",x=p);const T=Object.assign({},this.headers);return y&&(T.Prefer=`count=${y}`),new a.default({method:b,url:w,headers:T,schema:this.schemaName,body:x,fetch:this.fetch,allowEmpty:!1})}}return ds.default=o,ds}var Lg;function M1(){if(Lg)return xt;Lg=1;var r=xt&&xt.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(xt,"__esModule",{value:!0}),xt.PostgrestError=xt.PostgrestBuilder=xt.PostgrestTransformBuilder=xt.PostgrestFilterBuilder=xt.PostgrestQueryBuilder=xt.PostgrestClient=void 0;const n=r(D1());xt.PostgrestClient=n.default;const a=r(Yy());xt.PostgrestQueryBuilder=a.default;const s=r(af());xt.PostgrestFilterBuilder=s.default;const o=r(Fy());xt.PostgrestTransformBuilder=o.default;const c=r(Vy());xt.PostgrestBuilder=c.default;const d=r($y());return xt.PostgrestError=d.default,xt.default={PostgrestClient:n.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:c.default,PostgrestError:d.default},xt}var U1=M1();const L1=Pb(U1),{PostgrestClient:P1,PostgrestQueryBuilder:A2,PostgrestFilterBuilder:O2,PostgrestTransformBuilder:N2,PostgrestBuilder:R2,PostgrestError:k2}=L1;function B1(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const z1=B1(),I1="2.11.15",q1=`realtime-js/${I1}`,H1="1.0.0",Ky=1e4,G1=1e3;var Ir;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Ir||(Ir={}));var Lt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Lt||(Lt={}));var Sn;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Sn||(Sn={}));var kd;(function(r){r.websocket="websocket"})(kd||(kd={}));var mi;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(mi||(mi={}));class $1{constructor(){this.HEADER_LENGTH=1}decode(n,a){return n.constructor===ArrayBuffer?a(this._binaryDecode(n)):a(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const a=new DataView(n),s=new TextDecoder;return this._decodeBroadcast(n,a,s)}_decodeBroadcast(n,a,s){const o=a.getUint8(1),c=a.getUint8(2);let d=this.HEADER_LENGTH+2;const p=s.decode(n.slice(d,d+o));d=d+o;const m=s.decode(n.slice(d,d+c));d=d+c;const g=JSON.parse(s.decode(n.slice(d,n.byteLength)));return{ref:null,topic:p,event:m,payload:g}}}class Xy{constructor(n,a){this.callback=n,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ye;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Ye||(Ye={}));const Pg=(r,n,a={})=>{var s;const o=(s=a.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(n).reduce((c,d)=>(c[d]=V1(d,r,n,o),c),{})},V1=(r,n,a,s)=>{const o=n.find(p=>p.name===r),c=o?.type,d=a[r];return c&&!s.includes(c)?Qy(c,d):Dd(d)},Qy=(r,n)=>{if(r.charAt(0)==="_"){const a=r.slice(1,r.length);return X1(n,a)}switch(r){case Ye.bool:return F1(n);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return Y1(n);case Ye.json:case Ye.jsonb:return K1(n);case Ye.timestamp:return Q1(n);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return Dd(n);default:return Dd(n)}},Dd=r=>r,F1=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Y1=r=>{if(typeof r=="string"){const n=parseFloat(r);if(!Number.isNaN(n))return n}return r},K1=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(n){return console.log(`JSON parse error: ${n}`),r}return r},X1=(r,n)=>{if(typeof r!="string")return r;const a=r.length-1,s=r[a];if(r[0]==="{"&&s==="}"){let c;const d=r.slice(1,a);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(p=>Qy(n,p))}return r},Q1=r=>typeof r=="string"?r.replace(" ","T"):r,Zy=r=>{let n=r;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")};class dd{constructor(n,a,s={},o=Ky){this.channel=n,this.event=a,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,a){var s;return this._hasReceived(n)&&a((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:n,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:a}){this.recHooks.filter(s=>s.status===n).forEach(s=>s.callback(a))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Bg;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Bg||(Bg={}));class qr{constructor(n,a){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=a?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:c,onLeave:d,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qr.syncState(this.state,o,c,d),this.pendingDiffs.forEach(m=>{this.state=qr.syncDiff(this.state,m,c,d)}),this.pendingDiffs=[],p()}),this.channel._on(s.diff,{},o=>{const{onJoin:c,onLeave:d,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=qr.syncDiff(this.state,o,c,d),p())}),this.onJoin((o,c,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:d})}),this.onLeave((o,c,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,a,s,o){const c=this.cloneDeep(n),d=this.transformState(a),p={},m={};return this.map(c,(g,y)=>{d[g]||(m[g]=y)}),this.map(d,(g,y)=>{const b=c[g];if(b){const w=y.map(A=>A.presence_ref),x=b.map(A=>A.presence_ref),T=y.filter(A=>x.indexOf(A.presence_ref)<0),C=b.filter(A=>w.indexOf(A.presence_ref)<0);T.length>0&&(p[g]=T),C.length>0&&(m[g]=C)}else p[g]=y}),this.syncDiff(c,{joins:p,leaves:m},s,o)}static syncDiff(n,a,s,o){const{joins:c,leaves:d}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(c,(p,m)=>{var g;const y=(g=n[p])!==null&&g!==void 0?g:[];if(n[p]=this.cloneDeep(m),y.length>0){const b=n[p].map(x=>x.presence_ref),w=y.filter(x=>b.indexOf(x.presence_ref)<0);n[p].unshift(...w)}s(p,y,m)}),this.map(d,(p,m)=>{let g=n[p];if(!g)return;const y=m.map(b=>b.presence_ref);g=g.filter(b=>y.indexOf(b.presence_ref)<0),n[p]=g,o(p,g,m),g.length===0&&delete n[p]}),n}static map(n,a){return Object.getOwnPropertyNames(n).map(s=>a(s,n[s]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((a,s)=>{const o=n[s];return"metas"in o?a[s]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):a[s]=o,a},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zg;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(zg||(zg={}));var Ig;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Ig||(Ig={}));var na;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(na||(na={}));class sf{constructor(n,a={config:{}},s){this.topic=n,this.params=a,this.socket=s,this.bindings={},this.state=Lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new dd(this,Sn.join,this.params,this.timeout),this.rejoinTimer=new Xy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Lt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sn.reply,{},(o,c)=>{this._trigger(this._replyEventName(c),o)}),this.presence=new qr(this),this.broadcastEndpointURL=Zy(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(n,a=this.timeout){var s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Lt.closed){const{config:{broadcast:c,presence:d,private:p}}=this.params;this._onError(y=>n?.(na.CHANNEL_ERROR,y)),this._onClose(()=>n?.(na.CLOSED));const m={},g={broadcast:c,presence:d,postgres_changes:(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(y=>y.filter))!==null&&o!==void 0?o:[],private:p};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:g},m)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:y})=>{var b;if(this.socket.setAuth(),y===void 0){n?.(na.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,x=(b=w?.length)!==null&&b!==void 0?b:0,T=[];for(let C=0;C<x;C++){const A=w[C],{filter:{event:j,schema:z,table:E,filter:I}}=A,V=y&&y[C];if(V&&V.event===j&&V.schema===z&&V.table===E&&V.filter===I)T.push(Object.assign(Object.assign({},A),{id:V.id}));else{this.unsubscribe(),this.state=Lt.errored,n?.(na.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,n&&n(na.SUBSCRIBED);return}}).receive("error",y=>{this.state=Lt.errored,n?.(na.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{n?.(na.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,a={}){return await this.send({type:"presence",event:"track",payload:n},a.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,a,s){return this._on(n,a,s)}async send(n,a={}){var s,o;if(!this._canPush()&&n.type==="broadcast"){const{event:c,payload:d}=n,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(s=a.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,p,m;const g=this._push(n.type,n,a.timeout||this.timeout);n.type==="broadcast"&&!(!((m=(p=(d=this.params)===null||d===void 0?void 0:d.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),g.receive("ok",()=>c("ok")),g.receive("error",()=>c("error")),g.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Lt.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new dd(this,Sn.leave,{},n),s.receive("ok",()=>{a(),o("ok")}).receive("timeout",()=>{a(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(n,a,s){const o=new AbortController,c=setTimeout(()=>o.abort(),s),d=await this.socket.fetch(n,Object.assign(Object.assign({},a),{signal:o.signal}));return clearTimeout(c),d}_push(n,a,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new dd(this,n,a,s);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(n,a,s){return a}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,a,s){var o,c;const d=n.toLocaleLowerCase(),{close:p,error:m,leave:g,join:y}=Sn;if(s&&[p,m,g,y].indexOf(d)>=0&&s!==this._joinRef())return;let w=this._onMessage(d,a,s);if(a&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(x=>{var T,C,A;return((T=x.filter)===null||T===void 0?void 0:T.event)==="*"||((A=(C=x.filter)===null||C===void 0?void 0:C.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===d}).map(x=>x.callback(w,s)):(c=this.bindings[d])===null||c===void 0||c.filter(x=>{var T,C,A,j,z,E;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in x){const I=x.id,V=(T=x.filter)===null||T===void 0?void 0:T.event;return I&&((C=a.ids)===null||C===void 0?void 0:C.includes(I))&&(V==="*"||V?.toLocaleLowerCase()===((A=a.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const I=(z=(j=x?.filter)===null||j===void 0?void 0:j.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return I==="*"||I===((E=a?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===d}).map(x=>{if(typeof w=="object"&&"ids"in w){const T=w.data,{schema:C,table:A,commit_timestamp:j,type:z,errors:E}=T;w=Object.assign(Object.assign({},{schema:C,table:A,commit_timestamp:j,eventType:z,new:{},old:{},errors:E}),this._getPayloadRecords(T))}x.callback(w,s)})}_isClosed(){return this.state===Lt.closed}_isJoined(){return this.state===Lt.joined}_isJoining(){return this.state===Lt.joining}_isLeaving(){return this.state===Lt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,a,s){const o=n.toLocaleLowerCase(),c={type:o,filter:a,callback:s};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(n,a){const s=n.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===s&&sf.isEqual(o.filter,a))}),this}static isEqual(n,a){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const s in n)if(n[s]!==a[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Sn.close,{},n)}_onError(n){this._on(Sn.error,{},a=>n(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Lt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const a={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(a.new=Pg(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(a.old=Pg(n.columns,n.old_record)),a}}const qg=()=>{},Z1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class J1{constructor(n,a){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ky,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=qg,this.ref=0,this.logger=qg,this.conn=null,this.sendBuffer=[],this.serializer=new $1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=c=>{let d;return c?d=c:typeof fetch>"u"?d=(...p)=>Jr(async()=>{const{default:m}=await Promise.resolve().then(()=>ks);return{default:m}},void 0).then(({default:m})=>m(...p)):d=fetch,(...p)=>d(...p)},this.endPoint=`${n}/${kd.websocket}`,this.httpEndpoint=Zy(n),a?.transport?this.transport=a.transport:this.transport=null,a?.params&&(this.params=a.params),a?.timeout&&(this.timeout=a.timeout),a?.logger&&(this.logger=a.logger),(a?.logLevel||a?.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),a?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=a.heartbeatIntervalMs);const o=(s=a?.params)===null||s===void 0?void 0:s.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=a?.reconnectAfterMs?a.reconnectAfterMs:c=>[1e3,2e3,5e3,1e4][c-1]||1e4,this.encode=a?.encode?a.encode:(c,d)=>d(JSON.stringify(c)),this.decode=a?.decode?a.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Xy(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(a?.fetch),a?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=a?.worker||!1,this.workerUrl=a?.workerUrl}this.accessToken=a?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=z1),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:H1}))}disconnect(n,a){this.conn&&(this.conn.onclose=function(){},n?this.conn.close(n,a??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(n){const a=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const n=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,a,s){this.logger(n,a,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ir.connecting:return mi.Connecting;case Ir.open:return mi.Open;case Ir.closing:return mi.Closing;default:return mi.Closed}}isConnected(){return this.connectionState()===mi.Open}channel(n,a={config:{}}){const s=`realtime:${n}`,o=this.getChannels().find(c=>c.topic===s);if(o)return o;{const c=new sf(`realtime:${n}`,a,this);return this.channels.push(c),c}}push(n){const{topic:a,event:s,payload:o,ref:c}=n,d=()=>{this.encode(n,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${a} ${s} (${c})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(n=null){let a=n||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(s=>{const o={access_token:a,version:q1};a&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(Sn.access_token,{access_token:a})}))}async sendHeartbeat(){var n;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(n=this.conn)===null||n===void 0||n.close(G1,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let a=this.channels.find(s=>s.topic===n&&(s._isJoined()||s._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${n}"`),a.unsubscribe())}_remove(n){this.channels=this.channels.filter(a=>a.topic!==n.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_onConnMessage(n){this.decode(n.data,a=>{let{topic:s,event:o,payload:c,ref:d}=a;s==="phoenix"&&o==="phx_reply"&&this.heartbeatCallback(a.payload.status=="ok"?"ok":"error"),d&&d===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${c.status||""} ${s} ${o} ${d&&"("+d+")"||""}`,c),Array.from(this.channels).filter(p=>p._isMember(s)).forEach(p=>p._trigger(o,c,d)),this.stateChangeCallbacks.message.forEach(p=>p(a))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(n=>n())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){this.log("transport","close",n),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(a=>a(n))}_onConnError(n){this.log("transport",`${n}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(a=>a(n))}_triggerChanError(){this.channels.forEach(n=>n._trigger(Sn.error))}_appendParams(n,a){if(Object.keys(a).length===0)return n;const s=n.match(/\?/)?"&":"?",o=new URLSearchParams(a);return`${n}${s}${o}`}_workerObjectUrl(n){let a;if(n)a=n;else{const s=new Blob([Z1],{type:"application/javascript"});a=URL.createObjectURL(s)}return a}}class rf extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Tt(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class W1 extends rf{constructor(n,a,s){super(n),this.name="StorageApiError",this.status=a,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Md extends rf{constructor(n,a){super(n),this.name="StorageUnknownError",this.originalError=a}}var e_=function(r,n,a,s){function o(c){return c instanceof a?c:new a(function(d){d(c)})}return new(a||(a=Promise))(function(c,d){function p(y){try{g(s.next(y))}catch(b){d(b)}}function m(y){try{g(s.throw(y))}catch(b){d(b)}}function g(y){y.done?c(y.value):o(y.value).then(p,m)}g((s=s.apply(r,n||[])).next())})};const Jy=r=>{let n;return r?n=r:typeof fetch>"u"?n=(...a)=>Jr(async()=>{const{default:s}=await Promise.resolve().then(()=>ks);return{default:s}},void 0).then(({default:s})=>s(...a)):n=fetch,(...a)=>n(...a)},t_=()=>e_(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Jr(()=>Promise.resolve().then(()=>ks),void 0)).Response:Response}),Ud=r=>{if(Array.isArray(r))return r.map(a=>Ud(a));if(typeof r=="function"||r!==Object(r))return r;const n={};return Object.entries(r).forEach(([a,s])=>{const o=a.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[o]=Ud(s)}),n},n_=r=>{if(typeof r!="object"||r===null)return!1;const n=Object.getPrototypeOf(r);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var xi=function(r,n,a,s){function o(c){return c instanceof a?c:new a(function(d){d(c)})}return new(a||(a=Promise))(function(c,d){function p(y){try{g(s.next(y))}catch(b){d(b)}}function m(y){try{g(s.throw(y))}catch(b){d(b)}}function g(y){y.done?c(y.value):o(y.value).then(p,m)}g((s=s.apply(r,n||[])).next())})};const fd=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),a_=(r,n,a)=>xi(void 0,void 0,void 0,function*(){const s=yield t_();r instanceof s&&!a?.noResolveJson?r.json().then(o=>{const c=r.status||500,d=o?.statusCode||c+"";n(new W1(fd(o),c,d))}).catch(o=>{n(new Md(fd(o),o))}):n(new Md(fd(r),r))}),i_=(r,n,a,s)=>{const o={method:r,headers:n?.headers||{}};return r==="GET"||!s?o:(n_(s)?(o.headers=Object.assign({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(s)):o.body=s,Object.assign(Object.assign({},o),a))};function Wr(r,n,a,s,o,c){return xi(this,void 0,void 0,function*(){return new Promise((d,p)=>{r(a,i_(n,s,o,c)).then(m=>{if(!m.ok)throw m;return s?.noResolveJson?m:m.json()}).then(m=>d(m)).catch(m=>a_(m,p,s))})})}function Co(r,n,a,s){return xi(this,void 0,void 0,function*(){return Wr(r,"GET",n,a,s)})}function aa(r,n,a,s,o){return xi(this,void 0,void 0,function*(){return Wr(r,"POST",n,s,o,a)})}function Ld(r,n,a,s,o){return xi(this,void 0,void 0,function*(){return Wr(r,"PUT",n,s,o,a)})}function s_(r,n,a,s){return xi(this,void 0,void 0,function*(){return Wr(r,"HEAD",n,Object.assign(Object.assign({},a),{noResolveJson:!0}),s)})}function Wy(r,n,a,s,o){return xi(this,void 0,void 0,function*(){return Wr(r,"DELETE",n,s,o,a)})}var Ft=function(r,n,a,s){function o(c){return c instanceof a?c:new a(function(d){d(c)})}return new(a||(a=Promise))(function(c,d){function p(y){try{g(s.next(y))}catch(b){d(b)}}function m(y){try{g(s.throw(y))}catch(b){d(b)}}function g(y){y.done?c(y.value):o(y.value).then(p,m)}g((s=s.apply(r,n||[])).next())})};const r_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class l_{constructor(n,a={},s,o){this.url=n,this.headers=a,this.bucketId=s,this.fetch=Jy(o)}uploadOrUpdate(n,a,s,o){return Ft(this,void 0,void 0,function*(){try{let c;const d=Object.assign(Object.assign({},Hg),o);let p=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),m&&c.append("metadata",this.encodeMetadata(m)),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl),m&&c.append("metadata",this.encodeMetadata(m))):(c=s,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType,m&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),o?.headers&&(p=Object.assign(Object.assign({},p),o.headers));const g=this._removeEmptyFolders(a),y=this._getFinalPath(g),b=yield(n=="PUT"?Ld:aa)(this.fetch,`${this.url}/object/${y}`,c,Object.assign({headers:p},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:g,id:b.Id,fullPath:b.Key},error:null}}catch(c){if(Tt(c))return{data:null,error:c};throw c}})}upload(n,a,s){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,a,s)})}uploadToSignedUrl(n,a,s,o){return Ft(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),p=new URL(this.url+`/object/upload/sign/${d}`);p.searchParams.set("token",a);try{let m;const g=Object.assign({upsert:Hg.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",g.cacheControl)):(m=s,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType);const b=yield Ld(this.fetch,p.toString(),m,{headers:y});return{data:{path:c,fullPath:b.Key},error:null}}catch(m){if(Tt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(n,a){return Ft(this,void 0,void 0,function*(){try{let s=this._getFinalPath(n);const o=Object.assign({},this.headers);a?.upsert&&(o["x-upsert"]="true");const c=yield aa(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),d=new URL(this.url+c.url),p=d.searchParams.get("token");if(!p)throw new rf("No token returned by API");return{data:{signedUrl:d.toString(),path:n,token:p},error:null}}catch(s){if(Tt(s))return{data:null,error:s};throw s}})}update(n,a,s){return Ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,a,s)})}move(n,a,s){return Ft(this,void 0,void 0,function*(){try{return{data:yield aa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:a,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(Tt(o))return{data:null,error:o};throw o}})}copy(n,a,s){return Ft(this,void 0,void 0,function*(){try{return{data:{path:(yield aa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:a,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(Tt(o))return{data:null,error:o};throw o}})}createSignedUrl(n,a,s){return Ft(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n),c=yield aa(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:a},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const d=s?.download?`&download=${s.download===!0?"":s.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${d}`)},{data:c,error:null}}catch(o){if(Tt(o))return{data:null,error:o};throw o}})}createSignedUrls(n,a,s){return Ft(this,void 0,void 0,function*(){try{const o=yield aa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:n},{headers:this.headers}),c=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${c}`):null})),error:null}}catch(o){if(Tt(o))return{data:null,error:o};throw o}})}download(n,a){return Ft(this,void 0,void 0,function*(){const o=typeof a?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(a?.transform||{}),d=c?`?${c}`:"";try{const p=this._getFinalPath(n);return{data:yield(yield Co(this.fetch,`${this.url}/${o}/${p}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(p){if(Tt(p))return{data:null,error:p};throw p}})}info(n){return Ft(this,void 0,void 0,function*(){const a=this._getFinalPath(n);try{const s=yield Co(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:Ud(s),error:null}}catch(s){if(Tt(s))return{data:null,error:s};throw s}})}exists(n){return Ft(this,void 0,void 0,function*(){const a=this._getFinalPath(n);try{return yield s_(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Tt(s)&&s instanceof Md){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(n,a){const s=this._getFinalPath(n),o=[],c=a?.download?`download=${a.download===!0?"":a.download}`:"";c!==""&&o.push(c);const p=typeof a?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(a?.transform||{});m!==""&&o.push(m);let g=o.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${s}${g}`)}}}remove(n){return Ft(this,void 0,void 0,function*(){try{return{data:yield Wy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(a){if(Tt(a))return{data:null,error:a};throw a}})}list(n,a,s){return Ft(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},r_),a),{prefix:n||""});return{data:yield aa(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(Tt(o))return{data:null,error:o};throw o}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const a=[];return n.width&&a.push(`width=${n.width}`),n.height&&a.push(`height=${n.height}`),n.resize&&a.push(`resize=${n.resize}`),n.format&&a.push(`format=${n.format}`),n.quality&&a.push(`quality=${n.quality}`),a.join("&")}}const o_="2.10.4",c_={"X-Client-Info":`storage-js/${o_}`};var gs=function(r,n,a,s){function o(c){return c instanceof a?c:new a(function(d){d(c)})}return new(a||(a=Promise))(function(c,d){function p(y){try{g(s.next(y))}catch(b){d(b)}}function m(y){try{g(s.throw(y))}catch(b){d(b)}}function g(y){y.done?c(y.value):o(y.value).then(p,m)}g((s=s.apply(r,n||[])).next())})};class u_{constructor(n,a={},s,o){const c=new URL(n);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},c_),a),this.fetch=Jy(s)}listBuckets(){return gs(this,void 0,void 0,function*(){try{return{data:yield Co(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(Tt(n))return{data:null,error:n};throw n}})}getBucket(n){return gs(this,void 0,void 0,function*(){try{return{data:yield Co(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(a){if(Tt(a))return{data:null,error:a};throw a}})}createBucket(n,a={public:!1}){return gs(this,void 0,void 0,function*(){try{return{data:yield aa(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Tt(s))return{data:null,error:s};throw s}})}updateBucket(n,a){return gs(this,void 0,void 0,function*(){try{return{data:yield Ld(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Tt(s))return{data:null,error:s};throw s}})}emptyBucket(n){return gs(this,void 0,void 0,function*(){try{return{data:yield aa(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(Tt(a))return{data:null,error:a};throw a}})}deleteBucket(n){return gs(this,void 0,void 0,function*(){try{return{data:yield Wy(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(a){if(Tt(a))return{data:null,error:a};throw a}})}}class d_ extends u_{constructor(n,a={},s,o){super(n,a,s,o)}from(n){return new l_(this.url,this.headers,n,this.fetch)}}const f_="2.53.0";let Br="";typeof Deno<"u"?Br="deno":typeof document<"u"?Br="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Br="react-native":Br="node";const h_={"X-Client-Info":`supabase-js-${Br}/${f_}`},m_={headers:h_},p_={schema:"public"},g_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},y_={};var v_=function(r,n,a,s){function o(c){return c instanceof a?c:new a(function(d){d(c)})}return new(a||(a=Promise))(function(c,d){function p(y){try{g(s.next(y))}catch(b){d(b)}}function m(y){try{g(s.throw(y))}catch(b){d(b)}}function g(y){y.done?c(y.value):o(y.value).then(p,m)}g((s=s.apply(r,n||[])).next())})};const b_=r=>{let n;return r?n=r:typeof fetch>"u"?n=Hy:n=fetch,(...a)=>n(...a)},w_=()=>typeof Headers>"u"?Gy:Headers,__=(r,n,a)=>{const s=b_(a),o=w_();return(c,d)=>v_(void 0,void 0,void 0,function*(){var p;const m=(p=yield n())!==null&&p!==void 0?p:r;let g=new o(d?.headers);return g.has("apikey")||g.set("apikey",r),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),s(c,Object.assign(Object.assign({},d),{headers:g}))})};var S_=function(r,n,a,s){function o(c){return c instanceof a?c:new a(function(d){d(c)})}return new(a||(a=Promise))(function(c,d){function p(y){try{g(s.next(y))}catch(b){d(b)}}function m(y){try{g(s.throw(y))}catch(b){d(b)}}function g(y){y.done?c(y.value):o(y.value).then(p,m)}g((s=s.apply(r,n||[])).next())})};function x_(r){return r.endsWith("/")?r:r+"/"}function T_(r,n){var a,s;const{db:o,auth:c,realtime:d,global:p}=r,{db:m,auth:g,realtime:y,global:b}=n,w={db:Object.assign(Object.assign({},m),o),auth:Object.assign(Object.assign({},g),c),realtime:Object.assign(Object.assign({},y),d),storage:{},global:Object.assign(Object.assign(Object.assign({},b),p),{headers:Object.assign(Object.assign({},(a=b?.headers)!==null&&a!==void 0?a:{}),(s=p?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>S_(this,void 0,void 0,function*(){return""})};return r.accessToken?w.accessToken=r.accessToken:delete w.accessToken,w}const ev="2.71.1",Ss=30*1e3,Pd=3,hd=Pd*Ss,E_="http://localhost:9999",j_="supabase.auth.token",C_={"X-Client-Info":`gotrue-js/${ev}`},Bd="X-Supabase-Api-Version",tv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},A_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,O_=600*1e3;class lf extends Error{constructor(n,a,s){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=s}}function je(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class N_ extends lf{constructor(n,a,s){super(n,a,s),this.name="AuthApiError",this.status=a,this.code=s}}function R_(r){return je(r)&&r.name==="AuthApiError"}class nv extends lf{constructor(n,a){super(n),this.name="AuthUnknownError",this.originalError=a}}class Ha extends lf{constructor(n,a,s,o){super(n,s,o),this.name=a,this.status=s}}class Da extends Ha{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function k_(r){return je(r)&&r.name==="AuthSessionMissingError"}class go extends Ha{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yo extends Ha{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class vo extends Ha{constructor(n,a=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function D_(r){return je(r)&&r.name==="AuthImplicitGrantRedirectError"}class Gg extends Ha{constructor(n,a=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zd extends Ha{constructor(n,a){super(n,"AuthRetryableFetchError",a,void 0)}}function md(r){return je(r)&&r.name==="AuthRetryableFetchError"}class $g extends Ha{constructor(n,a,s){super(n,"AuthWeakPasswordError",a,"weak_password"),this.reasons=s}}class Id extends Ha{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Vg=` 	
\r=`.split(""),M_=(()=>{const r=new Array(128);for(let n=0;n<r.length;n+=1)r[n]=-1;for(let n=0;n<Vg.length;n+=1)r[Vg[n].charCodeAt(0)]=-2;for(let n=0;n<Ao.length;n+=1)r[Ao[n].charCodeAt(0)]=n;return r})();function Fg(r,n,a){if(r!==null)for(n.queue=n.queue<<8|r,n.queuedBits+=8;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;a(Ao[s]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;a(Ao[s]),n.queuedBits-=6}}function av(r,n,a){const s=M_[r];if(s>-1)for(n.queue=n.queue<<6|s,n.queuedBits+=6;n.queuedBits>=8;)a(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Yg(r){const n=[],a=d=>{n.push(String.fromCodePoint(d))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=d=>{P_(d,s,a)};for(let d=0;d<r.length;d+=1)av(r.charCodeAt(d),o,c);return n.join("")}function U_(r,n){if(r<=127){n(r);return}else if(r<=2047){n(192|r>>6),n(128|r&63);return}else if(r<=65535){n(224|r>>12),n(128|r>>6&63),n(128|r&63);return}else if(r<=1114111){n(240|r>>18),n(128|r>>12&63),n(128|r>>6&63),n(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function L_(r,n){for(let a=0;a<r.length;a+=1){let s=r.charCodeAt(a);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(r.charCodeAt(a+1)-56320&65535|o)+65536,a+=1}U_(s,n)}}function P_(r,n,a){if(n.utf8seq===0){if(r<=127){a(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){n.utf8seq=s;break}if(n.utf8seq===2)n.codepoint=r&31;else if(n.utf8seq===3)n.codepoint=r&15;else if(n.utf8seq===4)n.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|r&63,n.utf8seq-=1,n.utf8seq===0&&a(n.codepoint)}}function B_(r){const n=[],a={queue:0,queuedBits:0},s=o=>{n.push(o)};for(let o=0;o<r.length;o+=1)av(r.charCodeAt(o),a,s);return new Uint8Array(n)}function z_(r){const n=[];return L_(r,a=>n.push(a)),new Uint8Array(n)}function I_(r){const n=[],a={queue:0,queuedBits:0},s=o=>{n.push(o)};return r.forEach(o=>Fg(o,a,s)),Fg(null,a,s),n.join("")}function q_(r){return Math.round(Date.now()/1e3)+r}function H_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const n=Math.random()*16|0;return(r=="x"?n:n&3|8).toString(16)})}const _n=()=>typeof window<"u"&&typeof document<"u",ui={tested:!1,writable:!1},iv=()=>{if(!_n())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ui.tested)return ui.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),ui.tested=!0,ui.writable=!0}catch{ui.tested=!0,ui.writable=!1}return ui.writable};function G_(r){const n={},a=new URL(r);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((o,c)=>{n[c]=o})}catch{}return a.searchParams.forEach((s,o)=>{n[o]=s}),n}const sv=r=>{let n;return r?n=r:typeof fetch>"u"?n=(...a)=>Jr(async()=>{const{default:s}=await Promise.resolve().then(()=>ks);return{default:s}},void 0).then(({default:s})=>s(...a)):n=fetch,(...a)=>n(...a)},$_=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",xs=async(r,n,a)=>{await r.setItem(n,JSON.stringify(a))},di=async(r,n)=>{const a=await r.getItem(n);if(!a)return null;try{return JSON.parse(a)}catch{return a}},Ra=async(r,n)=>{await r.removeItem(n)};class zo{constructor(){this.promise=new zo.promiseConstructor((n,a)=>{this.resolve=n,this.reject=a})}}zo.promiseConstructor=Promise;function pd(r){const n=r.split(".");if(n.length!==3)throw new Id("Invalid JWT structure");for(let s=0;s<n.length;s++)if(!A_.test(n[s]))throw new Id("JWT not in base64url format");return{header:JSON.parse(Yg(n[0])),payload:JSON.parse(Yg(n[1])),signature:B_(n[2]),raw:{header:n[0],payload:n[1]}}}async function V_(r){return await new Promise(n=>{setTimeout(()=>n(null),r)})}function F_(r,n){return new Promise((s,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await r(c);if(!n(c,null,d)){s(d);return}}catch(d){if(!n(c,d)){o(d);return}}})()})}function Y_(r){return("0"+r.toString(16)).substr(-2)}function K_(){const n=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=a.length;let o="";for(let c=0;c<56;c++)o+=a.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(n),Array.from(n,Y_).join("")}async function X_(r){const a=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",a),o=new Uint8Array(s);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function Q_(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const a=await X_(r);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ys(r,n,a=!1){const s=K_();let o=s;a&&(o+="/PASSWORD_RECOVERY"),await xs(r,`${n}-code-verifier`,o);const c=await Q_(s);return[c,s===c?"plain":"s256"]}const Z_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function J_(r){const n=r.headers.get(Bd);if(!n||!n.match(Z_))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function W_(r){if(!r)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(r<=n)throw new Error("JWT has expired")}function eS(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vs(r){if(!tS.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gd(){const r={};return new Proxy(r,{get:(n,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const s=a.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Kg(r){return JSON.parse(JSON.stringify(r))}var nS=function(r,n){var a={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&n.indexOf(s)<0&&(a[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(a[s[o]]=r[s[o]]);return a};const hi=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),aS=[502,503,504];async function Xg(r){var n;if(!$_(r))throw new zd(hi(r),0);if(aS.includes(r.status))throw new zd(hi(r),r.status);let a;try{a=await r.json()}catch(c){throw new nv(hi(c),c)}let s;const o=J_(r);if(o&&o.getTime()>=tv["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?s=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(s=a.error_code),s){if(s==="weak_password")throw new $g(hi(a),r.status,((n=a.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(s==="session_not_found")throw new Da}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new $g(hi(a),r.status,a.weak_password.reasons);throw new N_(hi(a),r.status||500,s)}const iS=(r,n,a,s)=>{const o={method:r,headers:n?.headers||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),a))};async function De(r,n,a,s){var o;const c=Object.assign({},s?.headers);c[Bd]||(c[Bd]=tv["2024-01-01"].name),s?.jwt&&(c.Authorization=`Bearer ${s.jwt}`);const d=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(d.redirect_to=s.redirectTo);const p=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await sS(r,n,a+p,{headers:c,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(m):{data:Object.assign({},m),error:null}}async function sS(r,n,a,s,o,c){const d=iS(n,s,o,c);let p;try{p=await r(a,Object.assign({},d))}catch(m){throw console.error(m),new zd(hi(m),0)}if(p.ok||await Xg(p),s?.noResolveJson)return p;try{return await p.json()}catch(m){await Xg(m)}}function ta(r){var n;let a=null;cS(r)&&(a=Object.assign({},r),r.expires_at||(a.expires_at=q_(r.expires_in)));const s=(n=r.user)!==null&&n!==void 0?n:r;return{data:{session:a,user:s},error:null}}function Qg(r){const n=ta(r);return!n.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0)&&(n.data.weak_password=r.weak_password),n}function Ma(r){var n;return{data:{user:(n=r.user)!==null&&n!==void 0?n:r},error:null}}function rS(r){return{data:r,error:null}}function lS(r){const{action_link:n,email_otp:a,hashed_token:s,redirect_to:o,verification_type:c}=r,d=nS(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:a,hashed_token:s,redirect_to:o,verification_type:c},m=Object.assign({},d);return{data:{properties:p,user:m},error:null}}function oS(r){return r}function cS(r){return r.access_token&&r.refresh_token&&r.expires_in}const yd=["global","local","others"];var uS=function(r,n){var a={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&n.indexOf(s)<0&&(a[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(a[s[o]]=r[s[o]]);return a};class dS{constructor({url:n="",headers:a={},fetch:s}){this.url=n,this.headers=a,this.fetch=sv(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,a=yd[0]){if(yd.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yd.join(", ")}`);try{return await De(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(s){if(je(s))return{data:null,error:s};throw s}}async inviteUserByEmail(n,a={}){try{return await De(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Ma})}catch(s){if(je(s))return{data:{user:null},error:s};throw s}}async generateLink(n){try{const{options:a}=n,s=uS(n,["options"]),o=Object.assign(Object.assign({},s),a);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await De(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:lS,redirectTo:a?.redirectTo})}catch(a){if(je(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(n){try{return await De(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Ma})}catch(a){if(je(a))return{data:{user:null},error:a};throw a}}async listUsers(n){var a,s,o,c,d,p,m;try{const g={nextPage:null,lastPage:0,total:0},y=await De(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(a=n?.page)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:oS});if(y.error)throw y.error;const b=await y.json(),w=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,x=(m=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return x.length>0&&(x.forEach(T=>{const C=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(T.split(";")[1].split("=")[1]);g[`${A}Page`]=C}),g.total=parseInt(w)),{data:Object.assign(Object.assign({},b),g),error:null}}catch(g){if(je(g))return{data:{users:[]},error:g};throw g}}async getUserById(n){vs(n);try{return await De(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Ma})}catch(a){if(je(a))return{data:{user:null},error:a};throw a}}async updateUserById(n,a){vs(n);try{return await De(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:a,headers:this.headers,xform:Ma})}catch(s){if(je(s))return{data:{user:null},error:s};throw s}}async deleteUser(n,a=!1){vs(n);try{return await De(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:a},xform:Ma})}catch(s){if(je(s))return{data:{user:null},error:s};throw s}}async _listFactors(n){vs(n.userId);try{const{data:a,error:s}=await De(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:a,error:s}}catch(a){if(je(a))return{data:null,error:a};throw a}}async _deleteFactor(n){vs(n.userId),vs(n.id);try{return{data:await De(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(a){if(je(a))return{data:null,error:a};throw a}}}function Zg(r={}){return{getItem:n=>r[n]||null,setItem:(n,a)=>{r[n]=a},removeItem:n=>{delete r[n]}}}function fS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const bs={debug:!!(globalThis&&iv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rv extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class hS extends rv{}async function mS(r,n,a){bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,n);const s=new globalThis.AbortController;return n>0&&setTimeout(()=>{s.abort(),bs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return await a()}finally{bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(n===0)throw bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new hS(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(bs.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}fS();const pS={url:E_,storageKey:j_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:C_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jg(r,n,a){return await a()}const ws={};class Vr{constructor(n){var a,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vr.nextInstanceID,Vr.nextInstanceID+=1,this.instanceID>0&&_n()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},pS),n);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new dS({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=sv(o.fetch),this.lock=o.lock||Jg,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:_n()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=mS:this.lock=Jg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:iv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Zg(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Zg(this.memoryStorage)),_n()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var n,a;return(a=(n=ws[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(n){ws[this.storageKey]=Object.assign(Object.assign({},ws[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,a;return(a=(n=ws[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){ws[this.storageKey]=Object.assign(Object.assign({},ws[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ev}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const a=G_(window.location.href);let s="none";if(this._isImplicitGrantCallback(a)?s="implicit":await this._isPKCECallback(a)&&(s="pkce"),_n()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:c}=await this._getSessionFromURL(a,s);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),D_(c)){const m=(n=c.details)===null||n===void 0?void 0:n.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:d,redirectType:p}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",p),await this._saveSession(d),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return je(a)?{error:a}:{error:new nv("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var a,s,o;try{const c=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(a=n?.options)===null||a===void 0?void 0:a.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:ta}),{data:d,error:p}=c;if(p||!d)return{data:{user:null,session:null},error:p};const m=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:g,session:m},error:null}}catch(c){if(je(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(n){var a,s,o;try{let c;if("email"in n){const{email:y,password:b,options:w}=n;let x=null,T=null;this.flowType==="pkce"&&([x,T]=await ys(this.storage,this.storageKey)),c=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:y,password:b,data:(a=w?.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:x,code_challenge_method:T},xform:ta})}else if("phone"in n){const{phone:y,password:b,options:w}=n;c=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:b,data:(s=w?.data)!==null&&s!==void 0?s:{},channel:(o=w?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:ta})}else throw new yo("You must provide either an email or phone number and a password");const{data:d,error:p}=c;if(p||!d)return{data:{user:null,session:null},error:p};const m=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:g,session:m},error:null}}catch(c){if(je(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(n){try{let a;if("email"in n){const{email:c,password:d,options:p}=n;a=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Qg})}else if("phone"in n){const{phone:c,password:d,options:p}=n;a=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Qg})}else throw new yo("You must provide either an email or phone number and a password");const{data:s,error:o}=a;return o?{data:{user:null,session:null},error:o}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new go}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(a){if(je(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(n){var a,s,o,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=n.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:a}=n;if(a==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}async signInWithSolana(n){var a,s,o,c,d,p,m,g,y,b,w,x;let T,C;if("message"in n)T=n.message,C=n.signature;else{const{chain:A,wallet:j,statement:z,options:E}=n;let I;if(_n())if(typeof j=="object")I=j;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))I=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=j}const V=new URL((a=E?.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in I&&I.signIn){const Y=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:V.host,uri:V.href}),z?{statement:z}:null));let B;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")B=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)B=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)T=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),C=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${V.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${V.href}`,`Issued At: ${(o=(s=E?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=E?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((d=E?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((p=E?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((m=E?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((g=E?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((b=(y=E?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||b===void 0)&&b.length?["Resources",...E.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const Y=await I.signMessage(new TextEncoder().encode(T),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=Y}}try{const{data:A,error:j}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:I_(C)},!((w=n.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(x=n.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ta});if(j)throw j;return!A||!A.session||!A.user?{data:{user:null,session:null},error:new go}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:j})}catch(A){if(je(A))return{data:{user:null,session:null},error:A};throw A}}async _exchangeCodeForSession(n){const a=await di(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(a??"").split("/");try{const{data:c,error:d}=await De(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:s},xform:ta});if(await Ra(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new go}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:d})}catch(c){if(je(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(n){try{const{options:a,provider:s,token:o,access_token:c,nonce:d}=n,p=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:ta}),{data:m,error:g}=p;return g?{data:{user:null,session:null},error:g}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new go}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:g})}catch(a){if(je(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(n){var a,s,o,c,d;try{if("email"in n){const{email:p,options:m}=n;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await ys(this.storage,this.storageKey));const{error:b}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(a=m?.data)!==null&&a!==void 0?a:{},create_user:(s=m?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:y},redirectTo:m?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in n){const{phone:p,options:m}=n,{data:g,error:y}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(o=m?.data)!==null&&o!==void 0?o:{},create_user:(c=m?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(d=m?.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:g?.message_id},error:y}}throw new yo("You must provide either an email or phone number.")}catch(p){if(je(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(n){var a,s;try{let o,c;"options"in n&&(o=(a=n.options)===null||a===void 0?void 0:a.redirectTo,c=(s=n.options)===null||s===void 0?void 0:s.captchaToken);const{data:d,error:p}=await De(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:ta});if(p)throw p;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,g=d.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:g,session:m},error:null}}catch(o){if(je(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(n){var a,s,o;try{let c=null,d=null;return this.flowType==="pkce"&&([c,d]=await ys(this.storage,this.storageKey)),await De(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(s=(a=n.options)===null||a===void 0?void 0:a.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:rS})}catch(c){if(je(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)throw s;if(!a)throw new Da;const{error:o}=await De(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:o}})}catch(n){if(je(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const a=`${this.url}/resend`;if("email"in n){const{email:s,type:o,options:c}=n,{error:d}=await De(this.fetch,"POST",a,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in n){const{phone:s,type:o,options:c}=n,{data:d,error:p}=await De(this.fetch,"POST",a,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:d?.message_id},error:p}}throw new yo("You must provide either an email or phone number and a type")}catch(a){if(je(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(n,a){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await a()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=a();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await n(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const a=await di(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?n=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const s=n.expires_at?n.expires_at*1e3-Date.now()<hd:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",n.expires_at),!s){if(this.userStorage){const d=await di(this.userStorage,this.storageKey+"-user");d?.user?n.user=d.user:n.user=gd()}if(this.storage.isServer&&n.user){let d=this.suppressGetSessionWarning;n=new Proxy(n,{get:(m,g,y)=>(!d&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,g,y))})}return{data:{session:n},error:null}}const{session:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{session:null},error:c}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Ma}):await this._useSession(async a=>{var s,o,c;const{data:d,error:p}=a;if(p)throw p;return!(!((s=d.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Da}:await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:Ma})})}catch(a){if(je(a))return k_(a)&&(await this._removeSession(),await Ra(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(n,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,a))}async _updateUser(n,a={}){try{return await this._useSession(async s=>{const{data:o,error:c}=s;if(c)throw c;if(!o.session)throw new Da;const d=o.session;let p=null,m=null;this.flowType==="pkce"&&n.email!=null&&([p,m]=await ys(this.storage,this.storageKey));const{data:g,error:y}=await De(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:m}),jwt:d.access_token,xform:Ma});if(y)throw y;return d.user=g.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(s){if(je(s))return{data:{user:null},error:s};throw s}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Da;const a=Date.now()/1e3;let s=a,o=!0,c=null;const{payload:d}=pd(n.access_token);if(d.exp&&(s=d.exp,o=s<=a),o){const{session:p,error:m}=await this._callRefreshToken(n.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!p)return{data:{user:null,session:null},error:null};c=p}else{const{data:p,error:m}=await this._getUser(n.access_token);if(m)throw m;c={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:s-a,expires_at:s},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(a){if(je(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async a=>{var s;if(!n){const{data:d,error:p}=a;if(p)throw p;n=(s=d.session)!==null&&s!==void 0?s:void 0}if(!n?.refresh_token)throw new Da;const{session:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{user:null,session:null},error:c}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(je(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(n,a){try{if(!_n())throw new vo("No browser detected.");if(n.error||n.error_description||n.error_code)throw new vo(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new Gg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vo("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Gg("No code detected.");const{data:z,error:E}=await this._exchangeCodeForSession(n.code);if(E)throw E;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:c,refresh_token:d,expires_in:p,expires_at:m,token_type:g}=n;if(!c||!p||!d||!g)throw new vo("No session defined in URL");const y=Math.round(Date.now()/1e3),b=parseInt(p);let w=y+b;m&&(w=parseInt(m));const x=w-y;x*1e3<=Ss&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${b}s`);const T=w-b;y-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,w,y):y-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,w,y);const{data:C,error:A}=await this._getUser(c);if(A)throw A;const j={provider_token:s,provider_refresh_token:o,access_token:c,expires_in:b,expires_at:w,refresh_token:d,token_type:g,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:n.type},error:null}}catch(s){if(je(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const a=await di(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&a)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async a=>{var s;const{data:o,error:c}=a;if(c)return{error:c};const d=(s=o.session)===null||s===void 0?void 0:s.access_token;if(d){const{error:p}=await this.admin.signOut(d,n);if(p&&!(R_(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return n!=="others"&&(await this._removeSession(),await Ra(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const a=H_(),s={id:a,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:s}}}async _emitInitialSession(n){return await this._useSession(async a=>{var s,o;try{const{data:{session:c},error:d}=a;if(d)throw d;await((s=this.stateChangeEmitters.get(n))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,a={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await ys(this.storage,this.storageKey,!0));try{return await De(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(c){if(je(c))return{data:null,error:c};throw c}}async getUserIdentities(){var n;try{const{data:a,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(n=a.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(a){if(je(a))return{data:null,error:a};throw a}}async linkIdentity(n){var a;try{const{data:s,error:o}=await this._useSession(async c=>{var d,p,m,g,y;const{data:b,error:w}=c;if(w)throw w;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(d=n.options)===null||d===void 0?void 0:d.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=n.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await De(this.fetch,"GET",x,{headers:this.headers,jwt:(y=(g=b.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return _n()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:n.provider,url:s?.url},error:null}}catch(s){if(je(s))return{data:{provider:n.provider,url:null},error:s};throw s}}async unlinkIdentity(n){try{return await this._useSession(async a=>{var s,o;const{data:c,error:d}=a;if(d)throw d;return await De(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(a){if(je(a))return{data:null,error:a};throw a}}async _refreshAccessToken(n){const a=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(a,"begin");try{const s=Date.now();return await F_(async o=>(o>0&&await V_(200*Math.pow(2,o-1)),this._debug(a,"refreshing attempt",o),await De(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:ta})),(o,c)=>{const d=200*Math.pow(2,o);return c&&md(c)&&Date.now()+d-s<Ss})}catch(s){if(this._debug(a,"error",s),je(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(a,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,a){const s=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",a,"url",s),_n()&&!a.skipBrowserRedirect&&window.location.assign(s),{data:{provider:n,url:s},error:null}}async _recoverAndRefresh(){var n,a;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await di(this.storage,this.storageKey);if(o&&this.userStorage){let d=await di(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await xs(this.userStorage,this.storageKey+"-user",d)),o.user=(n=d?.user)!==null&&n!==void 0?n:gd()}else if(o&&!o.user&&!o.user){const d=await di(this.storage,this.storageKey+"-user");d&&d?.user?(o.user=d.user,await Ra(this.storage,this.storageKey+"-user"),await xs(this.storage,this.storageKey,o)):o.user=gd()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const c=((a=o.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<hd;if(this._debug(s,`session has${c?"":" not"} expired with margin of ${hd}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),md(d)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:p}=await this._getUser(o.access_token);!p&&d?.user?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(s,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(n){var a,s;if(!n)throw new Da;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new zo;const{data:c,error:d}=await this._refreshAccessToken(n);if(d)throw d;if(!c.session)throw new Da;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const p={session:c.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(c){if(this._debug(o,"error",c),je(c)){const d={session:null,error:c};return md(c)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(d),d}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,a,s=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",a,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:n,session:a});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,a)}catch(m){c.push(m)}});if(await Promise.all(d),c.length>0){for(let p=0;p<c.length;p+=1)console.error(c[p]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const a=Object.assign({},n),s=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&a.user&&await xs(this.userStorage,this.storageKey+"-user",{user:a.user});const o=Object.assign({},a);delete o.user;const c=Kg(o);await xs(this.storage,this.storageKey,c)}else{const o=Kg(a);await xs(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Ra(this.storage,this.storageKey),await Ra(this.storage,this.storageKey+"-code-verifier"),await Ra(this.storage,this.storageKey+"-user"),this.userStorage&&await Ra(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&_n()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Ss);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async a=>{const{data:{session:s}}=a;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-n)/Ss);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Ss}ms, refresh threshold is ${Pd} ticks`),o<=Pd&&await this._callRefreshToken(s.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof rv)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_n()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const a=`#_onVisibilityChanged(${n})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,a,s){const o=[`provider=${encodeURIComponent(a)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[c,d]=await ys(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(p.toString())}if(s?.queryParams){const c=new URLSearchParams(s.queryParams);o.push(c.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async a=>{var s;const{data:o,error:c}=a;return c?{data:null,error:c}:await De(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(je(a))return{data:null,error:a};throw a}}async _enroll(n){try{return await this._useSession(async a=>{var s,o;const{data:c,error:d}=a;if(d)return{data:null,error:d};const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:m,error:g}=await De(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(s=c?.session)===null||s===void 0?void 0:s.access_token});return g?{data:null,error:g}:(n.factorType==="totp"&&(!((o=m?.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(a){if(je(a))return{data:null,error:a};throw a}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:o,error:c}=a;if(c)return{data:null,error:c};const{data:d,error:p}=await De(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:p})})}catch(a){if(je(a))return{data:null,error:a};throw a}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:o,error:c}=a;return c?{data:null,error:c}:await De(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(je(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(n){const{data:a,error:s}=await this._challenge({factorId:n.factorId});return s?{data:null,error:s}:await this._verify({factorId:n.factorId,challengeId:a.id,code:n.code})}async _listFactors(){const{data:{user:n},error:a}=await this.getUser();if(a)return{data:null,error:a};const s=n?.factors||[],o=s.filter(d=>d.factor_type==="totp"&&d.status==="verified"),c=s.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:s,totp:o,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var a,s;const{data:{session:o},error:c}=n;if(c)return{data:null,error:c};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=pd(o.access_token);let p=null;d.aal&&(p=d.aal);let m=p;((s=(a=o.user.factors)===null||a===void 0?void 0:a.filter(b=>b.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(m="aal2");const y=d.amr||[];return{data:{currentLevel:p,nextLevel:m,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(n,a={keys:[]}){let s=a.keys.find(p=>p.kid===n);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(p=>p.kid===n),s&&this.jwks_cached_at+O_>o)return s;const{data:c,error:d}=await De(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,s=c.keys.find(p=>p.kid===n),!s)?null:s}async getClaims(n,a={}){try{let s=n;if(!s){const{data:x,error:T}=await this.getSession();if(T||!x.session)return{data:null,error:T};s=x.session.access_token}const{header:o,payload:c,signature:d,raw:{header:p,payload:m}}=pd(s);a?.allowExpired||W_(c.exp);const g=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,a?.keys?{keys:a.keys}:a?.jwks);if(!g){const{error:x}=await this.getUser(s);if(x)throw x;return{data:{claims:c,header:o,signature:d},error:null}}const y=eS(o.alg),b=await crypto.subtle.importKey("jwk",g,y,!0,["verify"]);if(!await crypto.subtle.verify(y,b,d,z_(`${p}.${m}`)))throw new Id("Invalid JWT signature");return{data:{claims:c,header:o,signature:d},error:null}}catch(s){if(je(s))return{data:null,error:s};throw s}}}Vr.nextInstanceID=0;const gS=Vr;class yS extends gS{constructor(n){super(n)}}var vS=function(r,n,a,s){function o(c){return c instanceof a?c:new a(function(d){d(c)})}return new(a||(a=Promise))(function(c,d){function p(y){try{g(s.next(y))}catch(b){d(b)}}function m(y){try{g(s.throw(y))}catch(b){d(b)}}function g(y){y.done?c(y.value):o(y.value).then(p,m)}g((s=s.apply(r,n||[])).next())})};class bS{constructor(n,a,s){var o,c,d;if(this.supabaseUrl=n,this.supabaseKey=a,!n)throw new Error("supabaseUrl is required.");if(!a)throw new Error("supabaseKey is required.");const p=x_(n),m=new URL(p);this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const g=`sb-${m.hostname.split(".")[0]}-auth-token`,y={db:p_,realtime:y_,auth:Object.assign(Object.assign({},g_),{storageKey:g}),global:m_},b=T_(s??{},y);this.storageKey=(o=b.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=b.global.headers)!==null&&c!==void 0?c:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(w,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=b.auth)!==null&&d!==void 0?d:{},this.headers,b.global.fetch),this.fetch=__(a,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.rest=new P1(new URL("rest/v1",m).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new d_(this.storageUrl.href,this.headers,this.fetch,s?.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new E1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,a={},s={}){return this.rest.rpc(n,a,s)}channel(n,a={config:{}}){return this.realtime.channel(n,a)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,a;return vS(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(a=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:null})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:a,detectSessionInUrl:s,storage:o,storageKey:c,flowType:d,lock:p,debug:m},g,y){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yS({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),g),storageKey:c,autoRefreshToken:n,persistSession:a,detectSessionInUrl:s,storage:o,flowType:d,lock:p,debug:m,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(n){return new J1(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,s)=>{this._handleTokenChanged(a,"CLIENT",s?.access_token)})}_handleTokenChanged(n,a,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:n==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const wS=(r,n,a)=>new bS(r,n,a);function _S(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const r=process.version.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}_S()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const SS="https://edhyajfowwcgrdrazkwf.supabase.co",xS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVkaHlhamZvd3djZ3JkcmF6a3dmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyMTIzNDMsImV4cCI6MjA2OTc4ODM0M30.6E-0-_FoyYKd46scjUexd41miiU-EZJg2LlZGogDgHU",W=wS(SS,xS,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1},realtime:{params:{eventsPerSecond:10}},global:{headers:{"X-Client-Info":"plants-de-louton-web"}}});class Je extends Error{constructor(n,a,s){super(n),this.code=a,this.details=s,this.name="DatabaseError"}}const vd={maxAttempts:3,baseDelay:1e3,maxDelay:5e3};async function Wg(r,n=vd.maxAttempts){let a;for(let s=1;s<=n;s++)try{return await r()}catch(o){if(a=o,s===n)throw new Je(`Operation failed after ${n} attempts: ${a.message}`,"RETRY_EXHAUSTED",{originalError:a,attempts:s});const c=Math.min(vd.baseDelay*Math.pow(2,s-1)+Math.random()*1e3,vd.maxDelay);console.warn(`Database operation failed (attempt ${s}/${n}), retrying in ${c}ms:`,a.message),await new Promise(d=>setTimeout(d,c))}throw a}const bd={async query(r){const n=await Wg(r);if(n.error)throw new Je(`Database query failed: ${n.error.message}`,n.error.code,n.error);return n.data},async batch(r){const n=await Promise.allSettled(r.map(o=>Wg(o))),a=[],s=[];return n.forEach((o,c)=>{o.status==="fulfilled"?o.value.error?s.push(new Je(`Batch operation ${c} failed: ${o.value.error.message}`,o.value.error.code,o.value.error)):a.push(o.value.data):s.push(o.reason)}),s.length>0&&console.error("Batch operation errors:",s),a},async healthCheck(){try{const{data:r,error:n}=await W.from("pins").select("count").limit(1);return!n}catch(r){return console.error("Database health check failed:",r),!1}}},Ke={queries:new Map,startTimer(r){const n=Ke.now();return()=>{const a=Ke.now()-n,s=this.queries.get(r)||{count:0,totalTime:0,avgTime:0};s.count++,s.totalTime+=a,s.avgTime=s.totalTime/s.count,this.queries.set(r,s),a>1e3&&console.warn(`Slow query detected: ${r} took ${a.toFixed(2)}ms`)}},getStats(){const r={};return this.queries.forEach((n,a)=>{r[a]={count:n.count,avgTime:n.avgTime}}),r}};class bo{storage=new Map;defaultTTL=300*1e3;defaultMaxSize=1e3;namespace;constructor(n={}){this.namespace=n.namespace||"default",this.defaultTTL=n.ttl||this.defaultTTL,this.defaultMaxSize=n.maxSize||this.defaultMaxSize,setInterval(()=>this.cleanup(),6e4)}generateKey(n){return`${this.namespace}:${n}`}isExpired(n){return Date.now()-n.timestamp>n.ttl}cleanup(){const n=Date.now();for(const[a,s]of this.storage.entries())n-s.timestamp>s.ttl&&this.storage.delete(a)}set(n,a,s){const o=this.generateKey(n),c={data:a,timestamp:Date.now(),ttl:s||this.defaultTTL};if(this.storage.size>=this.defaultMaxSize){const d=this.storage.keys().next().value;this.storage.delete(d)}this.storage.set(o,c)}get(n){const a=this.generateKey(n),s=this.storage.get(a);return s?this.isExpired(s)?(this.storage.delete(a),null):s.data:null}has(n){const a=this.generateKey(n),s=this.storage.get(a);return s?this.isExpired(s)?(this.storage.delete(a),!1):!0:!1}delete(n){const a=this.generateKey(n);return this.storage.delete(a)}clear(){this.storage.clear()}size(){return this.storage.size}keys(){return Array.from(this.storage.keys()).map(n=>n.replace(`${this.namespace}:`,""))}getStats(){return{size:this.storage.size,hitRate:0,namespace:this.namespace}}}const pn={database:new bo({namespace:"db",ttl:300*1e3}),api:new bo({namespace:"api",ttl:600*1e3}),search:new bo({namespace:"search",ttl:1800*1e3}),images:new bo({namespace:"images",ttl:3600*1e3})};async function ka(r,n,a){const s=pn.database.get(r);if(s!==null)return s;const o=await n();return pn.database.set(r,o,a),o}async function TS(r,n,a){const s=pn.api.get(r);if(s!==null)return s;const o=await n();return pn.api.set(r,o,a),o}const dt={invalidateDatabase(){pn.database.clear()},invalidateDatabaseKey(r){pn.database.delete(r)},invalidateApi(){pn.api.clear()},invalidateSearch(){pn.search.clear()},invalidateImages(){pn.images.clear()},invalidateAll(){Object.values(pn).forEach(r=>r.clear())},invalidateByPattern(r){Object.values(pn).forEach(n=>{n.keys().forEach(a=>{a.includes(r)&&n.delete(a)})})}},ES={getAllStats(){const r={};return Object.entries(pn).forEach(([n,a])=>{r[n]=a.getStats()}),r},logStats(){const r=this.getAllStats();console.log("Cache Statistics:",r)},startMonitoring(r=6e4){const n=setInterval(()=>{this.logStats()},r);return()=>clearInterval(n)}};class Ts{static instance;constructor(){}static getInstance(){return Ts.instance||(Ts.instance=new Ts),Ts.instance}async healthCheck(){const n=Ke.startTimer("health_check");try{const a=Date.now(),s=await bd.healthCheck(),o=Date.now()-a;return n(),{healthy:s,latency:o}}catch(a){return n(),{healthy:!1,latency:0,error:a instanceof Error?a.message:"Unknown error"}}}async getBeds(){return ka("beds:all",async()=>{const n=Ke.startTimer("get_beds");try{const{data:a,error:s}=await W.from("beds").select("*").order("name");if(s)throw new Je("Failed to fetch beds",s.code,s);return n(),a||[]}catch(a){throw n(),a}})}async getBed(n){return ka(`bed:${n}`,async()=>{const a=Ke.startTimer("get_bed");try{const{data:s,error:o}=await W.from("beds").select("*").eq("id",n).single();if(o&&o.code!=="PGRST116")throw new Je("Failed to fetch bed",o.code,o);return a(),s}catch(s){throw a(),s}})}async getPinsBySection(n){return ka(`pins:section:${n}`,async()=>{const a=Ke.startTimer("get_pins_by_section");try{const{data:s,error:o}=await W.from("pins").select(`
            *,
            plant_instance:plant_instances(*),
            plant_details:plant_instances(plant_details(*))
          `).eq("section_id",n).order("created_at",{ascending:!1});if(o)throw new Je("Failed to fetch pins",o.code,o);return a(),s||[]}catch(s){throw a(),s}})}async getPin(n){return ka(`pin:${n}`,async()=>{const a=Ke.startTimer("get_pin");try{const{data:s,error:o}=await W.from("pins").select(`
            *,
            plant_instance:plant_instances(*),
            plant_details:plant_instances(plant_details(*))
          `).eq("id",n).single();if(o&&o.code!=="PGRST116")throw new Je("Failed to fetch pin",o.code,o);return a(),s}catch(s){throw a(),s}})}async createPin(n){const a=Ke.startTimer("create_pin");try{const{data:s,error:o}=await W.from("pins").insert(n).select("*").single();if(o)throw new Je("Failed to create pin",o.code,o);return dt.invalidateByPattern("pins:section"),dt.invalidateByPattern("beds"),a(),s}catch(s){throw a(),s}}async updatePin(n,a){const s=Ke.startTimer("update_pin");try{const{data:o,error:c}=await W.from("pins").update({...a,updated_at:new Date().toISOString()}).eq("id",n).select("*").single();if(c)throw new Je("Failed to update pin",c.code,c);return dt.invalidateDatabaseKey(`pin:${n}`),dt.invalidateByPattern("pins:section"),s(),o}catch(o){throw s(),o}}async deletePin(n){const a=Ke.startTimer("delete_pin");try{const{error:s}=await W.from("pins").delete().eq("id",n);if(s)throw new Je("Failed to delete pin",s.code,s);dt.invalidateDatabaseKey(`pin:${n}`),dt.invalidateByPattern("pins:section"),a()}catch(s){throw a(),s}}async batchCreatePins(n){const a=Ke.startTimer("batch_create_pins");try{const s=n.map(c=>()=>W.from("pins").insert(c).select("*").single()),o=await bd.batch(s);return dt.invalidateByPattern("pins:section"),dt.invalidateByPattern("beds"),a(),o}catch(s){throw a(),s}}async batchUpdatePins(n){const a=Ke.startTimer("batch_update_pins");try{const s=n.map(({id:c,updates:d})=>()=>W.from("pins").update({...d,updated_at:new Date().toISOString()}).eq("id",c).select("*").single()),o=await bd.batch(s);return n.forEach(({id:c})=>dt.invalidateDatabaseKey(`pin:${c}`)),dt.invalidateByPattern("pins:section"),a(),o}catch(s){throw a(),s}}async getPlantDetails(n){return ka(`plant_details:${n}`,async()=>{const a=Ke.startTimer("get_plant_details");try{const{data:s,error:o}=await W.from("plant_details").select("*").eq("id",n).single();if(o&&o.code!=="PGRST116")throw new Je("Failed to fetch plant details",o.code,o);return a(),s}catch(s){throw a(),s}})}async createPlantDetails(n){const a=Ke.startTimer("create_plant_details");try{const{data:s,error:o}=await W.from("plant_details").insert(n).select("*").single();if(o)throw new Je("Failed to create plant details",o.code,o);return dt.invalidateByPattern("plant_details"),a(),s}catch(s){throw a(),s}}async updatePlantDetails(n,a){const s=Ke.startTimer("update_plant_details");try{const{data:o,error:c}=await W.from("plant_details").update({...a,updated_at:new Date().toISOString()}).eq("id",n).select("*").single();if(c)throw new Je("Failed to update plant details",c.code,c);return dt.invalidateDatabaseKey(`plant_details:${n}`),s(),o}catch(o){throw s(),o}}async getPlantInstance(n){return ka(`plant_instance:${n}`,async()=>{const a=Ke.startTimer("get_plant_instance");try{const{data:s,error:o}=await W.from("plant_instances").select(`
            *,
            plant_details(*)
          `).eq("id",n).single();if(o&&o.code!=="PGRST116")throw new Je("Failed to fetch plant instance",o.code,o);return a(),s}catch(s){throw a(),s}})}async createPlantInstance(n){const a=Ke.startTimer("create_plant_instance");try{const{data:s,error:o}=await W.from("plant_instances").insert(n).select(`
          *,
          plant_details(*)
        `).single();if(o)throw new Je("Failed to create plant instance",o.code,o);return dt.invalidateByPattern("plant_instance"),dt.invalidateByPattern("pins"),a(),s}catch(s){throw a(),s}}async getCareEvents(n){return ka(`care_events:${n}`,async()=>{const a=Ke.startTimer("get_care_events");try{const{data:s,error:o}=await W.from("care_events").select("*").eq("plant_instance_id",n).order("event_date",{ascending:!1});if(o)throw new Je("Failed to fetch care events",o.code,o);return a(),s||[]}catch(s){throw a(),s}})}async createCareEvent(n){const a=Ke.startTimer("create_care_event");try{const{data:s,error:o}=await W.from("care_events").insert(n).select("*").single();if(o)throw new Je("Failed to create care event",o.code,o);return dt.invalidateByPattern(`care_events:${n.plant_instance_id}`),a(),s}catch(s){throw a(),s}}async getPinMedia(n){return ka(`pin_media:${n}`,async()=>{const a=Ke.startTimer("get_pin_media");try{const{data:s,error:o}=await W.from("plant_media").select("*").eq("pin_id",n).order("created_at",{ascending:!1});if(o)throw new Je("Failed to fetch pin media",o.code,o);return a(),s||[]}catch(s){throw a(),s}})}async searchPins(n,a){const s=Ke.startTimer("search_pins");try{let o=W.from("pins").select(`
          *,
          plant_instance:plant_instances(*),
          plant_details:plant_instances(plant_details(*))
        `).or(`name.ilike.%${n}%,notes.ilike.%${n}%`);a&&(o=o.eq("section_id",a));const{data:c,error:d}=await o.order("created_at",{ascending:!1});if(d)throw new Je("Failed to search pins",d.code,d);return s(),c||[]}catch(o){throw s(),o}}async getPinStats(n){const a=Ke.startTimer("get_pin_stats");try{let s=W.from("pins").select("status");n&&(s=s.eq("section_id",n));const{data:o,error:c}=await s;if(c)throw new Je("Failed to fetch pin stats",c.code,c);const d={total:o?.length||0,active:o?.filter(p=>p.status==="active").length||0,dormant:o?.filter(p=>p.status==="dormant").length||0,removed:o?.filter(p=>p.status==="removed").length||0,dead:o?.filter(p=>p.status==="dead").length||0};return a(),d}catch(s){throw a(),s}}async cleanupOrphanedRecords(){const n=Ke.startTimer("cleanup_orphaned_records");try{const a=[];let s=0;const{error:o}=await W.from("plant_instances").delete().is("pin_id",null);o?a.push(`Failed to cleanup orphaned plant instances: ${o.message}`):s++;const{error:c}=await W.from("care_events").delete().is("plant_instance_id",null);c?a.push(`Failed to cleanup orphaned care events: ${c.message}`):s++;const{error:d}=await W.from("plant_media").delete().is("pin_id",null);return d?a.push(`Failed to cleanup orphaned media: ${d.message}`):s++,dt.invalidateAll(),n(),{deleted:s,errors:a}}catch(a){throw n(),a}}getPerformanceStats(){return Ke.getStats()}clearCaches(){dt.invalidateAll()}}const jS=Ts.getInstance();class CS{requests=[];maxRequests;windowMs;constructor(n,a){this.maxRequests=n,this.windowMs=a}async waitForSlot(){const n=Date.now();if(this.requests=this.requests.filter(a=>n-a<this.windowMs),this.requests.length>=this.maxRequests){const a=this.requests[0],s=this.windowMs-(n-a);return await new Promise(o=>setTimeout(o,s)),this.waitForSlot()}this.requests.push(n)}getRemainingRequests(){const n=Date.now();return this.requests=this.requests.filter(a=>n-a<this.windowMs),Math.max(0,this.maxRequests-this.requests.length)}}class AS{config;rateLimiters=new Map;requestInterceptors=[];responseInterceptors=[];errorInterceptors=[];constructor(n={}){this.config={baseURL:"",timeout:3e4,retries:3,rateLimit:{requests:100,window:6e4},...n}}addRequestInterceptor(n){this.requestInterceptors.push(n)}addResponseInterceptor(n){this.responseInterceptors.push(n)}addErrorInterceptor(n){this.errorInterceptors.push(n)}getRateLimiter(n){return this.rateLimiters.has(n)||this.rateLimiters.set(n,new CS(this.config.rateLimit.requests,this.config.rateLimit.window)),this.rateLimiters.get(n)}async applyRequestInterceptors(n){let a={...n};for(const s of this.requestInterceptors)a=await s(a);return a}async applyResponseInterceptors(n,a){let s=n;for(const o of this.responseInterceptors)s=await o(s,a);return s}async applyErrorInterceptors(n,a){let s=n;for(const o of this.errorInterceptors)s=await o(s,a);return s}async fetchWithRetry(n){const a=n.retries||this.config.retries;let s;for(let o=1;o<=a;o++)try{const c=new URL(n.url).hostname;await this.getRateLimiter(c).waitForSlot();const p={method:n.method,headers:{"Content-Type":"application/json",...n.headers}};n.body&&(p.body=typeof n.body=="string"?n.body:JSON.stringify(n.body));const m=new AbortController,g=setTimeout(()=>m.abort(),n.timeout||this.config.timeout);p.signal=m.signal;const y=await fetch(n.url,p);if(clearTimeout(g),!y.ok)throw new Error(`HTTP ${y.status}: ${y.statusText}`);return y}catch(c){if(s=c,c instanceof TypeError&&c.message.includes("aborted"))throw new Error(`Request timeout after ${n.timeout||this.config.timeout}ms`);if(o===a)break;const d=Math.min(1e3*Math.pow(2,o-1),1e4);await new Promise(p=>setTimeout(p,d))}throw s}async request(n){try{const a=await this.applyRequestInterceptors(n);if(a.cache){const c=`${a.method}:${a.url}:${JSON.stringify(a.body||"")}`;return TS(c,async()=>{const d=await this.fetchWithRetry(a);return(await this.applyResponseInterceptors(d,a)).json()},a.cacheTTL)}const s=await this.fetchWithRetry(a);return(await this.applyResponseInterceptors(s,a)).json()}catch(a){throw await this.applyErrorInterceptors(a,n)}}async get(n,a={}){return this.request({url:this.config.baseURL+n,method:"GET",...a})}async post(n,a,s={}){return this.request({url:this.config.baseURL+n,method:"POST",body:a,...s})}async put(n,a,s={}){return this.request({url:this.config.baseURL+n,method:"PUT",body:a,...s})}async delete(n,a={}){return this.request({url:this.config.baseURL+n,method:"DELETE",...a})}getRateLimitStatus(n){const a=this.rateLimiters.get(n);if(!a)return{remaining:this.config.rateLimit.requests,resetTime:Date.now()};const s=a.getRemainingRequests(),o=Date.now()+this.config.rateLimit.window;return{remaining:s,resetTime:o}}clearRateLimiters(){this.rateLimiters.clear()}}const Io=new AS;Io.addRequestInterceptor(r=>(r.headers={...r.headers,"User-Agent":"Plants-de-Louton/1.0"},r));Io.addResponseInterceptor(async(r,n)=>{if(r.headers.get("x-response-time")){const a=parseInt(r.headers.get("x-response-time")||"0");a>5e3&&console.warn(`Slow API response: ${n.url} took ${a}ms`)}return r});Io.addErrorInterceptor(async(r,n)=>(console.error(`API Error for ${n.method} ${n.url}:`,r.message),r));class OS{migrations=[];tableName="schema_migrations";constructor(){this.ensureMigrationsTable()}async ensureMigrationsTable(){try{const{error:n}=await W.rpc("create_migrations_table_if_not_exists");if(n){const{error:a}=await W.from("schema_migrations").select("id").limit(1);a&&a.code==="42P01"&&await this.createMigrationsTable()}}catch(n){console.warn("Could not ensure migrations table:",n)}}async createMigrationsTable(){const{error:n}=await W.rpc("exec_sql",{sql:`
        CREATE TABLE IF NOT EXISTS schema_migrations (
          id VARCHAR(255) PRIMARY KEY,
          version INTEGER NOT NULL,
          applied_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
          checksum VARCHAR(64) NOT NULL,
          execution_time_ms INTEGER
        );
        
        CREATE INDEX IF NOT EXISTS idx_schema_migrations_version 
        ON schema_migrations(version);
      `});n&&console.error("Failed to create migrations table:",n)}register(n){this.migrations.push(n)}getMigrations(){return this.migrations.sort((n,a)=>n.version-a.version)}async getAppliedMigrations(){try{const{data:n,error:a}=await W.from("schema_migrations").select("*").order("version",{ascending:!0});if(a)throw new Je("Failed to fetch applied migrations",a.code,a);return n||[]}catch(n){return console.error("Error fetching applied migrations:",n),[]}}async getPendingMigrations(){const n=await this.getAppliedMigrations(),a=new Set(n.map(s=>s.id));return this.getMigrations().filter(s=>!a.has(s.id))}async canApplyMigration(n){if(!n.dependencies||n.dependencies.length===0)return!0;const a=await this.getAppliedMigrations(),s=new Set(a.map(o=>o.id));return n.dependencies.every(o=>s.has(o))}async applyMigration(n){const a=Date.now();try{if(console.log(`Applying migration: ${n.name} (${n.id})`),!await this.canApplyMigration(n))throw new Error(`Migration ${n.id} has unsatisfied dependencies`);await n.up();const s=this.calculateChecksum(n),o=Date.now()-a,{error:c}=await W.from("schema_migrations").insert({id:n.id,version:n.version,applied_at:new Date().toISOString(),checksum:s,execution_time_ms:o});if(c)throw new Je("Failed to record migration",c.code,c);console.log(`✓ Applied migration: ${n.name} (${o}ms)`)}catch(s){throw console.error(`✗ Failed to apply migration ${n.name}:`,s),s}}async rollbackMigration(n){try{console.log(`Rolling back migration: ${n.name} (${n.id})`),await n.down();const{error:a}=await W.from("schema_migrations").delete().eq("id",n.id);if(a)throw new Je("Failed to remove migration record",a.code,a);console.log(`✓ Rolled back migration: ${n.name}`)}catch(a){throw console.error(`✗ Failed to rollback migration ${n.name}:`,a),a}}calculateChecksum(n){const a=`${n.id}:${n.version}:${n.name}`;let s=0;for(let o=0;o<a.length;o++){const c=a.charCodeAt(o);s=(s<<5)-s+c,s=s&s}return Math.abs(s).toString(16)}async migrate(){const n=await this.getPendingMigrations(),a=[],s=[];console.log(`Found ${n.length} pending migrations`);for(const o of n)try{await this.applyMigration(o),a.push(o.id)}catch(c){s.push(`${o.name}: ${c instanceof Error?c.message:"Unknown error"}`);break}return{applied:a.length,errors:s}}async rollback(n=1){const s=(await this.getAppliedMigrations()).slice(-n).reverse(),o=[],c=[];console.log(`Rolling back ${s.length} migrations`);for(const d of s){const p=this.migrations.find(m=>m.id===d.id);if(!p){c.push(`Migration ${d.id} not found in registered migrations`);continue}try{await this.rollbackMigration(p),o.push(p.id)}catch(m){c.push(`${p.name}: ${m instanceof Error?m.message:"Unknown error"}`);break}}return{rolledBack:o.length,errors:c}}async status(){const n=await this.getAppliedMigrations(),a=this.getMigrations();new Set(n.map(c=>c.id));const s=a.map(c=>{const d=n.find(p=>p.id===c.id);return{id:c.id,name:c.name,version:c.version,status:d?"applied":"pending",applied_at:d?.applied_at}}),o=new Set(a.map(c=>c.id));for(const c of n)o.has(c.id)||s.push({id:c.id,name:"Unknown",version:c.version,status:"missing",applied_at:c.applied_at});return{total:a.length,applied:n.length,pending:a.length-n.length,migrations:s.sort((c,d)=>c.version-d.version)}}async validate(){const n=await this.getAppliedMigrations(),a=[];for(const s of n){const o=this.migrations.find(d=>d.id===s.id);if(!o){a.push(`Applied migration ${s.id} not found in registered migrations`);continue}const c=this.calculateChecksum(o);s.checksum!==c&&a.push(`Migration ${s.id} checksum mismatch`)}return{valid:a.length===0,errors:a}}}const of=new OS;of.register({id:"001_initial_schema",name:"Initial schema setup",version:1,async up(){},async down(){}});of.register({id:"002_plant_details_tables",name:"Add plant details tables",version:2,dependencies:["001_initial_schema"],async up(){},async down(){}});class Es{static instance;database;api;migrations;plantAPI;constructor(){this.database=jS,this.api=Io,this.migrations=of,this.plantAPI=null}static getInstance(){return Es.instance||(Es.instance=new Es),Es.instance}async healthCheck(){const n=await Promise.allSettled([this.database.healthCheck(),this.getAPIRateLimitStatus(),this.getCacheStats()]),[a,s,o]=n.map(d=>d.status==="fulfilled"?d.value:null),c=n.every(d=>d.status==="fulfilled");return{database:a||{healthy:!1,latency:0,error:"Health check failed"},api:s||{healthy:!1,rateLimitStatus:{}},cache:o||{healthy:!1,stats:{}},overall:c}}async getAPIRateLimitStatus(){const n=["trefle.io","api.openweathermap.org"],a={};for(const s of n)a[s]=this.api.getRateLimitStatus(s);return{healthy:!0,rateLimitStatus:a}}async getCacheStats(){const n=ES.getAllStats();return{healthy:Object.values(n).every(a=>a.size>=0),stats:n}}getPerformanceStats(){return Ke.getStats()}clearAllCaches(){dt.invalidateAll()}clearDatabaseCache(){dt.invalidateDatabase()}clearAPICache(){dt.invalidateApi()}async cleanupDatabase(){return this.database.cleanupOrphanedRecords()}async runMigrations(){return this.migrations.migrate()}async getMigrationStatus(){return this.migrations.status()}async rollbackMigrations(n=1){return this.migrations.rollback(n)}async enhancedPlantSearch(n){const a=[];try{const o=await this.database.searchPins(n);a.push(...o.map(c=>({...c,source:"database"})))}catch(o){console.error("Database search failed:",o)}if(this.plantAPI)try{const o=await this.plantAPI.searchPlants(n,5);a.push(...o.map(c=>({...c,source:"api"})))}catch(o){console.error("API search failed:",o)}return this.deduplicateResults(a).slice(0,10)}deduplicateResults(n){const a=new Set;return n.filter(s=>{const o=s.scientific_name||s.name;return a.has(o)?!1:(a.add(o),!0)})}async batchCreatePins(n){return this.database.batchCreatePins(n)}async batchUpdatePins(n){return this.database.batchUpdatePins(n)}async getSystemStats(){const[n,a,s,o]=await Promise.all([this.database.getPinStats(),this.getCacheStats(),Promise.resolve(this.getPerformanceStats()),this.getAPIRateLimitStatus()]);return{database:n,cache:a,performance:s,api:o}}async logError(n,a){console.error(`[${a}] Error:`,n)}getConfig(){return{hasPlantAPI:!!this.plantAPI,hasWeatherAPI:!1,cacheEnabled:!0,retryEnabled:!0}}}const yt=Es.getInstance(),NS={healthCheck:()=>yt.healthCheck(),getBeds:()=>yt.database.getBeds(),getBed:r=>yt.database.getBed(r),getPinsBySection:r=>yt.database.getPinsBySection(r),getPin:r=>yt.database.getPin(r),createPin:r=>yt.database.createPin(r),updatePin:(r,n)=>yt.database.updatePin(r,n),deletePin:r=>yt.database.deletePin(r),searchPlants:r=>yt.enhancedPlantSearch(r),clearCache:()=>yt.clearAllCaches(),getCacheStats:()=>yt.getCacheStats(),getPerformanceStats:()=>yt.getPerformanceStats(),getSystemStats:()=>yt.getSystemStats(),cleanupDatabase:()=>yt.cleanupDatabase(),runMigrations:()=>yt.runMigrations(),getMigrationStatus:()=>yt.getMigrationStatus(),rollbackMigrations:r=>yt.rollbackMigrations(r),getConfig:()=>yt.getConfig(),logError:(r,n)=>yt.logError(r,n)};function lv({onComplete:r}){const n=Lo(),[a,s]=S.useState(0),[o,c]=S.useState({name:"",description:"",type:"front-yard",hasImage:!1}),[d,p]=S.useState(!1),m=A=>{c(j=>({...j,...A}))},g=A=>{const j=A.target.files?.[0];j&&m({imageFile:j,hasImage:!0})},y=async()=>{p(!0);try{console.log("Creating section:",o),o.imageFile&&console.log("Uploading image:",o.imageFile.name),n(`/section/${o.type}`),r&&r()}catch(A){console.error("Error creating section:",A)}finally{p(!1)}},b=[{id:"welcome",title:"Welcome to Your Garden",description:"Let's set up your first garden section to get started",icon:"🌱",component:h.jsxs("div",{className:"onboarding-step-content",children:[h.jsx("div",{className:"welcome-illustration",children:h.jsx("div",{className:"welcome-icon",children:"🌱"})}),h.jsx("h2",{className:"step-title",children:"Welcome to Plants de Louton"}),h.jsx("p",{className:"step-description",children:"Your personal garden management companion. Let's create your first garden section to start tracking and nurturing your plants."}),h.jsxs("div",{className:"feature-highlights",children:[h.jsxs("div",{className:"feature-item",children:[h.jsx("span",{className:"feature-icon",children:"📊"}),h.jsx("span",{children:"Track plant growth and health"})]}),h.jsxs("div",{className:"feature-item",children:[h.jsx("span",{className:"feature-icon",children:"📅"}),h.jsx("span",{children:"Manage care schedules"})]}),h.jsxs("div",{className:"feature-item",children:[h.jsx("span",{className:"feature-icon",children:"📸"}),h.jsx("span",{children:"Document your garden journey"})]})]})]})},{id:"section-type",title:"Choose Your Section Type",description:"What type of garden area are you setting up?",icon:"🏡",component:h.jsxs("div",{className:"onboarding-step-content",children:[h.jsx("div",{className:"section-type-grid",children:[{id:"front-yard",name:"Front Yard",icon:"🏡",description:"Main front garden area"},{id:"back-yard",name:"Back Yard",icon:"🌳",description:"Back garden or patio"},{id:"garden",name:"Garden Plot",icon:"🌿",description:"Dedicated garden space"},{id:"greenhouse",name:"Greenhouse",icon:"🏭",description:"Protected growing space"},{id:"balcony",name:"Balcony",icon:"🏢",description:"Apartment balcony garden"},{id:"custom",name:"Custom",icon:"✨",description:"Other garden area"}].map(A=>h.jsxs("button",{className:`section-type-card ${o.type===A.id?"selected":""}`,onClick:()=>m({type:A.id}),children:[h.jsx("div",{className:"section-type-icon",children:A.icon}),h.jsxs("div",{className:"section-type-info",children:[h.jsx("h3",{className:"section-type-name",children:A.name}),h.jsx("p",{className:"section-type-description",children:A.description})]}),o.type===A.id&&h.jsx("div",{className:"selection-indicator",children:h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M9 12l2 2 4-4"})})})]},A.id))}),o.type==="custom"&&h.jsxs("div",{className:"custom-type-input",children:[h.jsx("label",{htmlFor:"customType",children:"Custom Section Name"}),h.jsx("input",{id:"customType",type:"text",placeholder:"e.g., Rooftop Garden, Community Plot",value:o.customType||"",onChange:A=>m({customType:A.target.value}),className:"custom-type-field"})]})]})},{id:"section-details",title:"Section Details",description:"Tell us about your garden section",icon:"📝",component:h.jsxs("div",{className:"onboarding-step-content",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"sectionName",children:"Section Name"}),h.jsx("input",{id:"sectionName",type:"text",placeholder:"e.g., Main Garden, Vegetable Patch",value:o.name,onChange:A=>m({name:A.target.value}),className:"form-input"})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"sectionDescription",children:"Description (Optional)"}),h.jsx("textarea",{id:"sectionDescription",placeholder:"Tell us about your garden section, what you plan to grow, or any special features...",value:o.description,onChange:A=>m({description:A.target.value}),className:"form-textarea",rows:3})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{className:"form-label",children:"Add a Photo (Optional)"}),h.jsx("div",{className:"image-upload-area",children:o.hasImage?h.jsxs("div",{className:"image-preview",children:[h.jsx("img",{src:o.imageFile?URL.createObjectURL(o.imageFile):"",alt:"Section preview"}),h.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>m({hasImage:!1,imageFile:void 0}),children:"Remove"})]}):h.jsxs("label",{className:"image-upload-label",children:[h.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"image-upload-input"}),h.jsxs("div",{className:"upload-placeholder",children:[h.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),h.jsx("polyline",{points:"7,10 12,15 17,10"}),h.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),h.jsx("span",{children:"Click to upload a photo"}),h.jsx("small",{children:"JPG, PNG up to 5MB"})]})]})})]})]})},{id:"review",title:"Review & Create",description:"Review your section details before creating",icon:"✅",component:h.jsxs("div",{className:"onboarding-step-content",children:[h.jsxs("div",{className:"review-card",children:[h.jsx("div",{className:"review-header",children:h.jsx("h3",{children:"Section Summary"})}),h.jsxs("div",{className:"review-content",children:[h.jsxs("div",{className:"review-item",children:[h.jsx("span",{className:"review-label",children:"Type:"}),h.jsx("span",{className:"review-value",children:o.type==="custom"?o.customType:o.type.replace("-"," ").replace(/\b\w/g,A=>A.toUpperCase())})]}),h.jsxs("div",{className:"review-item",children:[h.jsx("span",{className:"review-label",children:"Name:"}),h.jsx("span",{className:"review-value",children:o.name||"Not specified"})]}),o.description&&h.jsxs("div",{className:"review-item",children:[h.jsx("span",{className:"review-label",children:"Description:"}),h.jsx("span",{className:"review-value",children:o.description})]}),h.jsxs("div",{className:"review-item",children:[h.jsx("span",{className:"review-label",children:"Photo:"}),h.jsx("span",{className:"review-value",children:o.hasImage?"✓ Added":"No photo"})]})]})]}),h.jsxs("div",{className:"next-steps",children:[h.jsx("h4",{children:"What's Next?"}),h.jsxs("div",{className:"next-steps-list",children:[h.jsxs("div",{className:"next-step-item",children:[h.jsx("span",{className:"next-step-icon",children:"1"}),h.jsx("span",{children:"Create your first garden bed"})]}),h.jsxs("div",{className:"next-step-item",children:[h.jsx("span",{className:"next-step-icon",children:"2"}),h.jsx("span",{children:"Add plants to your bed"})]}),h.jsxs("div",{className:"next-step-item",children:[h.jsx("span",{className:"next-step-icon",children:"3"}),h.jsx("span",{children:"Start tracking growth and care"})]})]})]})]})}],w=()=>{switch(a){case 0:return!0;case 1:return o.type&&(o.type!=="custom"||o.customType);case 2:return o.name.trim().length>0;case 3:return!0;default:return!1}},x=()=>{a<b.length-1&&w()&&s(a+1)},T=()=>{a>0&&s(a-1)},C=()=>{r?r():n("/")};return h.jsx("div",{className:"onboarding-overlay",children:h.jsxs("div",{className:"onboarding-modal",children:[h.jsx("div",{className:"onboarding-header",children:h.jsx("button",{className:"skip-btn",onClick:C,disabled:d,children:"Skip for now"})}),h.jsxs("div",{className:"onboarding-progress",children:[h.jsx("div",{className:"progress-bar",children:h.jsx("div",{className:"progress-fill",style:{width:`${(a+1)/b.length*100}%`}})}),h.jsxs("div",{className:"progress-text",children:["Step ",a+1," of ",b.length]})]}),h.jsxs("div",{className:"onboarding-content",children:[h.jsxs("div",{className:"step-header",children:[h.jsx("div",{className:"step-icon",children:b[a].icon}),h.jsxs("div",{className:"step-info",children:[h.jsx("h1",{className:"step-title",children:b[a].title}),h.jsx("p",{className:"step-description",children:b[a].description})]})]}),h.jsx("div",{className:"step-body",children:b[a].component})]}),h.jsx("div",{className:"onboarding-footer",children:h.jsxs("div",{className:"footer-actions",children:[a>0&&h.jsx("button",{className:"btn btn-secondary",onClick:T,disabled:d,children:"Back"}),h.jsx("div",{className:"footer-spacer"}),a<b.length-1?h.jsx("button",{className:"btn btn-primary",onClick:x,disabled:!w()||d,children:"Continue"}):h.jsx("button",{className:"btn btn-primary",onClick:y,disabled:!w()||d,children:d?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"spinner spinner--sm"}),"Creating..."]}):"Create Section"})]})})]})})}function RS(){const r=Lo(),[n,a]=S.useState({totalPlants:0,totalBeds:0,activeSections:0,recentActivity:0}),[s,o]=S.useState(!0),[c,d]=S.useState(!1);S.useEffect(()=>{(async()=>{try{const b=await NS.getBeds(),w=b.filter(j=>j.section==="front-yard"),x=b.filter(j=>j.section==="back-yard"),T=w.length+x.length,C=w.reduce((j,z)=>j+(z.pin_count||0),0)+x.reduce((j,z)=>j+(z.pin_count||0),0),A=[w.length,x.length].filter(j=>j>0).length;a({totalPlants:C,totalBeds:T,activeSections:A,recentActivity:Math.floor(Math.random()*5)+1})}catch(b){console.error("Error loading garden stats:",b),a({totalPlants:0,totalBeds:0,activeSections:0,recentActivity:0})}finally{o(!1)}})()},[]);const p=S.useCallback(y=>{r(`/section/${y}`)},[r]),m=()=>{d(!0)},g=()=>{d(!1),window.location.reload()};return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"landing-page",children:[h.jsx("section",{className:"hero-section",children:h.jsxs("div",{className:"hero-content",children:[h.jsx("h1",{className:"hero-title",children:"Welcome to Your Garden"}),h.jsx("p",{className:"hero-subtitle",children:"Track, manage, and nurture your plants with ease"}),!s&&h.jsxs("div",{className:"hero-stats",children:[h.jsxs("div",{className:"stat-item",children:[h.jsx("span",{className:"stat-number",children:n.totalPlants}),h.jsx("span",{className:"stat-label",children:"Plants"})]}),h.jsxs("div",{className:"stat-item",children:[h.jsx("span",{className:"stat-number",children:n.totalBeds}),h.jsx("span",{className:"stat-label",children:"Beds"})]}),h.jsxs("div",{className:"stat-item",children:[h.jsx("span",{className:"stat-number",children:n.activeSections}),h.jsx("span",{className:"stat-label",children:"Sections"})]}),h.jsxs("div",{className:"stat-item",children:[h.jsx("span",{className:"stat-number",children:n.recentActivity}),h.jsx("span",{className:"stat-label",children:"Recent"})]})]}),n.totalBeds===0&&h.jsxs("div",{className:"hero-cta",children:[h.jsxs("button",{className:"cta-button",onClick:m,children:[h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M12 5v14M5 12h14"})}),"Get Started"]}),h.jsx("p",{className:"cta-subtitle",children:"Set up your first garden section in minutes"})]})]})}),h.jsxs("section",{className:"sections-section",children:[h.jsxs("div",{className:"section-header",children:[h.jsx("h2",{className:"section-title",children:"Garden Sections"}),h.jsx("p",{className:"section-subtitle",children:"Choose a section to explore your garden beds"})]}),h.jsx("div",{className:"sections-grid",children:b1.map(y=>h.jsx("div",{className:"section-card-modern",onClick:()=>p(y.slug),children:h.jsxs("div",{className:"section-card-image",children:[h.jsx("img",{src:y.image,alt:y.label,className:"section-image"}),h.jsx("div",{className:"section-overlay",children:h.jsxs("div",{className:"section-overlay-content",children:[h.jsx("h3",{className:"section-card-title",children:y.label}),h.jsxs("p",{className:"section-card-description",children:["Manage your ",y.label.toLowerCase()," garden beds"]}),h.jsx("div",{className:"section-card-arrow",children:h.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})})]})})]})},y.slug))})]}),h.jsx("section",{className:"quick-actions-section",children:h.jsxs("div",{className:"quick-actions-grid",children:[h.jsxs("button",{className:"quick-action-card",onClick:m,children:[h.jsx("div",{className:"quick-action-icon",children:h.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M12 5v14M5 12h14"})})}),h.jsx("h3",{className:"quick-action-title",children:"Add New Section"}),h.jsx("p",{className:"quick-action-description",children:"Create a new garden section"})]}),h.jsxs("button",{className:"quick-action-card",onClick:()=>r("/section/front-yard"),children:[h.jsx("div",{className:"quick-action-icon",children:h.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),h.jsx("h3",{className:"quick-action-title",children:"Search Plants"}),h.jsx("p",{className:"quick-action-description",children:"Find specific plants"})]}),h.jsxs("button",{className:"quick-action-card",onClick:()=>r("/section/front-yard"),children:[h.jsx("div",{className:"quick-action-icon",children:h.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})}),h.jsx("h3",{className:"quick-action-title",children:"Care Schedule"}),h.jsx("p",{className:"quick-action-description",children:"View upcoming tasks"})]})]})})]}),c&&h.jsx(lv,{onComplete:g})]})}async function kS(r){const{data:n,error:a}=await W.from("beds_latest").select("*").eq("section",r).order("created_at",{ascending:!0});if(a)throw a;return n??[]}function DS({bed:r,sectionSlug:n}){const a=r.image_path?W.storage.from("plant-images").getPublicUrl(r.image_path).data.publicUrl:"",s=(r.pin_count||0)>0;return h.jsxs(Ua,{to:`/section/${n}/bed/${r.id}`,className:"bed-card",children:[h.jsxs("div",{className:"thumb",children:[a?h.jsx("img",{src:a,alt:r.name}):h.jsxs("div",{className:"thumb-empty",children:[h.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:h.jsx("path",{d:"M12 5v14M5 12h14"})}),h.jsx("span",{children:"No image"})]}),h.jsx("div",{className:`bed-status-indicator ${s?"":"inactive"}`}),s&&h.jsxs("div",{className:"plant-count-badge",children:[r.pin_count," plant",r.pin_count!==1?"s":""]})]}),h.jsxs("div",{className:"meta",children:[h.jsx("div",{className:"name",children:r.name}),h.jsx("div",{className:"sub",children:s?h.jsxs("span",{className:"bed-status active",children:[h.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M9 12l2 2 4-4"})}),"Active"]}):h.jsxs("span",{className:"bed-status inactive",children:[h.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("path",{d:"M8 12l8 8M16 12l-8 8"})]}),"Empty"]})})]})]})}const Nt=[];for(let r=0;r<256;++r)Nt.push((r+256).toString(16).slice(1));function MS(r,n=0){return(Nt[r[n+0]]+Nt[r[n+1]]+Nt[r[n+2]]+Nt[r[n+3]]+"-"+Nt[r[n+4]]+Nt[r[n+5]]+"-"+Nt[r[n+6]]+Nt[r[n+7]]+"-"+Nt[r[n+8]]+Nt[r[n+9]]+"-"+Nt[r[n+10]]+Nt[r[n+11]]+Nt[r[n+12]]+Nt[r[n+13]]+Nt[r[n+14]]+Nt[r[n+15]]).toLowerCase()}let wd;const US=new Uint8Array(16);function LS(){if(!wd){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");wd=crypto.getRandomValues.bind(crypto)}return wd(US)}const PS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ey={randomUUID:PS};function qo(r,n,a){if(ey.randomUUID&&!r)return ey.randomUUID();r=r||{};const s=r.random??r.rng?.()??LS();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,MS(s)}const ty="plant-images";function BS({section:r,onClose:n,onCreated:a}){const[s,o]=S.useState(""),[c,d]=S.useState(null),[p,m]=S.useState(!1),[g,y]=S.useState(!1),[b,w]=S.useState(null),x=S.useRef(null),T=S.useRef(null),C=r.replace(/-/g," ").replace(/\b\w/g,B=>B.toUpperCase());async function A(B){const{data:J}=await W.from("beds").select("*").eq("section",r).eq("name",B).maybeSingle();if(J)return J;const{data:ie,error:oe}=await W.from("beds").insert({section:r,name:B}).select("*").single();if(oe||!ie)throw oe??new Error("Failed to create bed");return ie}function j(B){return B.toLowerCase().trim().replace(/[^\w-]+/g,"-").replace(/-+/g,"-")}function z(B){const J=B.name,ie=J.lastIndexOf(".");return ie>=0?J.slice(ie+1):"jpg"}const E=B=>{if(d(B),B){const J=new FileReader;J.onload=ie=>w(ie.target?.result),J.readAsDataURL(B)}else w(null)},I=B=>{B.preventDefault(),B.stopPropagation(),B.type==="dragenter"||B.type==="dragover"?y(!0):B.type==="dragleave"&&y(!1)},V=B=>{if(B.preventDefault(),B.stopPropagation(),y(!1),B.dataTransfer.files&&B.dataTransfer.files[0]){const J=B.dataTransfer.files[0];J.type.startsWith("image/")&&E(J)}},Y=async()=>{if(s.trim()){m(!0);try{const B=await A(s.trim());let J=null,ie="";if(c){const oe=`${j(r)}/${j(s)}/${qo()}.${z(c)}`,{error:de}=await W.storage.from(ty).upload(oe,c,{cacheControl:"3600",upsert:!1,contentType:c.type||"image/jpeg"});if(de)throw de;const{data:_e,error:Ne}=await W.from("bed_images").insert({bed_id:B.id,image_path:oe}).select("*").single();if(Ne||!_e)throw Ne??new Error("Failed to save image");J=_e,ie=W.storage.from(ty).getPublicUrl(oe).data.publicUrl}a({bed:B,image:J,publicUrl:ie}),n()}catch(B){const J=B instanceof Error?B.message:String(B);alert(J)}finally{m(!1)}}};return h.jsx("div",{className:"modal-backdrop",onClick:n,children:h.jsxs("div",{className:"modal modal--large",onClick:B=>B.stopPropagation(),children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("h2",{className:"modal-title",children:"Create New Bed"}),h.jsx("button",{className:"modal-close",onClick:n,"aria-label":"Close",children:h.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),h.jsxs("div",{className:"modal-body",children:[h.jsx("div",{className:"form-section",children:h.jsxs("label",{className:"form-label",children:[h.jsx("span",{className:"form-label-text",children:"Section"}),h.jsx("div",{className:"form-section-badge",children:C})]})}),h.jsx("div",{className:"form-section",children:h.jsxs("label",{className:"form-label",children:[h.jsx("span",{className:"form-label-text",children:"Bed Name"}),h.jsx("input",{ref:x,type:"text",className:"form-input",placeholder:"e.g., Front Garden, Herb Corner, Rose Bed",value:s,onChange:B=>o(B.target.value),onKeyDown:B=>B.key==="Enter"&&Y(),autoFocus:!0})]})}),h.jsxs("div",{className:"form-section",children:[h.jsxs("label",{className:"form-label",children:[h.jsx("span",{className:"form-label-text",children:"Bed Image (Optional)"}),h.jsx("div",{className:"form-hint",children:"Upload an image to get started with pinning plants"})]}),h.jsx("div",{className:`image-upload-area ${g?"drag-active":""} ${b?"has-preview":""}`,onDragEnter:I,onDragLeave:I,onDragOver:I,onDrop:V,children:b?h.jsxs("div",{className:"image-preview",children:[h.jsx("img",{src:b,alt:"Preview"}),h.jsx("button",{className:"image-preview-remove",onClick:()=>E(null),type:"button",children:h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"image-upload-icon",children:h.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[h.jsx("path",{d:"M21 19V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z"}),h.jsx("path",{d:"M8.5 10a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"}),h.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]})}),h.jsxs("div",{className:"image-upload-text",children:[h.jsx("span",{className:"image-upload-primary",children:"Drop an image here"}),h.jsx("span",{className:"image-upload-secondary",children:"or click to browse"})]}),h.jsx("input",{ref:T,type:"file",accept:"image/*",className:"image-upload-input",onChange:B=>E(B.target.files?.[0]??null)})]})})]})]}),h.jsxs("div",{className:"modal-actions",children:[h.jsx("button",{className:"ui-btn ui-btn--secondary",onClick:n,disabled:p,type:"button",children:"Cancel"}),h.jsx("button",{className:"ui-btn ui-btn--primary",disabled:!s.trim()||p,onClick:Y,type:"button",children:p?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"spinner spinner--sm"}),"Creating Bed..."]}):"Create Bed"})]})]})})}function zS(){const{slug:r=""}=My(),[n,a]=S.useState([]),[s,o]=S.useState(!0),[c,d]=S.useState(!1);S.useEffect(()=>{let y=!1;return(async()=>{o(!0);try{const b=await kS(r);y||a(b)}finally{y||o(!1)}})(),()=>{y=!0}},[r]);const p=(r??"").replace(/-/g," "),m=p&&p[0].toUpperCase()+p.slice(1),g=n.reduce((y,b)=>y+(b.pin_count||0),0);return h.jsxs("div",{className:"app-root container",children:[h.jsx("section",{className:"section-hero",children:h.jsxs("div",{className:"section-hero-content",children:[h.jsxs("div",{className:"section-hero-text",children:[h.jsx("h1",{className:"section-hero-title",children:m}),h.jsx("p",{className:"section-hero-subtitle",children:"Manage your garden beds and plant collections in this section"}),!s&&h.jsxs("div",{className:"section-stats",children:[h.jsxs("span",{className:"section-stat",children:[h.jsx("strong",{children:n.length})," bed",n.length!==1?"s":""]}),h.jsxs("span",{className:"section-stat",children:[h.jsx("strong",{children:g})," plant",g!==1?"s":""]})]})]}),h.jsx("div",{className:"section-hero-actions",children:h.jsxs("button",{className:"ui-btn ui-btn--primary ui-btn--lg",onClick:()=>d(!0),children:[h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M12 5v14M5 12h14"})}),"Add New Bed"]})})]})}),h.jsxs("section",{className:"section-content",children:[h.jsxs("div",{className:"content-header",children:[h.jsx("h2",{className:"content-title",children:"Garden Beds"}),h.jsxs("div",{className:"content-meta",children:[h.jsx(Ua,{to:"/",className:"ui-btn ui-btn--sm ui-btn--ghost",children:"All sections"}),s?h.jsx("span",{className:"loading-text",children:"Loading beds..."}):h.jsxs("span",{className:"bed-count",children:[n.length," bed",n.length!==1?"s":""]})]})]}),s?h.jsxs("div",{className:"loading-state",children:[h.jsx("div",{className:"spinner spinner--lg"}),h.jsx("p",{children:"Loading your garden beds..."})]}):n.length===0?h.jsxs("div",{className:"empty-state",children:[h.jsx("div",{className:"empty-state-icon",children:h.jsx("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:h.jsx("path",{d:"M12 5v14M5 12h14"})})}),h.jsx("h3",{className:"empty-state-title",children:"No beds yet"}),h.jsx("p",{className:"empty-state-description",children:"Create your first garden bed to start tracking your plants"}),h.jsx("button",{className:"ui-btn ui-btn--primary",onClick:()=>d(!0),children:"Create Your First Bed"})]}):h.jsx("div",{className:"beds-grid",children:n.map(y=>h.jsx(DS,{bed:y,sectionSlug:r},y.id))})]}),h.jsx("button",{className:"fab",onClick:()=>d(!0),"aria-label":"Add new bed",children:h.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M12 5v14M5 12h14"})})}),c&&h.jsx(BS,{section:r,onClose:()=>d(!1),onCreated:({bed:y})=>window.location.href=`/section/${r}/bed/${y.id}`})]})}async function IS(r){const{data:n,error:a}=await W.from("beds").select("*").eq("id",r).single();if(a)throw console.error("Error fetching bed:",a),a;let s=null;if(n.main_image_id){const{data:p,error:m}=await W.from("bed_images").select("*").eq("id",n.main_image_id).maybeSingle();if(m)throw m;s=p??null}if(!s){const{data:p,error:m}=await W.from("bed_images").select("*").eq("bed_id",r).order("created_at",{ascending:!1}).limit(1);if(m)throw m;s=p?.[0]??null}const{data:o,error:c}=await W.from("pins").select("*").eq("bed_id",r).order("created_at",{ascending:!0});if(c)throw c;let d="";if(s?.image_path){const{data:p}=W.storage.from("plant-images").getPublicUrl(s.image_path);d=p.publicUrl}return{bed:n,image:s,pins:o??[],publicUrl:d}}var Ho=typeof self<"u"?self:global;const Fr=typeof navigator<"u",qS=Fr&&typeof HTMLImageElement>"u",Oo=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),Go=Ho.Buffer,wo=Ho.BigInt,$o=!!Go,HS=r=>r;function No(r,n=HS){if(Oo)try{return typeof require=="function"?Promise.resolve(n(require(r))):import(r).then(n)}catch{console.warn(`Couldn't load ${r}`)}}let cf=Ho.fetch;const GS=r=>cf=r;if(!Ho.fetch){const r=No("http",s=>s),n=No("https",s=>s),a=(s,{headers:o}={})=>new Promise(async(c,d)=>{let{port:p,hostname:m,pathname:g,protocol:y,search:b}=new URL(s);const w={method:"GET",hostname:m,path:encodeURI(g)+b,headers:o};p!==""&&(w.port=Number(p));const x=(y==="https:"?await n:await r).request(w,T=>{if(T.statusCode===301||T.statusCode===302){let C=new URL(T.headers.location,s).toString();return a(C,{headers:o}).then(c).catch(d)}c({status:T.statusCode,arrayBuffer:()=>new Promise(C=>{let A=[];T.on("data",j=>A.push(j)),T.on("end",()=>C(Buffer.concat(A)))})})});x.on("error",d),x.end()});GS(a)}function we(r,n,a){return n in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,r}const Ro=r=>ov(r)?void 0:r,$S=r=>r!==void 0;function ov(r){return r===void 0||(r instanceof Map?r.size===0:Object.values(r).filter($S).length===0)}function ht(r){let n=new Error(r);throw delete n.stack,n}function pi(r){return(r=function(n){for(;n.endsWith("\0");)n=n.slice(0,-1);return n}(r).trim())===""?void 0:r}function qd(r){let n=function(a){let s=0;return a.ifd0.enabled&&(s+=1024),a.exif.enabled&&(s+=2048),a.makerNote&&(s+=2048),a.userComment&&(s+=1024),a.gps.enabled&&(s+=512),a.interop.enabled&&(s+=100),a.ifd1.enabled&&(s+=1024),s+2048}(r);return r.jfif.enabled&&(n+=50),r.xmp.enabled&&(n+=2e4),r.iptc.enabled&&(n+=14e3),r.icc.enabled&&(n+=6e3),n}const Hd=r=>String.fromCharCode.apply(null,r),ny=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function cv(r){return ny?ny.decode(r):$o?Buffer.from(r).toString("utf8"):decodeURIComponent(escape(Hd(r)))}class Yt{static from(n,a){return n instanceof this&&n.le===a?n:new Yt(n,void 0,void 0,a)}constructor(n,a=0,s,o){if(typeof o=="boolean"&&(this.le=o),Array.isArray(n)&&(n=new Uint8Array(n)),n===0)this.byteOffset=0,this.byteLength=0;else if(n instanceof ArrayBuffer){s===void 0&&(s=n.byteLength-a);let c=new DataView(n,a,s);this._swapDataView(c)}else if(n instanceof Uint8Array||n instanceof DataView||n instanceof Yt){s===void 0&&(s=n.byteLength-a),(a+=n.byteOffset)+s>n.byteOffset+n.byteLength&&ht("Creating view outside of available memory in ArrayBuffer");let c=new DataView(n.buffer,a,s);this._swapDataView(c)}else if(typeof n=="number"){let c=new DataView(new ArrayBuffer(n));this._swapDataView(c)}else ht("Invalid input argument for BufferView: "+n)}_swapArrayBuffer(n){this._swapDataView(new DataView(n))}_swapBuffer(n){this._swapDataView(new DataView(n.buffer,n.byteOffset,n.byteLength))}_swapDataView(n){this.dataView=n,this.buffer=n.buffer,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength}_lengthToEnd(n){return this.byteLength-n}set(n,a,s=Yt){return n instanceof DataView||n instanceof Yt?n=new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n instanceof ArrayBuffer&&(n=new Uint8Array(n)),n instanceof Uint8Array||ht("BufferView.set(): Invalid data argument."),this.toUint8().set(n,a),new s(this,a,n.byteLength)}subarray(n,a){return a=a||this._lengthToEnd(n),new Yt(this,n,a)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(n,a){return new Uint8Array(this.buffer,this.byteOffset+n,a)}getString(n=0,a=this.byteLength){return cv(this.getUint8Array(n,a))}getLatin1String(n=0,a=this.byteLength){let s=this.getUint8Array(n,a);return Hd(s)}getUnicodeString(n=0,a=this.byteLength){const s=[];for(let o=0;o<a&&n+o<this.byteLength;o+=2)s.push(this.getUint16(n+o));return Hd(s)}getInt8(n){return this.dataView.getInt8(n)}getUint8(n){return this.dataView.getUint8(n)}getInt16(n,a=this.le){return this.dataView.getInt16(n,a)}getInt32(n,a=this.le){return this.dataView.getInt32(n,a)}getUint16(n,a=this.le){return this.dataView.getUint16(n,a)}getUint32(n,a=this.le){return this.dataView.getUint32(n,a)}getFloat32(n,a=this.le){return this.dataView.getFloat32(n,a)}getFloat64(n,a=this.le){return this.dataView.getFloat64(n,a)}getFloat(n,a=this.le){return this.dataView.getFloat32(n,a)}getDouble(n,a=this.le){return this.dataView.getFloat64(n,a)}getUintBytes(n,a,s){switch(a){case 1:return this.getUint8(n,s);case 2:return this.getUint16(n,s);case 4:return this.getUint32(n,s);case 8:return this.getUint64&&this.getUint64(n,s)}}getUint(n,a,s){switch(a){case 8:return this.getUint8(n,s);case 16:return this.getUint16(n,s);case 32:return this.getUint32(n,s);case 64:return this.getUint64&&this.getUint64(n,s)}}toString(n){return this.dataView.toString(n,this.constructor.name)}ensureChunk(){}}function Gd(r,n){ht(`${r} '${n}' was not loaded, try using full build of exifr.`)}class uf extends Map{constructor(n){super(),this.kind=n}get(n,a){return this.has(n)||Gd(this.kind,n),a&&(n in a||function(s,o){ht(`Unknown ${s} '${o}'.`)}(this.kind,n),a[n].enabled||Gd(this.kind,n)),super.get(n)}keyList(){return Array.from(this.keys())}}var Ln=new uf("file parser"),ft=new uf("segment parser"),Pn=new uf("file reader");function VS(r,n){return typeof r=="string"?ay(r,n):Fr&&!qS&&r instanceof HTMLImageElement?ay(r.src,n):r instanceof Uint8Array||r instanceof ArrayBuffer||r instanceof DataView?new Yt(r):Fr&&r instanceof Blob?$d(r,n,"blob",bi):void ht("Invalid input argument")}function ay(r,n){return(a=r).startsWith("data:")||a.length>1e4?Vd(r,n,"base64"):Oo&&r.includes("://")?$d(r,n,"url",vi):Oo?Vd(r,n,"fs"):Fr?$d(r,n,"url",vi):void ht("Invalid input argument");var a}async function $d(r,n,a,s){return Pn.has(a)?Vd(r,n,a):s?async function(o,c){let d=await c(o);return new Yt(d)}(r,s):void ht(`Parser ${a} is not loaded`)}async function Vd(r,n,a){let s=new(Pn.get(a))(r,n);return await s.read(),s}const vi=r=>cf(r).then(n=>n.arrayBuffer()),bi=r=>new Promise((n,a)=>{let s=new FileReader;s.onloadend=()=>n(s.result||new ArrayBuffer),s.onerror=a,s.readAsArrayBuffer(r)});class FS extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function lt(r,n,a){let s=new FS;for(let[o,c]of a)s.set(o,c);if(Array.isArray(n))for(let o of n)r.set(o,s);else r.set(n,s);return s}function wi(r,n,a){let s,o=r.get(n);for(s of a)o.set(s[0],s[1])}const Et=new Map,Cn=new Map,Ia=new Map,La=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Ds=["jfif","xmp","icc","iptc","ihdr"],_i=["tiff",...Ds],at=["ifd0","ifd1","exif","gps","interop"],Pa=[..._i,...at],Ba=["makerNote","userComment"],Ms=["translateKeys","translateValues","reviveValues","multiSegment"],za=[...Ms,"sanitize","mergeOutput","silentErrors"];class uv{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Lr extends uv{get needed(){return this.enabled||this.deps.size>0}constructor(n,a,s,o){if(super(),we(this,"enabled",!1),we(this,"skip",new Set),we(this,"pick",new Set),we(this,"deps",new Set),we(this,"translateKeys",!1),we(this,"translateValues",!1),we(this,"reviveValues",!1),this.key=n,this.enabled=a,this.parse=this.enabled,this.applyInheritables(o),this.canBeFiltered=at.includes(n),this.canBeFiltered&&(this.dict=Et.get(n)),s!==void 0)if(Array.isArray(s))this.parse=this.enabled=!0,this.canBeFiltered&&s.length>0&&this.translateTagSet(s,this.pick);else if(typeof s=="object"){if(this.enabled=!0,this.parse=s.parse!==!1,this.canBeFiltered){let{pick:c,skip:d}=s;c&&c.length>0&&this.translateTagSet(c,this.pick),d&&d.length>0&&this.translateTagSet(d,this.skip)}this.applyInheritables(s)}else s===!0||s===!1?this.parse=this.enabled=s:ht(`Invalid options argument: ${s}`)}applyInheritables(n){let a,s;for(a of Ms)s=n[a],s!==void 0&&(this[a]=s)}translateTagSet(n,a){if(this.dict){let s,o,{tagKeys:c,tagValues:d}=this.dict;for(s of n)typeof s=="string"?(o=d.indexOf(s),o===-1&&(o=c.indexOf(Number(s))),o!==-1&&a.add(Number(c[o]))):a.add(s)}else for(let s of n)a.add(s)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ko(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ko(this.pick,this.deps)}}var zt={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},iy=new Map;class Ti extends uv{static useCached(n){let a=iy.get(n);return a!==void 0||(a=new this(n),iy.set(n,a)),a}constructor(n){super(),n===!0?this.setupFromTrue():n===void 0?this.setupFromUndefined():Array.isArray(n)?this.setupFromArray(n):typeof n=="object"?this.setupFromObject(n):ht(`Invalid options argument ${n}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Fr?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let n;for(n of La)this[n]=zt[n];for(n of za)this[n]=zt[n];for(n of Ba)this[n]=zt[n];for(n of Pa)this[n]=new Lr(n,zt[n],void 0,this)}setupFromTrue(){let n;for(n of La)this[n]=zt[n];for(n of za)this[n]=zt[n];for(n of Ba)this[n]=!0;for(n of Pa)this[n]=new Lr(n,!0,void 0,this)}setupFromArray(n){let a;for(a of La)this[a]=zt[a];for(a of za)this[a]=zt[a];for(a of Ba)this[a]=zt[a];for(a of Pa)this[a]=new Lr(a,!1,void 0,this);this.setupGlobalFilters(n,void 0,at)}setupFromObject(n){let a;for(a of(at.ifd0=at.ifd0||at.image,at.ifd1=at.ifd1||at.thumbnail,Object.assign(this,n),La))this[a]=_d(n[a],zt[a]);for(a of za)this[a]=_d(n[a],zt[a]);for(a of Ba)this[a]=_d(n[a],zt[a]);for(a of _i)this[a]=new Lr(a,zt[a],n[a],this);for(a of at)this[a]=new Lr(a,zt[a],n[a],this.tiff);this.setupGlobalFilters(n.pick,n.skip,at,Pa),n.tiff===!0?this.batchEnableWithBool(at,!0):n.tiff===!1?this.batchEnableWithUserValue(at,n):Array.isArray(n.tiff)?this.setupGlobalFilters(n.tiff,void 0,at):typeof n.tiff=="object"&&this.setupGlobalFilters(n.tiff.pick,n.tiff.skip,at)}batchEnableWithBool(n,a){for(let s of n)this[s].enabled=a}batchEnableWithUserValue(n,a){for(let s of n){let o=a[s];this[s].enabled=o!==!1&&o!==void 0}}setupGlobalFilters(n,a,s,o=s){if(n&&n.length){for(let d of o)this[d].enabled=!1;let c=sy(n,s);for(let[d,p]of c)ko(this[d].pick,p),this[d].enabled=!0}else if(a&&a.length){let c=sy(a,s);for(let[d,p]of c)ko(this[d].skip,p)}}filterNestedSegmentTags(){let{ifd0:n,exif:a,xmp:s,iptc:o,icc:c}=this;this.makerNote?a.deps.add(37500):a.skip.add(37500),this.userComment?a.deps.add(37510):a.skip.add(37510),s.enabled||n.skip.add(700),o.enabled||n.skip.add(33723),c.enabled||n.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:n,exif:a,gps:s,interop:o}=this;o.needed&&(a.deps.add(40965),n.deps.add(40965)),a.needed&&n.deps.add(34665),s.needed&&n.deps.add(34853),this.tiff.enabled=at.some(c=>this[c].enabled===!0)||this.makerNote||this.userComment;for(let c of at)this[c].finalizeFilters()}get onlyTiff(){return!Ds.map(n=>this[n].enabled).some(n=>n===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let n of _i)this[n].enabled&&!ft.has(n)&&Gd("segment parser",n)}}function sy(r,n){let a,s,o,c,d=[];for(o of n){for(c of(a=Et.get(o),s=[],a))(r.includes(c[0])||r.includes(c[1]))&&s.push(c[0]);s.length&&d.push([o,s])}return d}function _d(r,n){return r!==void 0?r:n!==void 0?n:void 0}function ko(r,n){for(let a of n)r.add(a)}we(Ti,"default",zt);class Ga{constructor(n){we(this,"parsers",{}),we(this,"output",{}),we(this,"errors",[]),we(this,"pushToErrors",a=>this.errors.push(a)),this.options=Ti.useCached(n)}async read(n){this.file=await VS(n,this.options)}setup(){if(this.fileParser)return;let{file:n}=this,a=n.getUint16(0);for(let[s,o]of Ln)if(o.canHandle(n,a))return this.fileParser=new o(this.options,this.file,this.parsers),n[s]=!0;this.file.close&&this.file.close(),ht("Unknown file format")}async parse(){let{output:n,errors:a}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),a.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&a.length>0&&(n.errors=a),Ro(n)}async executeParsers(){let{output:n}=this;await this.fileParser.parse();let a=Object.values(this.parsers).map(async s=>{let o=await s.parse();s.assignToOutput(n,o)});this.options.silentErrors&&(a=a.map(s=>s.catch(this.pushToErrors))),await Promise.all(a)}async extractThumbnail(){this.setup();let{options:n,file:a}=this,s=ft.get("tiff",n);var o;if(a.tiff?o={start:0,type:"tiff"}:a.jpeg&&(o=await this.fileParser.getOrFindSegment("tiff")),o===void 0)return;let c=await this.fileParser.ensureSegmentChunk(o),d=this.parsers.tiff=new s(c,n,a),p=await d.extractThumbnail();return a.close&&a.close(),p}}async function Vo(r,n){let a=new Ga(n);return await a.read(r),a.parse()}var YS=Object.freeze({__proto__:null,parse:Vo,Exifr:Ga,fileParsers:Ln,segmentParsers:ft,fileReaders:Pn,tagKeys:Et,tagValues:Cn,tagRevivers:Ia,createDictionary:lt,extendDictionary:wi,fetchUrlAsArrayBuffer:vi,readBlobAsArrayBuffer:bi,chunkedProps:La,otherSegments:Ds,segments:_i,tiffBlocks:at,segmentsAndBlocks:Pa,tiffExtractables:Ba,inheritables:Ms,allFormatters:za,Options:Ti});class Fo{constructor(n,a,s){we(this,"errors",[]),we(this,"ensureSegmentChunk",async o=>{let c=o.start,d=o.size||65536;if(this.file.chunked)if(this.file.available(c,d))o.chunk=this.file.subarray(c,d);else try{o.chunk=await this.file.readChunk(c,d)}catch(p){ht(`Couldn't read segment: ${JSON.stringify(o)}. ${p.message}`)}else this.file.byteLength>c+d?o.chunk=this.file.subarray(c,d):o.size===void 0?o.chunk=this.file.subarray(c):ht("Segment unreachable: "+JSON.stringify(o));return o.chunk}),this.extendOptions&&this.extendOptions(n),this.options=n,this.file=a,this.parsers=s}injectSegment(n,a){this.options[n].enabled&&this.createParser(n,a)}createParser(n,a){let s=new(ft.get(n))(a,this.options,this.file);return this.parsers[n]=s}createParsers(n){for(let a of n){let{type:s,chunk:o}=a,c=this.options[s];if(c&&c.enabled){let d=this.parsers[s];d&&d.append||d||this.createParser(s,o)}}}async readSegments(n){let a=n.map(this.ensureSegmentChunk);await Promise.all(a)}}class xn{static findPosition(n,a){let s=n.getUint16(a+2)+2,o=typeof this.headerLength=="function"?this.headerLength(n,a,s):this.headerLength,c=a+o,d=s-o;return{offset:a,length:s,headerLength:o,start:c,size:d,end:c+d}}static parse(n,a={}){return new this(n,new Ti({[this.type]:a}),n).parse()}normalizeInput(n){return n instanceof Yt?n:new Yt(n)}constructor(n,a={},s){we(this,"errors",[]),we(this,"raw",new Map),we(this,"handleError",o=>{if(!this.options.silentErrors)throw o;this.errors.push(o.message)}),this.chunk=this.normalizeInput(n),this.file=s,this.type=this.constructor.type,this.globalOptions=this.options=a,this.localOptions=a[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(n,a){let s=Ia.get(a),o=Cn.get(a),c=Et.get(a),d=this.options[a],p=d.reviveValues&&!!s,m=d.translateValues&&!!o,g=d.translateKeys&&!!c,y={};for(let[b,w]of n)p&&s.has(b)?w=s.get(b)(w):m&&o.has(b)&&(w=this.translateValue(w,o.get(b))),g&&c.has(b)&&(b=c.get(b)||b),y[b]=w;return y}translateValue(n,a){return a[n]||a.DEFAULT||n}assignToOutput(n,a){this.assignObjectToOutput(n,this.constructor.type,a)}assignObjectToOutput(n,a,s){if(this.globalOptions.mergeOutput)return Object.assign(n,s);n[a]?Object.assign(n[a],s):n[a]=s}}we(xn,"headerLength",4),we(xn,"type",void 0),we(xn,"multiSegment",!1),we(xn,"canHandle",()=>!1);function KS(r){return r===192||r===194||r===196||r===219||r===221||r===218||r===254}function XS(r){return r>=224&&r<=239}function QS(r,n,a){for(let[s,o]of ft)if(o.canHandle(r,n,a))return s}class ry extends Fo{constructor(...n){super(...n),we(this,"appSegments",[]),we(this,"jpegSegments",[]),we(this,"unknownSegments",[])}static canHandle(n,a){return a===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(n){n===!0?(this.findAll=!0,this.wanted=new Set(ft.keyList())):(n=n===void 0?ft.keyList().filter(a=>this.options[a].enabled):n.filter(a=>this.options[a].enabled&&ft.has(a)),this.findAll=!1,this.remaining=new Set(n),this.wanted=new Set(n)),this.unfinishedMultiSegment=!1}async findAppSegments(n=0,a){this.setupSegmentFinderArgs(a);let{file:s,findAll:o,wanted:c,remaining:d}=this;if(!o&&this.file.chunked&&(o=Array.from(c).some(p=>{let m=ft.get(p),g=this.options[p];return m.multiSegment&&g.multiSegment}),o&&await this.file.readWhole()),n=this.findAppSegmentsInRange(n,s.byteLength),!this.options.onlyTiff&&s.chunked){let p=!1;for(;d.size>0&&!p&&(s.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:m}=s,g=this.appSegments.some(y=>!this.file.available(y.offset||y.start,y.length||y.size));if(p=n>m&&!g?!await s.readNextChunk(n):!await s.readNextChunk(m),(n=this.findAppSegmentsInRange(n,s.byteLength))===void 0)return}}}findAppSegmentsInRange(n,a){a-=2;let s,o,c,d,p,m,{file:g,findAll:y,wanted:b,remaining:w,options:x}=this;for(;n<a;n++)if(g.getUint8(n)===255){if(s=g.getUint8(n+1),XS(s)){if(o=g.getUint16(n+2),c=QS(g,n,o),c&&b.has(c)&&(d=ft.get(c),p=d.findPosition(g,n),m=x[c],p.type=c,this.appSegments.push(p),!y&&(d.multiSegment&&m.multiSegment?(this.unfinishedMultiSegment=p.chunkNumber<p.chunkCount,this.unfinishedMultiSegment||w.delete(c)):w.delete(c),w.size===0)))break;x.recordUnknownSegments&&(p=xn.findPosition(g,n),p.marker=s,this.unknownSegments.push(p)),n+=o+1}else if(KS(s)){if(o=g.getUint16(n+2),s===218&&x.stopAfterSos!==!1)return;x.recordJpegSegments&&this.jpegSegments.push({offset:n,length:o,marker:s}),n+=o+1}}return n}mergeMultiSegments(){if(!this.appSegments.some(a=>a.multiSegment))return;let n=function(a,s){let o,c,d,p=new Map;for(let m=0;m<a.length;m++)o=a[m],c=o[s],p.has(c)?d=p.get(c):p.set(c,d=[]),d.push(o);return Array.from(p)}(this.appSegments,"type");this.mergedAppSegments=n.map(([a,s])=>{let o=ft.get(a,this.options);return o.handleMultiSegments?{type:a,chunk:o.handleMultiSegments(s)}:s[0]})}getSegment(n){return this.appSegments.find(a=>a.type===n)}async getOrFindSegment(n){let a=this.getSegment(n);return a===void 0&&(await this.findAppSegments(0,[n]),a=this.getSegment(n)),a}}we(ry,"type","jpeg"),Ln.set("jpeg",ry);const ZS=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class JS extends xn{parseHeader(){var n=this.chunk.getUint16();n===18761?this.le=!0:n===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(n,a,s=new Map){let{pick:o,skip:c}=this.options[a];o=new Set(o);let d=o.size>0,p=c.size===0,m=this.chunk.getUint16(n);n+=2;for(let g=0;g<m;g++){let y=this.chunk.getUint16(n);if(d){if(o.has(y)&&(s.set(y,this.parseTag(n,y,a)),o.delete(y),o.size===0))break}else!p&&c.has(y)||s.set(y,this.parseTag(n,y,a));n+=12}return s}parseTag(n,a,s){let{chunk:o}=this,c=o.getUint16(n+2),d=o.getUint32(n+4),p=ZS[c];if(p*d<=4?n+=8:n=o.getUint32(n+8),(c<1||c>13)&&ht(`Invalid TIFF value type. block: ${s.toUpperCase()}, tag: ${a.toString(16)}, type: ${c}, offset ${n}`),n>o.byteLength&&ht(`Invalid TIFF value offset. block: ${s.toUpperCase()}, tag: ${a.toString(16)}, type: ${c}, offset ${n} is outside of chunk size ${o.byteLength}`),c===1)return o.getUint8Array(n,d);if(c===2)return pi(o.getString(n,d));if(c===7)return o.getUint8Array(n,d);if(d===1)return this.parseTagValue(c,n);{let m=new(function(y){switch(y){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(c))(d),g=p;for(let y=0;y<d;y++)m[y]=this.parseTagValue(c,n),n+=g;return m}}parseTagValue(n,a){let{chunk:s}=this;switch(n){case 1:return s.getUint8(a);case 3:return s.getUint16(a);case 4:return s.getUint32(a);case 5:return s.getUint32(a)/s.getUint32(a+4);case 6:return s.getInt8(a);case 8:return s.getInt16(a);case 9:return s.getInt32(a);case 10:return s.getInt32(a)/s.getInt32(a+4);case 11:return s.getFloat(a);case 12:return s.getDouble(a);case 13:return s.getUint32(a);default:ht(`Invalid tiff type ${n}`)}}}class Sd extends JS{static canHandle(n,a){return n.getUint8(a+1)===225&&n.getUint32(a+4)===1165519206&&n.getUint16(a+8)===0}async parse(){this.parseHeader();let{options:n}=this;return n.ifd0.enabled&&await this.parseIfd0Block(),n.exif.enabled&&await this.safeParse("parseExifBlock"),n.gps.enabled&&await this.safeParse("parseGpsBlock"),n.interop.enabled&&await this.safeParse("parseInteropBlock"),n.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(n){let a=this[n]();return a.catch!==void 0&&(a=a.catch(this.handleError)),a}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let n=this.chunk.getUint16(this.ifd0Offset),a=this.ifd0Offset+2+12*n;this.ifd1Offset=this.chunk.getUint32(a)}}parseBlock(n,a){let s=new Map;return this[a]=s,this.parseTags(n,a,s),s}async parseIfd0Block(){if(this.ifd0)return;let{file:n}=this;this.findIfd0Offset(),this.ifd0Offset<8&&ht("Malformed EXIF data"),!n.chunked&&this.ifd0Offset>n.byteLength&&ht(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${n.byteLength}`),n.tiff&&await n.ensureChunk(this.ifd0Offset,qd(this.options));let a=this.parseBlock(this.ifd0Offset,"ifd0");return a.size!==0?(this.exifOffset=a.get(34665),this.interopOffset=a.get(40965),this.gpsOffset=a.get(34853),this.xmp=a.get(700),this.iptc=a.get(33723),this.icc=a.get(34675),this.options.sanitize&&(a.delete(34665),a.delete(40965),a.delete(34853),a.delete(700),a.delete(33723),a.delete(34675)),a):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,qd(this.options));let n=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=n.get(40965)),this.makerNote=n.get(37500),this.userComment=n.get(37510),this.options.sanitize&&(n.delete(40965),n.delete(37500),n.delete(37510)),this.unpack(n,41728),this.unpack(n,41729),n}unpack(n,a){let s=n.get(a);s&&s.length===1&&n.set(a,s[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let n=this.parseBlock(this.gpsOffset,"gps");return n&&n.has(2)&&n.has(4)&&(n.set("latitude",ly(...n.get(2),n.get(1))),n.set("longitude",ly(...n.get(4),n.get(3)))),n}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(n=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||n))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let n=this.ifd1.get(513),a=this.ifd1.get(514);return this.chunk.getUint8Array(n,a)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let n,a,s,o={};for(a of at)if(n=this[a],!ov(n))if(s=this.canTranslate?this.translateBlock(n,a):Object.fromEntries(n),this.options.mergeOutput){if(a==="ifd1")continue;Object.assign(o,s)}else o[a]=s;return this.makerNote&&(o.makerNote=this.makerNote),this.userComment&&(o.userComment=this.userComment),o}assignToOutput(n,a){if(this.globalOptions.mergeOutput)Object.assign(n,a);else for(let[s,o]of Object.entries(a))this.assignObjectToOutput(n,s,o)}}function ly(r,n,a,s){var o=r+n/60+a/3600;return s!=="S"&&s!=="W"||(o*=-1),o}we(Sd,"type","tiff"),we(Sd,"headerLength",10),ft.set("tiff",Sd);var WS=Object.freeze({__proto__:null,default:YS,Exifr:Ga,fileParsers:Ln,segmentParsers:ft,fileReaders:Pn,tagKeys:Et,tagValues:Cn,tagRevivers:Ia,createDictionary:lt,extendDictionary:wi,fetchUrlAsArrayBuffer:vi,readBlobAsArrayBuffer:bi,chunkedProps:La,otherSegments:Ds,segments:_i,tiffBlocks:at,segmentsAndBlocks:Pa,tiffExtractables:Ba,inheritables:Ms,allFormatters:za,Options:Ti,parse:Vo});const df={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},ff=Object.assign({},df,{firstChunkSize:4e4,gps:[1,2,3,4]});async function dv(r){let n=new Ga(ff);await n.read(r);let a=await n.parse();if(a&&a.gps){let{latitude:s,longitude:o}=a.gps;return{latitude:s,longitude:o}}}const hf=Object.assign({},df,{tiff:!1,ifd1:!0,mergeOutput:!1});async function fv(r){let n=new Ga(hf);await n.read(r);let a=await n.extractThumbnail();return a&&$o?Go.from(a):a}async function hv(r){let n=await this.thumbnail(r);if(n!==void 0){let a=new Blob([n]);return URL.createObjectURL(a)}}const mf=Object.assign({},df,{firstChunkSize:4e4,ifd0:[274]});async function pf(r){let n=new Ga(mf);await n.read(r);let a=await n.parse();if(a&&a.ifd0)return a.ifd0[274]}const gf=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let gi=!0,yi=!0;if(typeof navigator=="object"){let r=navigator.userAgent;if(r.includes("iPad")||r.includes("iPhone")){let n=r.match(/OS (\d+)_(\d+)/);if(n){let[,a,s]=n;gi=Number(a)+.1*Number(s)<13.4,yi=!1}}else if(r.includes("OS X 10")){let[,n]=r.match(/OS X 10[_.](\d+)/);gi=yi=Number(n)<15}if(r.includes("Chrome/")){let[,n]=r.match(/Chrome\/(\d+)/);gi=yi=Number(n)<81}else if(r.includes("Firefox/")){let[,n]=r.match(/Firefox\/(\d+)/);gi=yi=Number(n)<77}}async function mv(r){let n=await pf(r);return Object.assign({canvas:gi,css:yi},gf[n])}class ex extends Yt{constructor(...n){super(...n),we(this,"ranges",new tx),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(n,a,s){if(n===0&&this.byteLength===0&&s){let o=new DataView(s.buffer||s,s.byteOffset,s.byteLength);this._swapDataView(o)}else{let o=n+a;if(o>this.byteLength){let{dataView:c}=this._extend(o);this._swapDataView(c)}}}_extend(n){let a;a=$o?Go.allocUnsafe(n):new Uint8Array(n);let s=new DataView(a.buffer,a.byteOffset,a.byteLength);return a.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:a,dataView:s}}subarray(n,a,s=!1){return a=a||this._lengthToEnd(n),s&&this._tryExtend(n,a),this.ranges.add(n,a),super.subarray(n,a)}set(n,a,s=!1){s&&this._tryExtend(a,n.byteLength,n);let o=super.set(n,a);return this.ranges.add(a,o.byteLength),o}async ensureChunk(n,a){this.chunked&&(this.ranges.available(n,a)||await this.readChunk(n,a))}available(n,a){return this.ranges.available(n,a)}}class tx{constructor(){we(this,"list",[])}get length(){return this.list.length}add(n,a,s=0){let o=n+a,c=this.list.filter(d=>oy(n,d.offset,o)||oy(n,d.end,o));if(c.length>0){n=Math.min(n,...c.map(p=>p.offset)),o=Math.max(o,...c.map(p=>p.end)),a=o-n;let d=c.shift();d.offset=n,d.length=a,d.end=o,this.list=this.list.filter(p=>!c.includes(p))}else this.list.push({offset:n,length:a,end:o})}available(n,a){let s=n+a;return this.list.some(o=>o.offset<=n&&s<=o.end)}}function oy(r,n,a){return r<=n&&n<=a}class Yo extends ex{constructor(n,a){super(0),we(this,"chunksRead",0),this.input=n,this.options=a}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(n=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let a=this.options.chunkSize,s=await this.readChunk(n,a);return!!s&&s.byteLength===a}async readChunk(n,a){if(this.chunksRead++,(a=this.safeWrapAddress(n,a))!==0)return this._readChunk(n,a)}safeWrapAddress(n,a){return this.size!==void 0&&n+a>this.size?Math.max(0,this.size-n):a}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}Pn.set("blob",class extends Yo{async readWhole(){this.chunked=!1;let r=await bi(this.input);this._swapArrayBuffer(r)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(r,n){let a=n?r+n:void 0,s=this.input.slice(r,a),o=await bi(s);return this.set(o,r,!0)}});var nx=Object.freeze({__proto__:null,default:WS,Exifr:Ga,fileParsers:Ln,segmentParsers:ft,fileReaders:Pn,tagKeys:Et,tagValues:Cn,tagRevivers:Ia,createDictionary:lt,extendDictionary:wi,fetchUrlAsArrayBuffer:vi,readBlobAsArrayBuffer:bi,chunkedProps:La,otherSegments:Ds,segments:_i,tiffBlocks:at,segmentsAndBlocks:Pa,tiffExtractables:Ba,inheritables:Ms,allFormatters:za,Options:Ti,parse:Vo,gpsOnlyOptions:ff,gps:dv,thumbnailOnlyOptions:hf,thumbnail:fv,thumbnailUrl:hv,orientationOnlyOptions:mf,orientation:pf,rotations:gf,get rotateCanvas(){return gi},get rotateCss(){return yi},rotation:mv});Pn.set("url",class extends Yo{async readWhole(){this.chunked=!1;let r=await vi(this.input);r instanceof ArrayBuffer?this._swapArrayBuffer(r):r instanceof Uint8Array&&this._swapBuffer(r)}async _readChunk(r,n){let a=n?r+n-1:void 0,s=this.options.httpHeaders||{};(r||a)&&(s.range=`bytes=${[r,a].join("-")}`);let o=await cf(this.input,{headers:s}),c=await o.arrayBuffer(),d=c.byteLength;if(o.status!==416)return d!==n&&(this.size=r+d),this.set(c,r,!0)}});Yt.prototype.getUint64=function(r){let n=this.getUint32(r),a=this.getUint32(r+4);return n<1048575?n<<32|a:typeof wo!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),wo(n)<<wo(32)|wo(a)):void ht("Trying to read 64b value but JS can only handle 53b numbers.")};class ax extends Fo{parseBoxes(n=0){let a=[];for(;n<this.file.byteLength-4;){let s=this.parseBoxHead(n);if(a.push(s),s.length===0)break;n+=s.length}return a}parseSubBoxes(n){n.boxes=this.parseBoxes(n.start)}findBox(n,a){return n.boxes===void 0&&this.parseSubBoxes(n),n.boxes.find(s=>s.kind===a)}parseBoxHead(n){let a=this.file.getUint32(n),s=this.file.getString(n+4,4),o=n+8;return a===1&&(a=this.file.getUint64(n+8),o+=8),{offset:n,length:a,kind:s,start:o}}parseBoxFullHead(n){if(n.version!==void 0)return;let a=this.file.getUint32(n.start);n.version=a>>24,n.start+=4}}class pv extends ax{static canHandle(n,a){if(a!==0)return!1;let s=n.getUint16(2);if(s>50)return!1;let o=16,c=[];for(;o<s;)c.push(n.getString(o,4)),o+=4;return c.includes(this.type)}async parse(){let n=this.file.getUint32(0),a=this.parseBoxHead(n);for(;a.kind!=="meta";)n+=a.length,await this.file.ensureChunk(n,16),a=this.parseBoxHead(n);await this.file.ensureChunk(a.offset,a.length),this.parseBoxFullHead(a),this.parseSubBoxes(a),this.options.icc.enabled&&await this.findIcc(a),this.options.tiff.enabled&&await this.findExif(a)}async registerSegment(n,a,s){await this.file.ensureChunk(a,s);let o=this.file.subarray(a,s);this.createParser(n,o)}async findIcc(n){let a=this.findBox(n,"iprp");if(a===void 0)return;let s=this.findBox(a,"ipco");if(s===void 0)return;let o=this.findBox(s,"colr");o!==void 0&&await this.registerSegment("icc",o.offset+12,o.length)}async findExif(n){let a=this.findBox(n,"iinf");if(a===void 0)return;let s=this.findBox(n,"iloc");if(s===void 0)return;let o=this.findExifLocIdInIinf(a),c=this.findExtentInIloc(s,o);if(c===void 0)return;let[d,p]=c;await this.file.ensureChunk(d,p);let m=4+this.file.getUint32(d);d+=m,p-=m,await this.registerSegment("tiff",d,p)}findExifLocIdInIinf(n){this.parseBoxFullHead(n);let a,s,o,c,d=n.start,p=this.file.getUint16(d);for(d+=2;p--;){if(a=this.parseBoxHead(d),this.parseBoxFullHead(a),s=a.start,a.version>=2&&(o=a.version===3?4:2,c=this.file.getString(s+o+2,4),c==="Exif"))return this.file.getUintBytes(s,o);d+=a.length}}get8bits(n){let a=this.file.getUint8(n);return[a>>4,15&a]}findExtentInIloc(n,a){this.parseBoxFullHead(n);let s=n.start,[o,c]=this.get8bits(s++),[d,p]=this.get8bits(s++),m=n.version===2?4:2,g=n.version===1||n.version===2?2:0,y=p+o+c,b=n.version===2?4:2,w=this.file.getUintBytes(s,b);for(s+=b;w--;){let x=this.file.getUintBytes(s,m);s+=m+g+2+d;let T=this.file.getUint16(s);if(s+=2,x===a)return T>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(s+p,o),this.file.getUintBytes(s+p+o,c)];s+=T*y}}}class gv extends pv{}we(gv,"type","heic");class cy extends pv{}we(cy,"type","avif"),Ln.set("heic",gv),Ln.set("avif",cy),lt(Et,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),lt(Et,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),lt(Et,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),lt(Cn,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Hr=lt(Cn,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const uy={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Hr.set(37392,uy),Hr.set(41488,uy);const xd={0:"Normal",1:"Low",2:"High"};function dy(r){return typeof r=="object"&&r.length!==void 0?r[0]:r}function fy(r){let n=Array.from(r).slice(1);return n[1]>15&&(n=n.map(a=>String.fromCharCode(a))),n[2]!=="0"&&n[2]!==0||n.pop(),n.join(".")}function Td(r){if(typeof r=="string"){var[n,a,s,o,c,d]=r.trim().split(/[-: ]/g).map(Number),p=new Date(n,a-1,s);return Number.isNaN(o)||Number.isNaN(c)||Number.isNaN(d)||(p.setHours(o),p.setMinutes(c),p.setSeconds(d)),Number.isNaN(+p)?r:p}}function Pr(r){if(typeof r=="string")return r;let n=[];if(r[1]===0&&r[r.length-1]===0)for(let a=0;a<r.length;a+=2)n.push(hy(r[a+1],r[a]));else for(let a=0;a<r.length;a+=2)n.push(hy(r[a],r[a+1]));return pi(String.fromCodePoint(...n))}function hy(r,n){return r<<8|n}Hr.set(41992,xd),Hr.set(41993,xd),Hr.set(41994,xd),lt(Ia,["ifd0","ifd1"],[[50827,function(r){return typeof r!="string"?cv(r):r}],[306,Td],[40091,Pr],[40092,Pr],[40093,Pr],[40094,Pr],[40095,Pr]]),lt(Ia,"exif",[[40960,fy],[36864,fy],[36867,Td],[36868,Td],[40962,dy],[40963,dy]]),lt(Ia,"gps",[[0,r=>Array.from(r).join(".")],[7,r=>Array.from(r).join(":")]]);class Ed extends xn{static canHandle(n,a){return n.getUint8(a+1)===225&&n.getUint32(a+4)===1752462448&&n.getString(a+4,20)==="http://ns.adobe.com/"}static headerLength(n,a){return n.getString(a+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(n,a){let s=super.findPosition(n,a);return s.multiSegment=s.extended=s.headerLength===79,s.multiSegment?(s.chunkCount=n.getUint8(a+72),s.chunkNumber=n.getUint8(a+76),n.getUint8(a+77)!==0&&s.chunkNumber++):(s.chunkCount=1/0,s.chunkNumber=-1),s}static handleMultiSegments(n){return n.map(a=>a.chunk.getString()).join("")}normalizeInput(n){return typeof n=="string"?n:Yt.from(n).getString()}parse(n=this.chunk){if(!this.localOptions.parse)return n;n=function(c){let d={},p={};for(let m of wv)d[m]=[],p[m]=0;return c.replace(lx,(m,g,y)=>{if(g==="<"){let b=++p[y];return d[y].push(b),`${m}#${b}`}return`${m}#${d[y].pop()}`})}(n);let a=js.findAll(n,"rdf","Description");a.length===0&&a.push(new js("rdf","Description",void 0,n));let s,o={};for(let c of a)for(let d of c.properties)s=rx(d.ns,o),yv(d,s);return function(c){let d;for(let p in c)d=c[p]=Ro(c[p]),d===void 0&&delete c[p];return Ro(c)}(o)}assignToOutput(n,a){if(this.localOptions.parse)for(let[s,o]of Object.entries(a))switch(s){case"tiff":this.assignObjectToOutput(n,"ifd0",o);break;case"exif":this.assignObjectToOutput(n,"exif",o);break;case"xmlns":break;default:this.assignObjectToOutput(n,s,o)}else n.xmp=a}}we(Ed,"type","xmp"),we(Ed,"multiSegment",!0),ft.set("xmp",Ed);class Do{static findAll(n){return vv(n,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(Do.unpackMatch)}static unpackMatch(n){let a=n[1],s=n[2],o=n[3].slice(1,-1);return o=bv(o),new Do(a,s,o)}constructor(n,a,s){this.ns=n,this.name=a,this.value=s}serialize(){return this.value}}class js{static findAll(n,a,s){if(a!==void 0||s!==void 0){a=a||"[\\w\\d-]+",s=s||"[\\w\\d-]+";var o=new RegExp(`<(${a}):(${s})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else o=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return vv(n,o).map(js.unpackMatch)}static unpackMatch(n){let a=n[1],s=n[2],o=n[4],c=n[8];return new js(a,s,o,c)}constructor(n,a,s,o){this.ns=n,this.name=a,this.attrString=s,this.innerXml=o,this.attrs=Do.findAll(s),this.children=js.findAll(o),this.value=this.children.length===0?bv(o):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:n,name:a}=this;return n==="rdf"&&(a==="Seq"||a==="Bag"||a==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return sx(this.children.map(ix));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let n={};for(let a of this.properties)yv(a,n);return this.value!==void 0&&(n.value=this.value),Ro(n)}}function yv(r,n){let a=r.serialize();a!==void 0&&(n[r.name]=a)}var ix=r=>r.serialize(),sx=r=>r.length===1?r[0]:r,rx=(r,n)=>n[r]?n[r]:n[r]={};function vv(r,n){let a,s=[];if(!r)return s;for(;(a=n.exec(r))!==null;)s.push(a);return s}function bv(r){if(function(s){return s==null||s==="null"||s==="undefined"||s===""||s.trim()===""}(r))return;let n=Number(r);if(!Number.isNaN(n))return n;let a=r.toLowerCase();return a==="true"||a!=="false"&&r.trim()}const wv=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],lx=new RegExp(`(<|\\/)(${wv.join("|")})`,"g");var ox=Object.freeze({__proto__:null,default:nx,Exifr:Ga,fileParsers:Ln,segmentParsers:ft,fileReaders:Pn,tagKeys:Et,tagValues:Cn,tagRevivers:Ia,createDictionary:lt,extendDictionary:wi,fetchUrlAsArrayBuffer:vi,readBlobAsArrayBuffer:bi,chunkedProps:La,otherSegments:Ds,segments:_i,tiffBlocks:at,segmentsAndBlocks:Pa,tiffExtractables:Ba,inheritables:Ms,allFormatters:za,Options:Ti,parse:Vo,gpsOnlyOptions:ff,gps:dv,thumbnailOnlyOptions:hf,thumbnail:fv,thumbnailUrl:hv,orientationOnlyOptions:mf,orientation:pf,rotations:gf,get rotateCanvas(){return gi},get rotateCss(){return yi},rotation:mv});let my=No("fs",r=>r.promises);Pn.set("fs",class extends Yo{async readWhole(){this.chunked=!1,this.fs=await my;let r=await this.fs.readFile(this.input);this._swapBuffer(r)}async readChunked(){this.chunked=!0,this.fs=await my,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(r,n){this.fh===void 0&&await this.open(),r+n>this.size&&(n=this.size-r);var a=this.subarray(r,n,!0);return await this.fh.read(a.dataView,0,n,r),a}async close(){if(this.fh){let r=this.fh;this.fh=void 0,await r.close()}}});Pn.set("base64",class extends Yo{constructor(...r){super(...r),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(r,n){let a,s,o=this.input;r===void 0?(r=0,a=0,s=0):(a=4*Math.floor(r/3),s=r-a/4*3),n===void 0&&(n=this.size);let c=r+n,d=a+4*Math.ceil(c/3);o=o.slice(a,d);let p=Math.min(n,this.size-r);if($o){let m=Go.from(o,"base64").slice(s,s+p);return this.set(m,r,!0)}{let m=this.subarray(r,p,!0),g=atob(o),y=m.toUint8();for(let b=0;b<p;b++)y[b]=g.charCodeAt(s+b);return m}}});class py extends Fo{static canHandle(n,a){return a===18761||a===19789}extendOptions(n){let{ifd0:a,xmp:s,iptc:o,icc:c}=n;s.enabled&&a.deps.add(700),o.enabled&&a.deps.add(33723),c.enabled&&a.deps.add(34675),a.finalizeFilters()}async parse(){let{tiff:n,xmp:a,iptc:s,icc:o}=this.options;if(n.enabled||a.enabled||s.enabled||o.enabled){let c=Math.max(qd(this.options),this.options.chunkSize);await this.file.ensureChunk(0,c),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(n){if(this.parsers.tiff[n]){let a=this.parsers.tiff[n];this.injectSegment(n,a)}}}we(py,"type","tiff"),Ln.set("tiff",py);let cx=No("zlib");const ux=["ihdr","iccp","text","itxt","exif"];class gy extends Fo{constructor(...n){super(...n),we(this,"catchError",a=>this.errors.push(a)),we(this,"metaChunks",[]),we(this,"unknownChunks",[])}static canHandle(n,a){return a===35152&&n.getUint32(0)===2303741511&&n.getUint32(4)===218765834}async parse(){let{file:n}=this;await this.findPngChunksInRange(8,n.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(n,a){let{file:s}=this;for(;n<a;){let o=s.getUint32(n),c=s.getUint32(n+4),d=s.getString(n+4,4).toLowerCase(),p=o+4+4+4,m={type:d,offset:n,length:p,start:n+4+4,size:o,marker:c};ux.includes(d)?this.metaChunks.push(m):this.unknownChunks.push(m),n+=p}}parseTextChunks(){let n=this.metaChunks.filter(a=>a.type==="text");for(let a of n){let[s,o]=this.file.getString(a.start,a.size).split("\0");this.injectKeyValToIhdr(s,o)}}injectKeyValToIhdr(n,a){let s=this.parsers.ihdr;s&&s.raw.set(n,a)}findIhdr(){let n=this.metaChunks.find(a=>a.type==="ihdr");n&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",n.chunk)}async findExif(){let n=this.metaChunks.find(a=>a.type==="exif");n&&this.injectSegment("tiff",n.chunk)}async findXmp(){let n=this.metaChunks.filter(a=>a.type==="itxt");for(let a of n)a.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",a.chunk)}async findIcc(){let n=this.metaChunks.find(p=>p.type==="iccp");if(!n)return;let{chunk:a}=n,s=a.getUint8Array(0,81),o=0;for(;o<80&&s[o]!==0;)o++;let c=o+2,d=a.getString(0,o);if(this.injectKeyValToIhdr("ProfileName",d),Oo){let p=await cx,m=a.getUint8Array(c);m=p.inflateSync(m),this.injectSegment("icc",m)}}}we(gy,"type","png"),Ln.set("png",gy),lt(Et,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),wi(Et,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let yy=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];wi(Et,"ifd0",yy),wi(Et,"exif",yy),lt(Cn,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class jd extends xn{static canHandle(n,a){return n.getUint8(a+1)===224&&n.getUint32(a+4)===1246120262&&n.getUint8(a+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}we(jd,"type","jfif"),we(jd,"headerLength",9),ft.set("jfif",jd),lt(Et,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class vy extends xn{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}we(vy,"type","ihdr"),ft.set("ihdr",vy),lt(Et,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),lt(Cn,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Eo extends xn{static canHandle(n,a){return n.getUint8(a+1)===226&&n.getUint32(a+4)===1229144927}static findPosition(n,a){let s=super.findPosition(n,a);return s.chunkNumber=n.getUint8(a+16),s.chunkCount=n.getUint8(a+17),s.multiSegment=s.chunkCount>1,s}static handleMultiSegments(n){return function(a){let s=function(o){let c=o[0].constructor,d=0;for(let g of o)d+=g.length;let p=new c(d),m=0;for(let g of o)p.set(g,m),m+=g.length;return p}(a.map(o=>o.chunk.toUint8()));return new Yt(s)}(n)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:n}=this;this.chunk.byteLength<84&&ht("ICC header is too short");for(let[a,s]of Object.entries(dx)){a=parseInt(a,10);let o=s(this.chunk,a);o!=="\0\0\0\0"&&n.set(a,o)}}parseTags(){let n,a,s,o,c,{raw:d}=this,p=this.chunk.getUint32(128),m=132,g=this.chunk.byteLength;for(;p--;){if(n=this.chunk.getString(m,4),a=this.chunk.getUint32(m+4),s=this.chunk.getUint32(m+8),o=this.chunk.getString(a,4),a+s>g)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");c=this.parseTag(o,a,s),c!==void 0&&c!=="\0\0\0\0"&&d.set(n,c),m+=12}}parseTag(n,a,s){switch(n){case"desc":return this.parseDesc(a);case"mluc":return this.parseMluc(a);case"text":return this.parseText(a,s);case"sig ":return this.parseSig(a)}if(!(a+s>this.chunk.byteLength))return this.chunk.getUint8Array(a,s)}parseDesc(n){let a=this.chunk.getUint32(n+8)-1;return pi(this.chunk.getString(n+12,a))}parseText(n,a){return pi(this.chunk.getString(n+8,a-8))}parseSig(n){return pi(this.chunk.getString(n+8,4))}parseMluc(n){let{chunk:a}=this,s=a.getUint32(n+8),o=a.getUint32(n+12),c=n+16,d=[];for(let p=0;p<s;p++){let m=a.getString(c+0,2),g=a.getString(c+2,2),y=a.getUint32(c+4),b=a.getUint32(c+8)+n,w=pi(a.getUnicodeString(b,y));d.push({lang:m,country:g,text:w}),c+=o}return s===1?d[0].text:d}translateValue(n,a){return typeof n=="string"?a[n]||a[n.toLowerCase()]||n:a[n]||n}}we(Eo,"type","icc"),we(Eo,"multiSegment",!0),we(Eo,"headerLength",18);const dx={4:ea,8:function(r,n){return[r.getUint8(n),r.getUint8(n+1)>>4,r.getUint8(n+1)%16].map(a=>a.toString(10)).join(".")},12:ea,16:ea,20:ea,24:function(r,n){const a=r.getUint16(n),s=r.getUint16(n+2)-1,o=r.getUint16(n+4),c=r.getUint16(n+6),d=r.getUint16(n+8),p=r.getUint16(n+10);return new Date(Date.UTC(a,s,o,c,d,p))},36:ea,40:ea,48:ea,52:ea,64:(r,n)=>r.getUint32(n),80:ea};function ea(r,n){return pi(r.getString(n,4))}ft.set("icc",Eo),lt(Et,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const _o={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},by={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};lt(Cn,"icc",[[4,_o],[12,by],[40,Object.assign({},_o,by)],[48,_o],[80,_o],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class So extends xn{static canHandle(n,a,s){return n.getUint8(a+1)===237&&n.getString(a+4,9)==="Photoshop"&&this.containsIptc8bim(n,a,s)!==void 0}static headerLength(n,a,s){let o,c=this.containsIptc8bim(n,a,s);if(c!==void 0)return o=n.getUint8(a+c+7),o%2!=0&&(o+=1),o===0&&(o=4),c+8+o}static containsIptc8bim(n,a,s){for(let o=0;o<s;o++)if(this.isIptcSegmentHead(n,a+o))return o}static isIptcSegmentHead(n,a){return n.getUint8(a)===56&&n.getUint32(a)===943868237&&n.getUint16(a+4)===1028}parse(){let{raw:n}=this,a=this.chunk.byteLength-1,s=!1;for(let o=0;o<a;o++)if(this.chunk.getUint8(o)===28&&this.chunk.getUint8(o+1)===2){s=!0;let c=this.chunk.getUint16(o+3),d=this.chunk.getUint8(o+2),p=this.chunk.getLatin1String(o+5,c);n.set(d,this.pluralizeValue(n.get(d),p)),o+=4+c}else if(s)break;return this.translate(),this.output}pluralizeValue(n,a){return n!==void 0?n instanceof Array?(n.push(a),n):[n,a]:a}}we(So,"type","iptc"),we(So,"translateValues",!1),we(So,"reviveValues",!1),ft.set("iptc",So),lt(Et,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),lt(Cn,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);async function fx(r){const{data:n,error:a}=await W.from("bed_images").select("*").eq("bed_id",r).order("created_at",{ascending:!1});if(a)throw a;const s=n??[];return await Promise.all(s.map(async o=>{if(!o.exif_date)try{const{data:c}=W.storage.from("plant-images").getPublicUrl(o.image_path),d=c.publicUrl;if(!d)return;const p=await ox.parse(d,{tiff:!0,ifd0:!0,exif:!0,pick:["DateTimeOriginal","CreateDate"]}),m=p?.DateTimeOriginal||p?.CreateDate;m&&(o.exif_date=m.toISOString())}catch{}})),s}function Cs(r){const n=hx(r),a=Math.abs(n)%360,s=70,o=50,c=`hsl(${a}, ${s}%, ${o-5}%)`,d=`hsl(${a}, ${s}%, ${Math.min(o+10,90)}%)`,p=`hsla(${a}, ${Math.max(s-20,40)}%, ${Math.max(o-10,20)}%, 0.35)`;return{base:c,highlight:d,shadow:p}}function hx(r){let n=2166136261;for(let a=0;a<r.length;a++)n^=r.charCodeAt(a),n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24);return n|0}function mx({bedId:r,imageUrl:n,imageId:a,section:s,bedName:o,onCreateAt:c,onEditPin:d,onPinsChange:p,useExternalEditor:m=!0,showInlineHint:g=!1,children:y,isVisible:b=!0,selectedPinId:w,pins:x,allowCreate:T=!0,onSelect:C}){const[A,j]=S.useState([]),[z,E]=S.useState(!0),I=S.useRef(null),V=S.useRef(null),[Y,B]=S.useState(null),[J,ie]=S.useState(null),[oe,de]=S.useState([]),[_e,Ne]=S.useState(!1),Me=S.useRef(null),Ee=S.useRef(!1),P=S.useRef(null),Q=S.useRef(null),X=x??A,le=S.useMemo(()=>x?()=>{}:j,[x,j]);S.useEffect(()=>{if(x){E(!1),de(x);return}let te=!1;async function se(){E(!0);let Z=W.from("pins").select("*").eq("bed_id",r);a&&(Z=Z.eq("image_id",a));const{data:fe,error:pe}=await Z.order("created_at",{ascending:!0});if(!te){if(pe)console.error("Failed to load pins:",pe),le([]),de([]);else{const Te=fe??[];le(Te),de(Te)}E(!1)}}return se(),()=>{te=!0}},[r,a,x,le]),S.useEffect(()=>{if(!x||Y)return;const te=new Set((oe??[]).map(Te=>Te.id)),se=new Set(x.map(Te=>Te.id));if(te.size!==se.size||[...te].some(Te=>!se.has(Te))){de(x);return}let fe=0;const pe=new Map(oe.map(Te=>[Te.id,Te]));for(const Te of x){const it=pe.get(Te.id);if(!it){fe=1;break}if(fe=Math.max(fe,Math.abs((it.x??0)-(Te.x??0)),Math.abs((it.y??0)-(Te.y??0))),fe>.01)break}fe<=.01&&de(x)},[x,oe,Y]),S.useEffect(()=>{if(!V.current)return;const te=new ResizeObserver(()=>{de(se=>se)});return te.observe(V.current),Me.current=te,()=>{te.disconnect(),Me.current=null}},[]);const N=S.useMemo(()=>!!(n&&r&&b),[n,r,b]),q=S.useCallback((te,se)=>{if(!I.current)return{x:0,y:0};const Z=I.current.getBoundingClientRect(),fe=(te-Z.left)/Z.width,pe=(se-Z.top)/Z.height;return{x:_s(fe),y:_s(pe)}},[]),ae=te=>{if(!(!N||!I.current)){if(w&&C){C(null);return}if(T){const{x:se,y:Z}=q(te.clientX,te.clientY);c?.({x:se,y:Z})}}},ee=S.useCallback(te=>d?.(te),[d]),ce=S.useMemo(()=>{if(!w)return null;const te=oe.find(Z=>Z.id===w);if(!te)return null;const se=te.name||"Untitled";return h.jsx("div",{style:{position:"absolute",left:`${te.x*100}%`,top:`${te.y*100}%`,transform:"translate(-50%, calc(-100% - 12px))",background:"rgba(17,24,39,0.9)",color:"#fff",padding:"6px 8px",fontSize:12,borderRadius:8,pointerEvents:"none",whiteSpace:"nowrap"},children:se})},[w,oe]),Se=S.useCallback((te,se)=>{te.preventDefault(),te.stopPropagation(),N&&(Ne(!1),Ee.current=te.altKey||te.metaKey,Q.current={id:te.pointerId,target:te.target},ie({x:te.clientX,y:te.clientY}),Ee.current?(B(se.id),te.target.setPointerCapture(te.pointerId)):te.pointerType==="touch"&&(P.current=window.setTimeout(()=>{Ee.current=!0,B(se.id);const Z=Q.current?.target,fe=Q.current?.id;if(Z&&typeof fe=="number")try{Z.setPointerCapture(fe)}catch(pe){console.warn("Failed to capture pointer:",pe)}},350)))},[N]),he=S.useCallback(te=>{if(!Y||!J||!Ee.current)return;const{x:se,y:Z}=q(te.clientX,te.clientY),fe=oe.find(pe=>pe.id===Y);fe&&(Math.abs(fe.x-se)>.005||Math.abs(fe.y-Z)>.005)&&Ne(!0),de(pe=>pe.map(Te=>Te.id===Y?{...Te,x:se,y:Z}:Te))},[Y,J,q,oe]),Le=S.useCallback(te=>{if(P.current&&(clearTimeout(P.current),P.current=null),!Y)return;const{x:se,y:Z}=q(te.clientX,te.clientY);te.target.releasePointerCapture(te.pointerId);const fe=oe.map(pe=>pe.id===Y?{...pe,x:se,y:Z}:pe);de(fe),x||le(fe),B(null),ie(null),Ee.current=!1,Ne(!1),requestAnimationFrame(()=>{p?.(fe)})},[Y,q,p,oe,x,le]),xe=S.useCallback((te,se)=>{if(!N)return;const fe=te.shiftKey?.001:.01;let pe=se.x,Te=se.y;switch(te.key){case"ArrowLeft":pe=_s(se.x-fe);break;case"ArrowRight":pe=_s(se.x+fe);break;case"ArrowUp":Te=_s(se.y-fe);break;case"ArrowDown":Te=_s(se.y+fe);break;case"Enter":ee(se);return;case"Escape":Y===se.id&&(B(null),ie(null),de(ze=>ze.map(Pt=>Pt.id===se.id?X.find(Rt=>Rt.id===se.id)||se:Pt)));return;default:return}te.preventDefault();const it=oe.map(ze=>ze.id===se.id?{...ze,x:pe,y:Te}:ze);de(it),requestAnimationFrame(()=>{p?.(it)})},[N,Y,X,ee,p,oe]),et=S.useMemo(()=>oe.map(te=>h.jsxs("button",{className:`pin ${w===te.id?"pin--selected":""} ${Y===te.id?"pin--dragging":""}`,title:te.name??void 0,onClick:se=>{if(se.stopPropagation(),!_e){const Z=new CustomEvent("pin-selected",{detail:{id:te.id}});window.dispatchEvent(Z)}},"aria-label":te.name||`Pin at ${Math.round(te.x*100)}%, ${Math.round(te.y*100)}%`,onPointerDown:se=>Se(se,te),onPointerMove:he,onPointerUp:Le,onKeyDown:se=>xe(se,te),tabIndex:0,style:(Cs(te.id),{left:`${te.x*100}%`,top:`${te.y*100}%`,background:"transparent",border:"none",boxShadow:"0 1px 3px rgba(0,0,0,0.25)"}),children:[(()=>{const se=Cs(te.id),Z=w===te.id,fe=se.shadow,pe=Z?9:7;return h.jsx("span",{"aria-hidden":!0,className:"pin-glow",style:{background:`radial-gradient(closest-side, ${fe}, rgba(0,0,0,0))`,inset:`-${pe}px`,opacity:Z?.9:.7,filter:"blur(4px)"}})})(),h.jsx("span",{"aria-hidden":!0,className:"pin-core",style:(()=>{const se=Cs(te.id);return{background:`radial-gradient(circle at 30% 30%, ${se.highlight} 0%, ${se.base} 70%)`,boxShadow:"inset 0 1px 2px rgba(255,255,255,0.25), 0 1px 2px rgba(0,0,0,0.15)"}})()})]},te.id)),[oe,w,Y,Se,he,Le,xe,_e]);return h.jsxs("div",{className:"pinboard-wrap",children:[g&&h.jsx("p",{className:"hint",children:"Click the image to drop a pin. Click a pin to edit or delete."}),h.jsx("div",{className:`pinboard ${n?"ready":"empty"}`,onClick:n?ae:void 0,children:n?h.jsx("div",{className:"pinboard-stage",children:h.jsxs("div",{className:"image-shell",ref:V,children:[h.jsx("img",{ref:I,src:n,alt:`${s??""} — ${o??""}`,loading:"eager",decoding:"async",draggable:!1}),h.jsxs("div",{className:"pins-layer",style:{pointerEvents:b?"auto":"none",userSelect:Y?"none":"auto"},children:[et,ce]}),y]})}):h.jsx("div",{className:"empty-state",children:h.jsx("p",{children:"Upload an image to begin pinning."})})}),z&&h.jsx("div",{className:"modal-backdrop",children:h.jsx("div",{className:"modal",children:h.jsx("p",{children:"Loading…"})})})]})}function _s(r){return Math.max(0,Math.min(1,r))}const yf="plant-images";async function wy(r){const{data:n,error:a}=await W.from("plant_media").select("*").eq("plant_id",r).order("created_at",{ascending:!1});if(a)throw a;return(n??[]).map(o=>{const{data:c}=W.storage.from(yf).getPublicUrl(o.storage_path);return{...o,url:c.publicUrl}})}async function px(r,n,a){const s=(n.name.split(".").pop()||"jpg").toLowerCase(),o=`${r}/${qo()}.${s}`,{error:c}=await W.storage.from(yf).upload(o,n,{cacheControl:"3600",upsert:!1,contentType:n.type||"image/jpeg"});if(c)throw c;const{error:d}=await W.from("plant_media").insert({plant_id:r,storage_path:o,image_id:a?.imageId??null,pin_id:a?.pinId??null,captured_at:a?.capturedAt??null,caption:a?.caption??null});if(d)throw d}async function gx(r){const{data:n,error:a}=await W.from("plant_media").select("id, storage_path").eq("id",r).maybeSingle();if(a)throw a;const s=n?.storage_path;if(!s)return;const{error:o}=await W.storage.from(yf).remove([s]);if(o)throw o;const{error:c}=await W.from("plant_media").delete().eq("id",r);if(c)throw c}const vf="plant-images";async function qa(r){const{data:n,error:a}=await W.from("pin_media").select("*").eq("pin_id",r).order("created_at",{ascending:!1});if(a)throw a;return(n??[]).map(o=>{const{data:c}=W.storage.from(vf).getPublicUrl(o.storage_path);return{...o,url:c.publicUrl}})}async function bf(r,n,a){const s=(n.name.split(".").pop()||"jpg").toLowerCase(),o=`pin/${r}/${qo()}.${s}`,{error:c}=await W.storage.from(vf).upload(o,n,{cacheControl:"3600",upsert:!1,contentType:n.type||"image/jpeg"});if(c)throw c;const{error:d}=await W.from("pin_media").insert({pin_id:r,image_id:a?.imageId??null,storage_path:o,caption:a?.caption??null,captured_at:a?.capturedAt??null});if(d)throw d}async function yx(r){const{data:n,error:a}=await W.from("pin_media").select("id, storage_path").eq("id",r).maybeSingle();if(a)throw a;const s=n?.storage_path;if(!s)return;const{error:o}=await W.storage.from(vf).remove([s]);if(o)throw o;const{error:c}=await W.from("pin_media").delete().eq("id",r);if(c)throw c}function vx({pinId:r,onOpen:n}){const[a,s]=S.useState([]);return S.useEffect(()=>{let o=!1;return(async()=>{try{const c=await qa(r);o||s(c.slice(0,3).map(d=>d.url))}catch{}})(),()=>{o=!0}},[r]),h.jsx("div",{className:"pg-strip",children:a.map((o,c)=>h.jsx("button",{className:"pg-thumb",onClick:n,"aria-label":"Open pin photos",children:h.jsx("img",{src:o,alt:"Pin media thumbnail",loading:"lazy"})},c))})}function _v({content:r,placement:n="top",autoTheme:a=!1,delay:s=80,children:o}){const[c,d]=S.useState(!1),[p,m]=S.useState("dark"),[g,y]=S.useState({top:0,left:0}),b=S.useRef(null),w=S.useRef(null),x=S.useRef(),T=S.useId();S.useEffect(()=>{if(!a||!b.current)return;(()=>{const I=b.current?.querySelector("img");if(!I||!I.complete||I.naturalWidth===0){m("dark");return}try{const V=document.createElement("canvas"),Y=V.getContext("2d");if(!Y){m("dark");return}const B=12;V.width=B,V.height=B;const J=I.getBoundingClientRect(),ie=Math.floor(I.naturalWidth/2),oe=Math.floor(I.naturalHeight/2),de=Math.floor(B/2),_e=Math.floor(B/2);Y.drawImage(I,ie-de,oe-_e,B,B,0,0,B,B);const Ne=Y.getImageData(0,0,B,B).data;let Me=0,Ee=0;for(let Q=0;Q<Ne.length;Q+=4){const X=Ne[Q],le=Ne[Q+1],N=Ne[Q+2],q=.2126*X+.7152*le+.0722*N;Me+=q,Ee++}const P=Me/Ee;m(P>153?"dark":"light")}catch{m("dark")}})()},[a]);const C=S.useCallback(()=>{if(!b.current||!w.current)return;const E=b.current.getBoundingClientRect(),I=w.current.getBoundingClientRect(),V=window.pageXOffset||document.documentElement.scrollLeft,Y=window.pageYOffset||document.documentElement.scrollTop;let B=0,J=0;switch(n){case"top":B=E.top+Y-I.height-8,J=E.left+V+E.width/2-I.width/2;break;case"bottom":B=E.bottom+Y+8,J=E.left+V+E.width/2-I.width/2;break;case"left":B=E.top+Y+E.height/2-I.height/2,J=E.left+V-I.width-8;break;case"right":B=E.top+Y+E.height/2-I.height/2,J=E.right+V+8;break}const ie=window.innerWidth,oe=window.innerHeight;J<8&&(J=8),J+I.width>ie-8&&(J=ie-I.width-8),B<8&&(B=8),B+I.height>oe-8&&(B=oe-I.height-8),y({top:B,left:J})},[n]),A=S.useCallback(()=>{x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{d(!0),setTimeout(C,10)},s)},[s,C]),j=S.useCallback(()=>{x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{d(!1)},s)},[s]),z=S.useCallback(E=>{E.key==="Escape"&&d(!1)},[]);return S.useEffect(()=>(document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)),[z]),S.useEffect(()=>{if(!c)return;const E=()=>{c&&C()};return window.addEventListener("scroll",E,{passive:!0}),window.addEventListener("resize",E,{passive:!0}),()=>{window.removeEventListener("scroll",E),window.removeEventListener("resize",E)}},[c,C]),h.jsxs(h.Fragment,{children:[h.jsx("span",{ref:b,onMouseEnter:A,onMouseLeave:j,onFocus:A,onBlur:j,"aria-describedby":c?T:void 0,style:{display:"inline-flex"},children:o}),Bo.createPortal(h.jsx("div",{ref:w,id:T,role:"tooltip",className:`tooltip tooltip--${n} tooltip--${p} ${c?"tooltip--visible":""}`,style:{top:g.top,left:g.left},"aria-hidden":!c,children:h.jsx("div",{className:"tooltip__content",children:r})}),document.body)]})}function bx({pins:r,onOpen:n,selectedPinId:a,fullHeight:s,onSelect:o,cardRef:c,promoteSelected:d=!1,onToggleAddMode:p,addMode:m=!1,onOpenGallery:g,showGalleryStrip:y=!1}){const b=d&&a?[...r.filter(w=>w.id===a),...r.filter(w=>w.id!==a)]:r;return h.jsx("div",{className:"card",ref:c,style:s?{height:s,display:"flex",flexDirection:"column"}:void 0,children:h.jsxs("div",{className:`panel ${s?"panel--fill":""}`,style:s?{flex:1,display:"flex",flexDirection:"column"}:void 0,children:[h.jsxs("div",{className:"panel-head",children:[h.jsx("div",{className:"panel-title",children:"Pins"}),h.jsxs("div",{className:"panel-actions",children:[h.jsx("div",{className:"panel-meta",title:"Total pins",children:r.length}),h.jsx(_v,{content:"How to use pins: Click the big image to add a pin. Click a pin dot to edit or delete it. Use the thumbnails above to switch images.",children:h.jsx("button",{className:"pill pill--icon","aria-label":"Pin help",children:h.jsxs("svg",{"aria-hidden":"true",width:"14",height:"14",viewBox:"0 0 24 24",children:[h.jsx("circle",{cx:"12",cy:"12",r:"11",fill:"currentColor",opacity:".08"}),h.jsx("path",{d:"M12 8.5a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5Zm-1.1 2.7h2.2v6.3h-2.2z",fill:"currentColor"})]})})}),p?h.jsx("button",{type:"button",className:`ui-btn ui-btn--sm ${m?"is-active":""}`,onClick:p,"aria-pressed":m,children:m?"Exit add mode":"Add new pin"}):null]})]}),r.length===0?h.jsx("div",{className:"panel-empty",children:"No pins yet. Click the image to add a pin."}):h.jsx("ul",{className:"pin-rows",style:s?{flex:1}:void 0,children:b.map(w=>h.jsx("li",{children:h.jsxs("div",{className:`pin-row ${a===w.id?"is-selected":""}`,onClick:x=>{x.stopPropagation(),o?.(a===w.id?null:w)},title:w.name??void 0,role:"button",tabIndex:0,onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),o?.(a===w.id?null:w))},children:[h.jsx("span",{className:"pin-dot",style:{background:`radial-gradient(circle at 30% 30%, ${Cs(w.id).highlight} 0%, ${Cs(w.id).base} 70%)`,borderColor:Cs(w.id).highlight}}),h.jsx("span",{className:"pin-name",children:w.name||"Untitled"}),h.jsx("span",{className:"pin-spacer"}),h.jsx(vx,{pinId:w.id,onOpen:()=>g?.({pinId:w.id})}),h.jsx("span",{className:"pin-edit-btn-wrap",children:h.jsx("button",{type:"button","aria-label":"Edit pin",className:"pin-edit",onClick:x=>{x.stopPropagation(),n(w)},title:"Edit pin",children:h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[h.jsx("path",{d:"M12 20h9"}),h.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})})})]})},w.id))})]})})}function wx({children:r,className:n="",style:a}){return h.jsx("aside",{className:["sidebar",n].filter(Boolean).join(" "),style:a,children:r})}function _x(r){return Object.prototype.toString.call(r)==="[object Object]"}function _y(r){return _x(r)||Array.isArray(r)}function Sx(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function wf(r,n){const a=Object.keys(r),s=Object.keys(n);if(a.length!==s.length)return!1;const o=JSON.stringify(Object.keys(r.breakpoints||{})),c=JSON.stringify(Object.keys(n.breakpoints||{}));return o!==c?!1:a.every(d=>{const p=r[d],m=n[d];return typeof p=="function"?`${p}`==`${m}`:!_y(p)||!_y(m)?p===m:wf(p,m)})}function Sy(r){return r.concat().sort((n,a)=>n.name>a.name?1:-1).map(n=>n.options)}function xx(r,n){if(r.length!==n.length)return!1;const a=Sy(r),s=Sy(n);return a.every((o,c)=>{const d=s[c];return wf(o,d)})}function _f(r){return typeof r=="number"}function Fd(r){return typeof r=="string"}function Ko(r){return typeof r=="boolean"}function xy(r){return Object.prototype.toString.call(r)==="[object Object]"}function We(r){return Math.abs(r)}function Sf(r){return Math.sign(r)}function Gr(r,n){return We(r-n)}function Tx(r,n){if(r===0||n===0||We(r)<=We(n))return 0;const a=Gr(We(r),We(n));return We(a/r)}function Ex(r){return Math.round(r*100)/100}function Yr(r){return Kr(r).map(Number)}function Tn(r){return r[el(r)]}function el(r){return Math.max(0,r.length-1)}function xf(r,n){return n===el(r)}function Ty(r,n=0){return Array.from(Array(r),(a,s)=>n+s)}function Kr(r){return Object.keys(r)}function Sv(r,n){return[r,n].reduce((a,s)=>(Kr(s).forEach(o=>{const c=a[o],d=s[o],p=xy(c)&&xy(d);a[o]=p?Sv(c,d):d}),a),{})}function Yd(r,n){return typeof n.MouseEvent<"u"&&r instanceof n.MouseEvent}function jx(r,n){const a={start:s,center:o,end:c};function s(){return 0}function o(m){return c(m)/2}function c(m){return n-m}function d(m,g){return Fd(r)?a[r](m):r(n,m,g)}return{measure:d}}function Xr(){let r=[];function n(o,c,d,p={passive:!0}){let m;if("addEventListener"in o)o.addEventListener(c,d,p),m=()=>o.removeEventListener(c,d,p);else{const g=o;g.addListener(d),m=()=>g.removeListener(d)}return r.push(m),s}function a(){r=r.filter(o=>o())}const s={add:n,clear:a};return s}function Cx(r,n,a,s){const o=Xr(),c=1e3/60;let d=null,p=0,m=0;function g(){o.add(r,"visibilitychange",()=>{r.hidden&&T()})}function y(){x(),o.clear()}function b(A){if(!m)return;d||(d=A,a(),a());const j=A-d;for(d=A,p+=j;p>=c;)a(),p-=c;const z=p/c;s(z),m&&(m=n.requestAnimationFrame(b))}function w(){m||(m=n.requestAnimationFrame(b))}function x(){n.cancelAnimationFrame(m),d=null,p=0,m=0}function T(){d=null,p=0}return{init:g,destroy:y,start:w,stop:x,update:a,render:s}}function Ax(r,n){const a=n==="rtl",s=r==="y",o=s?"y":"x",c=s?"x":"y",d=!s&&a?-1:1,p=y(),m=b();function g(T){const{height:C,width:A}=T;return s?C:A}function y(){return s?"top":a?"right":"left"}function b(){return s?"bottom":a?"left":"right"}function w(T){return T*d}return{scroll:o,cross:c,startEdge:p,endEdge:m,measureSize:g,direction:w}}function Si(r=0,n=0){const a=We(r-n);function s(g){return g<r}function o(g){return g>n}function c(g){return s(g)||o(g)}function d(g){return c(g)?s(g)?r:n:g}function p(g){return a?g-a*Math.ceil((g-n)/a):g}return{length:a,max:n,min:r,constrain:d,reachedAny:c,reachedMax:o,reachedMin:s,removeOffset:p}}function xv(r,n,a){const{constrain:s}=Si(0,r),o=r+1;let c=d(n);function d(w){return a?We((o+w)%o):s(w)}function p(){return c}function m(w){return c=d(w),b}function g(w){return y().set(p()+w)}function y(){return xv(r,p(),a)}const b={get:p,set:m,add:g,clone:y};return b}function Ox(r,n,a,s,o,c,d,p,m,g,y,b,w,x,T,C,A,j,z){const{cross:E,direction:I}=r,V=["INPUT","SELECT","TEXTAREA"],Y={passive:!1},B=Xr(),J=Xr(),ie=Si(50,225).constrain(x.measure(20)),oe={mouse:300,touch:400},de={mouse:500,touch:600},_e=T?43:25;let Ne=!1,Me=0,Ee=0,P=!1,Q=!1,X=!1,le=!1;function N(Z){if(!z)return;function fe(Te){(Ko(z)||z(Z,Te))&&he(Te)}const pe=n;B.add(pe,"dragstart",Te=>Te.preventDefault(),Y).add(pe,"touchmove",()=>{},Y).add(pe,"touchend",()=>{}).add(pe,"touchstart",fe).add(pe,"mousedown",fe).add(pe,"touchcancel",xe).add(pe,"contextmenu",xe).add(pe,"click",et,!0)}function q(){B.clear(),J.clear()}function ae(){const Z=le?a:n;J.add(Z,"touchmove",Le,Y).add(Z,"touchend",xe).add(Z,"mousemove",Le,Y).add(Z,"mouseup",xe)}function ee(Z){const fe=Z.nodeName||"";return V.includes(fe)}function ce(){return(T?de:oe)[le?"mouse":"touch"]}function Se(Z,fe){const pe=b.add(Sf(Z)*-1),Te=y.byDistance(Z,!T).distance;return T||We(Z)<ie?Te:A&&fe?Te*.5:y.byIndex(pe.get(),0).distance}function he(Z){const fe=Yd(Z,s);le=fe,X=T&&fe&&!Z.buttons&&Ne,Ne=Gr(o.get(),d.get())>=2,!(fe&&Z.button!==0)&&(ee(Z.target)||(P=!0,c.pointerDown(Z),g.useFriction(0).useDuration(0),o.set(d),ae(),Me=c.readPoint(Z),Ee=c.readPoint(Z,E),w.emit("pointerDown")))}function Le(Z){if(!Yd(Z,s)&&Z.touches.length>=2)return xe(Z);const pe=c.readPoint(Z),Te=c.readPoint(Z,E),it=Gr(pe,Me),ze=Gr(Te,Ee);if(!Q&&!le&&(!Z.cancelable||(Q=it>ze,!Q)))return xe(Z);const Pt=c.pointerMove(Z);it>C&&(X=!0),g.useFriction(.3).useDuration(.75),p.start(),o.add(I(Pt)),Z.preventDefault()}function xe(Z){const pe=y.byDistance(0,!1).index!==b.get(),Te=c.pointerUp(Z)*ce(),it=Se(I(Te),pe),ze=Tx(Te,it),Pt=_e-10*ze,Rt=j+ze/50;Q=!1,P=!1,J.clear(),g.useDuration(Pt).useFriction(Rt),m.distance(it,!T),le=!1,w.emit("pointerUp")}function et(Z){X&&(Z.stopPropagation(),Z.preventDefault(),X=!1)}function te(){return P}return{init:N,destroy:q,pointerDown:te}}function Nx(r,n){let s,o;function c(b){return b.timeStamp}function d(b,w){const T=`client${(w||r.scroll)==="x"?"X":"Y"}`;return(Yd(b,n)?b:b.touches[0])[T]}function p(b){return s=b,o=b,d(b)}function m(b){const w=d(b)-d(o),x=c(b)-c(s)>170;return o=b,x&&(s=b),w}function g(b){if(!s||!o)return 0;const w=d(o)-d(s),x=c(b)-c(s),T=c(b)-c(o)>170,C=w/x;return x&&!T&&We(C)>.1?C:0}return{pointerDown:p,pointerMove:m,pointerUp:g,readPoint:d}}function Rx(){function r(a){const{offsetTop:s,offsetLeft:o,offsetWidth:c,offsetHeight:d}=a;return{top:s,right:o+c,bottom:s+d,left:o,width:c,height:d}}return{measure:r}}function kx(r){function n(s){return r*(s/100)}return{measure:n}}function Dx(r,n,a,s,o,c,d){const p=[r].concat(s);let m,g,y=[],b=!1;function w(A){return o.measureSize(d.measure(A))}function x(A){if(!c)return;g=w(r),y=s.map(w);function j(z){for(const E of z){if(b)return;const I=E.target===r,V=s.indexOf(E.target),Y=I?g:y[V],B=w(I?r:s[V]);if(We(B-Y)>=.5){A.reInit(),n.emit("resize");break}}}m=new ResizeObserver(z=>{(Ko(c)||c(A,z))&&j(z)}),a.requestAnimationFrame(()=>{p.forEach(z=>m.observe(z))})}function T(){b=!0,m&&m.disconnect()}return{init:x,destroy:T}}function Mx(r,n,a,s,o,c){let d=0,p=0,m=o,g=c,y=r.get(),b=0;function w(){const Y=s.get()-r.get(),B=!m;let J=0;return B?(d=0,a.set(s),r.set(s),J=Y):(a.set(r),d+=Y/m,d*=g,y+=d,r.add(d),J=y-b),p=Sf(J),b=y,V}function x(){const Y=s.get()-n.get();return We(Y)<.001}function T(){return m}function C(){return p}function A(){return d}function j(){return E(o)}function z(){return I(c)}function E(Y){return m=Y,V}function I(Y){return g=Y,V}const V={direction:C,duration:T,velocity:A,seek:w,settled:x,useBaseFriction:z,useBaseDuration:j,useFriction:I,useDuration:E};return V}function Ux(r,n,a,s,o){const c=o.measure(10),d=o.measure(50),p=Si(.1,.99);let m=!1;function g(){return!(m||!r.reachedAny(a.get())||!r.reachedAny(n.get()))}function y(x){if(!g())return;const T=r.reachedMin(n.get())?"min":"max",C=We(r[T]-n.get()),A=a.get()-n.get(),j=p.constrain(C/d);a.subtract(A*j),!x&&We(A)<c&&(a.set(r.constrain(a.get())),s.useDuration(25).useBaseFriction())}function b(x){m=!x}return{shouldConstrain:g,constrain:y,toggleActive:b}}function Lx(r,n,a,s,o){const c=Si(-n+r,0),d=b(),p=y(),m=w();function g(T,C){return Gr(T,C)<=1}function y(){const T=d[0],C=Tn(d),A=d.lastIndexOf(T),j=d.indexOf(C)+1;return Si(A,j)}function b(){return a.map((T,C)=>{const{min:A,max:j}=c,z=c.constrain(T),E=!C,I=xf(a,C);return E?j:I||g(A,z)?A:g(j,z)?j:z}).map(T=>parseFloat(T.toFixed(3)))}function w(){if(n<=r+o)return[c.max];if(s==="keepSnaps")return d;const{min:T,max:C}=p;return d.slice(T,C)}return{snapsContained:m,scrollContainLimit:p}}function Px(r,n,a){const s=n[0],o=a?s-r:Tn(n);return{limit:Si(o,s)}}function Bx(r,n,a,s){const c=n.min+.1,d=n.max+.1,{reachedMin:p,reachedMax:m}=Si(c,d);function g(w){return w===1?m(a.get()):w===-1?p(a.get()):!1}function y(w){if(!g(w))return;const x=r*(w*-1);s.forEach(T=>T.add(x))}return{loop:y}}function zx(r){const{max:n,length:a}=r;function s(c){const d=c-n;return a?d/-a:0}return{get:s}}function Ix(r,n,a,s,o){const{startEdge:c,endEdge:d}=r,{groupSlides:p}=o,m=b().map(n.measure),g=w(),y=x();function b(){return p(s).map(C=>Tn(C)[d]-C[0][c]).map(We)}function w(){return s.map(C=>a[c]-C[c]).map(C=>-We(C))}function x(){return p(g).map(C=>C[0]).map((C,A)=>C+m[A])}return{snaps:g,snapsAligned:y}}function qx(r,n,a,s,o,c){const{groupSlides:d}=o,{min:p,max:m}=s,g=y();function y(){const w=d(c),x=!r||n==="keepSnaps";return a.length===1?[c]:x?w:w.slice(p,m).map((T,C,A)=>{const j=!C,z=xf(A,C);if(j){const E=Tn(A[0])+1;return Ty(E)}if(z){const E=el(c)-Tn(A)[0]+1;return Ty(E,Tn(A)[0])}return T})}return{slideRegistry:g}}function Hx(r,n,a,s,o){const{reachedAny:c,removeOffset:d,constrain:p}=s;function m(T){return T.concat().sort((C,A)=>We(C)-We(A))[0]}function g(T){const C=r?d(T):p(T),A=n.map((z,E)=>({diff:y(z-C,0),index:E})).sort((z,E)=>We(z.diff)-We(E.diff)),{index:j}=A[0];return{index:j,distance:C}}function y(T,C){const A=[T,T+a,T-a];if(!r)return T;if(!C)return m(A);const j=A.filter(z=>Sf(z)===C);return j.length?m(j):Tn(A)-a}function b(T,C){const A=n[T]-o.get(),j=y(A,C);return{index:T,distance:j}}function w(T,C){const A=o.get()+T,{index:j,distance:z}=g(A),E=!r&&c(A);if(!C||E)return{index:j,distance:T};const I=n[j]-z,V=T+y(I,0);return{index:j,distance:V}}return{byDistance:w,byIndex:b,shortcut:y}}function Gx(r,n,a,s,o,c,d){function p(b){const w=b.distance,x=b.index!==n.get();c.add(w),w&&(s.duration()?r.start():(r.update(),r.render(1),r.update())),x&&(a.set(n.get()),n.set(b.index),d.emit("select"))}function m(b,w){const x=o.byDistance(b,w);p(x)}function g(b,w){const x=n.clone().set(b),T=o.byIndex(x.get(),w);p(T)}return{distance:m,index:g}}function $x(r,n,a,s,o,c,d,p){const m={passive:!0,capture:!0};let g=0;function y(x){if(!p)return;function T(C){if(new Date().getTime()-g>10)return;d.emit("slideFocusStart"),r.scrollLeft=0;const z=a.findIndex(E=>E.includes(C));_f(z)&&(o.useDuration(0),s.index(z,0),d.emit("slideFocus"))}c.add(document,"keydown",b,!1),n.forEach((C,A)=>{c.add(C,"focus",j=>{(Ko(p)||p(x,j))&&T(A)},m)})}function b(x){x.code==="Tab"&&(g=new Date().getTime())}return{init:y}}function zr(r){let n=r;function a(){return n}function s(m){n=d(m)}function o(m){n+=d(m)}function c(m){n-=d(m)}function d(m){return _f(m)?m:m.get()}return{get:a,set:s,add:o,subtract:c}}function Tv(r,n){const a=r.scroll==="x"?d:p,s=n.style;let o=null,c=!1;function d(w){return`translate3d(${w}px,0px,0px)`}function p(w){return`translate3d(0px,${w}px,0px)`}function m(w){if(c)return;const x=Ex(r.direction(w));x!==o&&(s.transform=a(x),o=x)}function g(w){c=!w}function y(){c||(s.transform="",n.getAttribute("style")||n.removeAttribute("style"))}return{clear:y,to:m,toggleActive:g}}function Vx(r,n,a,s,o,c,d,p,m){const y=Yr(o),b=Yr(o).reverse(),w=j().concat(z());function x(B,J){return B.reduce((ie,oe)=>ie-o[oe],J)}function T(B,J){return B.reduce((ie,oe)=>x(ie,J)>0?ie.concat([oe]):ie,[])}function C(B){return c.map((J,ie)=>({start:J-s[ie]+.5+B,end:J+n-.5+B}))}function A(B,J,ie){const oe=C(J);return B.map(de=>{const _e=ie?0:-a,Ne=ie?a:0,Me=ie?"end":"start",Ee=oe[de][Me];return{index:de,loopPoint:Ee,slideLocation:zr(-1),translate:Tv(r,m[de]),target:()=>p.get()>Ee?_e:Ne}})}function j(){const B=d[0],J=T(b,B);return A(J,a,!1)}function z(){const B=n-d[0]-1,J=T(y,B);return A(J,-a,!0)}function E(){return w.every(({index:B})=>{const J=y.filter(ie=>ie!==B);return x(J,n)<=.1})}function I(){w.forEach(B=>{const{target:J,translate:ie,slideLocation:oe}=B,de=J();de!==oe.get()&&(ie.to(de),oe.set(de))})}function V(){w.forEach(B=>B.translate.clear())}return{canLoop:E,clear:V,loop:I,loopPoints:w}}function Fx(r,n,a){let s,o=!1;function c(m){if(!a)return;function g(y){for(const b of y)if(b.type==="childList"){m.reInit(),n.emit("slidesChanged");break}}s=new MutationObserver(y=>{o||(Ko(a)||a(m,y))&&g(y)}),s.observe(r,{childList:!0})}function d(){s&&s.disconnect(),o=!0}return{init:c,destroy:d}}function Yx(r,n,a,s){const o={};let c=null,d=null,p,m=!1;function g(){p=new IntersectionObserver(T=>{m||(T.forEach(C=>{const A=n.indexOf(C.target);o[A]=C}),c=null,d=null,a.emit("slidesInView"))},{root:r.parentElement,threshold:s}),n.forEach(T=>p.observe(T))}function y(){p&&p.disconnect(),m=!0}function b(T){return Kr(o).reduce((C,A)=>{const j=parseInt(A),{isIntersecting:z}=o[j];return(T&&z||!T&&!z)&&C.push(j),C},[])}function w(T=!0){if(T&&c)return c;if(!T&&d)return d;const C=b(T);return T&&(c=C),T||(d=C),C}return{init:g,destroy:y,get:w}}function Kx(r,n,a,s,o,c){const{measureSize:d,startEdge:p,endEdge:m}=r,g=a[0]&&o,y=T(),b=C(),w=a.map(d),x=A();function T(){if(!g)return 0;const z=a[0];return We(n[p]-z[p])}function C(){if(!g)return 0;const z=c.getComputedStyle(Tn(s));return parseFloat(z.getPropertyValue(`margin-${m}`))}function A(){return a.map((z,E,I)=>{const V=!E,Y=xf(I,E);return V?w[E]+y:Y?w[E]+b:I[E+1][p]-z[p]}).map(We)}return{slideSizes:w,slideSizesWithGaps:x,startGap:y,endGap:b}}function Xx(r,n,a,s,o,c,d,p,m){const{startEdge:g,endEdge:y,direction:b}=r,w=_f(a);function x(j,z){return Yr(j).filter(E=>E%z===0).map(E=>j.slice(E,E+z))}function T(j){return j.length?Yr(j).reduce((z,E,I)=>{const V=Tn(z)||0,Y=V===0,B=E===el(j),J=o[g]-c[V][g],ie=o[g]-c[E][y],oe=!s&&Y?b(d):0,de=!s&&B?b(p):0,_e=We(ie-de-(J+oe));return I&&_e>n+m&&z.push(E),B&&z.push(j.length),z},[]).map((z,E,I)=>{const V=Math.max(I[E-1]||0);return j.slice(V,z)}):[]}function C(j){return w?x(j,a):T(j)}return{groupSlides:C}}function Qx(r,n,a,s,o,c,d){const{align:p,axis:m,direction:g,startIndex:y,loop:b,duration:w,dragFree:x,dragThreshold:T,inViewThreshold:C,slidesToScroll:A,skipSnaps:j,containScroll:z,watchResize:E,watchSlides:I,watchDrag:V,watchFocus:Y}=c,B=2,J=Rx(),ie=J.measure(n),oe=a.map(J.measure),de=Ax(m,g),_e=de.measureSize(ie),Ne=kx(_e),Me=jx(p,_e),Ee=!b&&!!z,P=b||!!z,{slideSizes:Q,slideSizesWithGaps:X,startGap:le,endGap:N}=Kx(de,ie,oe,a,P,o),q=Xx(de,_e,A,b,ie,oe,le,N,B),{snaps:ae,snapsAligned:ee}=Ix(de,Me,ie,oe,q),ce=-Tn(ae)+Tn(X),{snapsContained:Se,scrollContainLimit:he}=Lx(_e,ce,ee,z,B),Le=Ee?Se:ee,{limit:xe}=Px(ce,Le,b),et=xv(el(Le),y,b),te=et.clone(),se=Yr(a),Z=({dragHandler:On,scrollBody:Va,scrollBounds:Fa,options:{loop:$}})=>{$||Fa.constrain(On.pointerDown()),Va.seek()},fe=({scrollBody:On,translate:Va,location:Fa,offsetLocation:$,previousLocation:K,scrollLooper:ne,slideLooper:re,dragHandler:ve,animation:ot,eventHandler:jt,scrollBounds:yn,options:{loop:Qt}},Nn)=>{const tl=On.settled(),nl=!yn.shouldConstrain(),Us=Qt?tl:tl&&nl,Ei=Us&&!ve.pointerDown();Ei&&ot.stop();const Ls=Fa.get()*Nn+K.get()*(1-Nn);$.set(Ls),Qt&&(ne.loop(On.direction()),re.loop()),Va.to($.get()),Ei&&jt.emit("settle"),Us||jt.emit("scroll")},pe=Cx(s,o,()=>Z(mt),On=>fe(mt,On)),Te=.68,it=Le[et.get()],ze=zr(it),Pt=zr(it),Rt=zr(it),Kt=zr(it),Xt=Mx(ze,Rt,Pt,Kt,w,Te),la=Hx(b,Le,ce,xe,Kt),An=Gx(pe,et,te,Xt,la,Kt,d),kt=zx(xe),$a=Xr(),Bn=Yx(n,a,d,C),{slideRegistry:vt}=qx(Ee,z,Le,he,q,se),sn=$x(r,a,vt,An,Xt,$a,d,Y),mt={ownerDocument:s,ownerWindow:o,eventHandler:d,containerRect:ie,slideRects:oe,animation:pe,axis:de,dragHandler:Ox(de,r,s,o,Kt,Nx(de,o),ze,pe,An,Xt,la,et,d,Ne,x,T,j,Te,V),eventStore:$a,percentOfView:Ne,index:et,indexPrevious:te,limit:xe,location:ze,offsetLocation:Rt,previousLocation:Pt,options:c,resizeHandler:Dx(n,d,o,a,de,E,J),scrollBody:Xt,scrollBounds:Ux(xe,Rt,Kt,Xt,Ne),scrollLooper:Bx(ce,xe,Rt,[ze,Rt,Pt,Kt]),scrollProgress:kt,scrollSnapList:Le.map(kt.get),scrollSnaps:Le,scrollTarget:la,scrollTo:An,slideLooper:Vx(de,_e,ce,Q,X,ae,Le,Rt,a),slideFocus:sn,slidesHandler:Fx(n,d,I),slidesInView:Bn,slideIndexes:se,slideRegistry:vt,slidesToScroll:q,target:Kt,translate:Tv(de,n)};return mt}function Zx(){let r={},n;function a(g){n=g}function s(g){return r[g]||[]}function o(g){return s(g).forEach(y=>y(n,g)),m}function c(g,y){return r[g]=s(g).concat([y]),m}function d(g,y){return r[g]=s(g).filter(b=>b!==y),m}function p(){r={}}const m={init:a,emit:o,off:d,on:c,clear:p};return m}const Jx={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function Wx(r){function n(c,d){return Sv(c,d||{})}function a(c){const d=c.breakpoints||{},p=Kr(d).filter(m=>r.matchMedia(m).matches).map(m=>d[m]).reduce((m,g)=>n(m,g),{});return n(c,p)}function s(c){return c.map(d=>Kr(d.breakpoints||{})).reduce((d,p)=>d.concat(p),[]).map(r.matchMedia)}return{mergeOptions:n,optionsAtMedia:a,optionsMediaQueries:s}}function e2(r){let n=[];function a(c,d){return n=d.filter(({options:p})=>r.optionsAtMedia(p).active!==!1),n.forEach(p=>p.init(c,r)),d.reduce((p,m)=>Object.assign(p,{[m.name]:m}),{})}function s(){n=n.filter(c=>c.destroy())}return{init:a,destroy:s}}function Mo(r,n,a){const s=r.ownerDocument,o=s.defaultView,c=Wx(o),d=e2(c),p=Xr(),m=Zx(),{mergeOptions:g,optionsAtMedia:y,optionsMediaQueries:b}=c,{on:w,off:x,emit:T}=m,C=de;let A=!1,j,z=g(Jx,Mo.globalOptions),E=g(z),I=[],V,Y,B;function J(){const{container:se,slides:Z}=E;Y=(Fd(se)?r.querySelector(se):se)||r.children[0];const pe=Fd(Z)?Y.querySelectorAll(Z):Z;B=[].slice.call(pe||Y.children)}function ie(se){const Z=Qx(r,Y,B,s,o,se,m);if(se.loop&&!Z.slideLooper.canLoop()){const fe=Object.assign({},se,{loop:!1});return ie(fe)}return Z}function oe(se,Z){A||(z=g(z,se),E=y(z),I=Z||I,J(),j=ie(E),b([z,...I.map(({options:fe})=>fe)]).forEach(fe=>p.add(fe,"change",de)),E.active&&(j.translate.to(j.location.get()),j.animation.init(),j.slidesInView.init(),j.slideFocus.init(te),j.eventHandler.init(te),j.resizeHandler.init(te),j.slidesHandler.init(te),j.options.loop&&j.slideLooper.loop(),Y.offsetParent&&B.length&&j.dragHandler.init(te),V=d.init(te,I)))}function de(se,Z){const fe=q();_e(),oe(g({startIndex:fe},se),Z),m.emit("reInit")}function _e(){j.dragHandler.destroy(),j.eventStore.clear(),j.translate.clear(),j.slideLooper.clear(),j.resizeHandler.destroy(),j.slidesHandler.destroy(),j.slidesInView.destroy(),j.animation.destroy(),d.destroy(),p.clear()}function Ne(){A||(A=!0,p.clear(),_e(),m.emit("destroy"),m.clear())}function Me(se,Z,fe){!E.active||A||(j.scrollBody.useBaseFriction().useDuration(Z===!0?0:E.duration),j.scrollTo.index(se,fe||0))}function Ee(se){const Z=j.index.add(1).get();Me(Z,se,-1)}function P(se){const Z=j.index.add(-1).get();Me(Z,se,1)}function Q(){return j.index.add(1).get()!==q()}function X(){return j.index.add(-1).get()!==q()}function le(){return j.scrollSnapList}function N(){return j.scrollProgress.get(j.offsetLocation.get())}function q(){return j.index.get()}function ae(){return j.indexPrevious.get()}function ee(){return j.slidesInView.get()}function ce(){return j.slidesInView.get(!1)}function Se(){return V}function he(){return j}function Le(){return r}function xe(){return Y}function et(){return B}const te={canScrollNext:Q,canScrollPrev:X,containerNode:xe,internalEngine:he,destroy:Ne,off:x,on:w,emit:T,plugins:Se,previousScrollSnap:ae,reInit:C,rootNode:Le,scrollNext:Ee,scrollPrev:P,scrollProgress:N,scrollSnapList:le,scrollTo:Me,selectedScrollSnap:q,slideNodes:et,slidesInView:ee,slidesNotInView:ce};return oe(n,a),setTimeout(()=>m.emit("init"),0),te}Mo.globalOptions=void 0;function Tf(r={},n=[]){const a=S.useRef(r),s=S.useRef(n),[o,c]=S.useState(),[d,p]=S.useState(),m=S.useCallback(()=>{o&&o.reInit(a.current,s.current)},[o]);return S.useEffect(()=>{wf(a.current,r)||(a.current=r,m())},[r,m]),S.useEffect(()=>{xx(s.current,n)||(s.current=n,m())},[n,m]),S.useEffect(()=>{if(Sx()&&d){Mo.globalOptions=Tf.globalOptions;const g=Mo(d,a.current,s.current);return c(g),()=>g.destroy()}else c(void 0)},[d,c]),[p,o]}Tf.globalOptions=void 0;function t2({items:r,activeId:n,mainImageId:a,onSelect:s,onDelete:o,onSetMain:c,pins:d=[],bedId:p}){const[m,g]=Tf({dragFree:!0,containScroll:"trimSnaps",align:"start",skipSnaps:!1,inViewThreshold:.7});return h.jsx("div",{className:"filmstrip-wrap",children:h.jsx("div",{className:"image-history sidebar-filmstrip",ref:m,children:h.jsx("div",{className:"embla__container",style:{display:"flex",gap:10},children:r.map(y=>{const w=d.filter(C=>C.image_id===y.id).length,x=y.id===a,T=y.id===n;return h.jsxs("div",{className:"hist-thumb-wrapper",style:{flex:"0 0 auto",width:180},children:[h.jsxs("button",{className:`hist-thumb ${T?"active":""}`,onClick:()=>s(y.id),style:{aspectRatio:"4 / 3"},"aria-current":T?"true":void 0,children:[h.jsx("img",{src:y.url,alt:y.label??""}),h.jsx("div",{className:"pin-count-badge",title:`${w} pin${w===1?"":"s"}`,children:h.jsx("span",{children:w})}),x&&h.jsx("div",{className:"main-image-badge",title:"Main image",children:h.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z",fill:"currentColor"})})}),y.label&&h.jsx("div",{className:"hist-meta",children:y.label})]}),h.jsxs("div",{className:"hist-actions",children:[!x&&c&&h.jsx("button",{type:"button",className:"hist-action-btn hist-action-main",onClick:()=>c(y.id),title:"Set as main image","aria-label":"Set as main image",children:h.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z",fill:"currentColor"})})}),o&&h.jsx("button",{type:"button",className:"hist-action-btn hist-action-delete",onClick:()=>o(y.id),title:"Delete image","aria-label":"Delete image",children:h.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z",fill:"currentColor"})})})]})]},y.id)})})})})}function n2({plantId:r,onClose:n,initialFocusId:a,linkBack:s,onViewOnMap:o}){const[c,d]=S.useState([]),[p,m]=S.useState(!1),[g,y]=S.useState(null),b=S.useRef(null),w=document.body;S.useEffect(()=>{let C=!1;return(async()=>{const A=await wy(r);C||d(A)})(),()=>{C=!0}},[r]),S.useEffect(()=>{const C=A=>{A.key==="Escape"&&n()};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[n]);const x=async C=>{m(!0);try{await px(r,C,{imageId:s?.imageId,pinId:s?.pinId});const A=await wy(r);d(A),y({type:"success",message:"Uploaded"}),setTimeout(()=>y(null),1500)}finally{m(!1)}},T=async C=>{confirm("Delete this photo?")&&(await gx(C),d(A=>A.filter(j=>j.id!==C)))};return Bo.createPortal(h.jsx("div",{className:"pgm-backdrop",onClick:n,children:h.jsxs("div",{className:"pgm",onClick:C=>C.stopPropagation(),children:[h.jsxs("div",{className:"pgm-head",children:[h.jsx("div",{className:"pgm-title",children:"Plant photos"}),h.jsxs("div",{className:"pgm-actions",children:[h.jsx("button",{className:"ui-btn ui-btn--sm",onClick:()=>b.current?.click(),disabled:p,children:"Upload"}),h.jsx("button",{className:"ui-btn ui-btn--sm ui-btn--ghost",onClick:n,children:"Close"}),p?h.jsxs("div",{className:"pgm-status",children:[h.jsx("span",{className:"pgm-spinner","aria-hidden":!0}),"Uploading…"]}):g?h.jsx("div",{className:"pgm-status",role:"status","aria-live":"polite",children:g.message}):null]})]}),h.jsx("div",{className:"pgm-grid",children:c.map(C=>h.jsxs("div",{className:"pgm-item",children:[h.jsx("img",{src:C.url,alt:"Plant media",loading:"lazy"}),h.jsxs("div",{className:"pgm-row",children:[C.image_id||C.pin_id?h.jsx("button",{className:"ui-btn ui-btn--sm",onClick:()=>o?.({imageId:C.image_id??void 0,pinId:C.pin_id??void 0}),children:"View on map"}):h.jsx("span",{}),h.jsx("button",{className:"ui-btn ui-btn--sm ui-btn--ghost",onClick:()=>T(C.id),children:"Delete"})]})]},C.id))}),h.jsx("input",{ref:b,type:"file",accept:"image/*",style:{display:"none"},onChange:C=>{const A=C.target.files?.[0];A&&x(A),C.currentTarget.value=""}})]})}),w)}function a2({pinId:r,imageId:n,onClose:a}){const[s,o]=S.useState([]),[c,d]=S.useState(!1),[p,m]=S.useState(null),g=S.useRef(null),y=document.body;S.useEffect(()=>{let x=!1;return(async()=>{const T=await qa(r);x||o(T)})(),()=>{x=!0}},[r]);const b=async x=>{d(!0);try{await bf(r,x,{imageId:n});const T=await qa(r);o(T),m({type:"success",message:"Uploaded"}),setTimeout(()=>m(null),1500)}finally{d(!1)}},w=async x=>{confirm("Delete this photo?")&&(await yx(x),o(T=>T.filter(C=>C.id!==x)))};return Bo.createPortal(h.jsx("div",{className:"pgm-backdrop",onClick:a,children:h.jsxs("div",{className:"pgm",onClick:x=>x.stopPropagation(),children:[h.jsxs("div",{className:"pgm-head",children:[h.jsx("div",{className:"pgm-title",children:"Pin photos"}),h.jsxs("div",{className:"pgm-actions",children:[h.jsx("button",{className:"ui-btn ui-btn--sm",onClick:()=>g.current?.click(),disabled:c,children:"Upload"}),h.jsx("button",{className:"ui-btn ui-btn--sm ui-btn--ghost",onClick:a,children:"Close"}),c?h.jsxs("div",{className:"pgm-status",children:[h.jsx("span",{className:"pgm-spinner","aria-hidden":!0}),"Uploading…"]}):p?h.jsx("div",{className:"pgm-status",role:"status","aria-live":"polite",children:p.message}):null]})]}),h.jsx("div",{className:"pgm-grid",children:s.map(x=>h.jsxs("div",{className:"pgm-item",children:[h.jsx("img",{src:x.url,alt:"Pin media",loading:"lazy"}),h.jsxs("div",{className:"pgm-row",children:[h.jsx("span",{}),h.jsx("button",{className:"ui-btn ui-btn--sm ui-btn--ghost",onClick:()=>w(x.id),children:"Delete"})]})]},x.id))}),h.jsx("input",{ref:g,type:"file",accept:"image/*",style:{display:"none"},onChange:x=>{const T=x.target.files?.[0];T&&b(T),x.currentTarget.value=""}})]})}),y)}function i2({pinId:r,onClose:n,startIndex:a=0}){const[s,o]=S.useState([]),[c,d]=S.useState(a),[p,m]=S.useState(!0),g=S.useRef(null),[y,b]=S.useState(!1);if(S.useEffect(()=>{let T=!1;return(async()=>{const C=await qa(r);T||o(C.map(A=>({id:A.id,url:A.url,created_at:A.created_at})))})(),()=>{T=!0}},[r]),S.useEffect(()=>{const T=C=>{C.key==="Escape"&&n(),C.key==="ArrowRight"&&d(A=>Math.min(A+1,Math.max(0,s.length-1))),C.key==="ArrowLeft"&&d(A=>Math.max(A-1,0))};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[s.length,n]),S.useEffect(()=>{const T=()=>{m(!0),g.current&&cancelAnimationFrame(g.current);const A=performance.now(),j=()=>{performance.now()-A>1800?m(!1):g.current=requestAnimationFrame(j)};g.current=requestAnimationFrame(j)};T();const C=()=>T();return document.addEventListener("mousemove",C),document.addEventListener("touchstart",C,{passive:!0}),()=>{document.removeEventListener("mousemove",C),document.removeEventListener("touchstart",C),g.current&&cancelAnimationFrame(g.current)}},[]),s.length===0)return null;const w=s[Math.min(c,s.length-1)],x=w.created_at?new Date(w.created_at).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"";return Bo.createPortal(h.jsx("div",{onClick:n,style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.9)",zIndex:4e3,display:"grid",placeItems:"center"},children:h.jsxs("div",{onClick:T=>T.stopPropagation(),style:{position:"relative",padding:20},children:[h.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[h.jsx("img",{src:w.url,style:{maxWidth:"calc(100vw - 80px)",maxHeight:"calc(100vh - 80px)",objectFit:"contain",display:"block"}}),x?h.jsx("div",{style:{position:"absolute",left:12,bottom:12,background:"rgba(17,24,39,0.8)",color:"#fff",padding:"6px 10px",borderRadius:999,fontSize:12,boxShadow:"0 4px 16px rgba(0,0,0,0.35)",opacity:p?1:0,transition:"opacity .25s ease"},children:x}):null]}),c>0?h.jsx("button",{onClick:T=>{T.stopPropagation(),d(C=>Math.max(C-1,0))},style:{position:"fixed",left:16,top:"50%",transform:"translateY(-50%)",background:"rgba(255,255,255,0.18)",color:"#fff",border:0,borderRadius:999,width:36,height:36,cursor:"pointer",opacity:p?1:0,transition:"opacity .25s ease"},"aria-label":"Previous",children:"‹"}):null,c<s.length-1?h.jsx("button",{onClick:T=>{T.stopPropagation(),d(C=>Math.min(C+1,s.length-1))},style:{position:"fixed",right:16,top:"50%",transform:"translateY(-50%)",background:"rgba(255,255,255,0.18)",color:"#fff",border:0,borderRadius:999,width:36,height:36,cursor:"pointer",opacity:p?1:0,transition:"opacity .25s ease"},"aria-label":"Next",children:"›"}):null]})}),document.body)}async function s2(r){const{data:n,error:a}=await W.from("plant_details").insert(r).select("*").single();if(a)throw a;return n}async function r2(r,n){const{data:a,error:s}=await W.from("plant_details").update(n).eq("id",r).select("*").single();if(s)throw s;return a}async function Ev(r){const{data:n,error:a}=await W.from("plant_instances").select(`
      *,
      plant_details:plant_details_id(*)
    `).eq("pin_id",r).single();if(a){if(a.code==="PGRST116")return null;throw a}return n}async function l2(r){const{data:n,error:a}=await W.from("plant_instances").insert(r).select(`
      *,
      plant_details:plant_details_id(*)
    `).single();if(a)throw a;return n}async function o2(r,n){const{data:a,error:s}=await W.from("plant_instances").update(n).eq("id",r).select(`
      *,
      plant_details:plant_details_id(*)
    `).single();if(s)throw s;return a}async function c2(r){const{data:n,error:a}=await W.from("care_events").select("*").eq("plant_instance_id",r).order("event_date",{ascending:!1});if(a)throw a;return n??[]}async function u2(r){const{data:n,error:a}=await W.from("care_events").insert(r).select("*").single();if(a)throw a;return n}async function d2(r){const{error:n}=await W.from("care_events").delete().eq("id",r);if(n)throw n}async function f2(r){const n=r.toLowerCase().trim();if(!n)return[];try{const a=await g2(n);if(a.length>0)return console.log("Using cached search results from Supabase"),a}catch(a){console.log("Failed to get cached results:",a)}try{const a=await h2(n);if(a.length>0)return await p2(n,a),a}catch(a){throw console.error("API search failed:",a),new Error("Unable to fetch plant data. Please try again.")}return[]}async function h2(r){return console.warn("No Trefle API token found. Using mock data for development."),await m2(r)}async function m2(r){await new Promise(o=>setTimeout(o,800));const n={calendula:{name:"Calendula",scientific_name:"Calendula officinalis",common_names:["Pot Marigold","English Marigold"],family:"Asteraceae",genus:"Calendula",species:"officinalis",growth_habit:"annual",hardiness_zones:[2,3,4,5,6,7,8,9,10,11],sun_exposure:"full_sun",water_needs:"moderate",mature_height:24,mature_width:12,bloom_time:"spring",bloom_duration:16,flower_color:["orange","yellow"],foliage_color:["green"],soil_type:"well_draining",soil_ph:"neutral",fertilizer_needs:"low",pruning_needs:"minimal",planting_season:"spring",planting_depth:.25,spacing:12},tomato:{name:"Tomato",scientific_name:"Solanum lycopersicum",common_names:["Tomato","Love Apple"],family:"Solanaceae",genus:"Solanum",species:"lycopersicum",growth_habit:"annual",hardiness_zones:[2,3,4,5,6,7,8,9,10,11],sun_exposure:"full_sun",water_needs:"moderate",mature_height:60,mature_width:24,bloom_time:"summer",bloom_duration:12,flower_color:["yellow"],foliage_color:["green"],soil_type:"well_draining",soil_ph:"neutral",fertilizer_needs:"moderate",pruning_needs:"moderate",planting_season:"spring",planting_depth:.25,spacing:24},basil:{name:"Basil",scientific_name:"Ocimum basilicum",common_names:["Sweet Basil","Common Basil"],family:"Lamiaceae",genus:"Ocimum",species:"basilicum",growth_habit:"annual",hardiness_zones:[2,3,4,5,6,7,8,9,10,11],sun_exposure:"full_sun",water_needs:"moderate",mature_height:18,mature_width:12,bloom_time:"summer",bloom_duration:8,flower_color:["white","pink"],foliage_color:["green"],soil_type:"well_draining",soil_ph:"neutral",fertilizer_needs:"low",pruning_needs:"minimal",planting_season:"spring",planting_depth:.25,spacing:12},rose:{name:"Rose",scientific_name:"Rosa",common_names:["Rose","Garden Rose"],family:"Rosaceae",genus:"Rosa",species:"",growth_habit:"shrub",hardiness_zones:[3,4,5,6,7,8,9,10],sun_exposure:"full_sun",water_needs:"moderate",mature_height:48,mature_width:36,bloom_time:"spring",bloom_duration:16,flower_color:["red","pink","white","yellow","orange"],foliage_color:["green"],soil_type:"well_draining",soil_ph:"neutral",fertilizer_needs:"moderate",pruning_needs:"moderate",planting_season:"spring",planting_depth:1,spacing:36},lavender:{name:"Lavender",scientific_name:"Lavandula angustifolia",common_names:["English Lavender","Common Lavender"],family:"Lamiaceae",genus:"Lavandula",species:"angustifolia",growth_habit:"perennial",hardiness_zones:[5,6,7,8,9],sun_exposure:"full_sun",water_needs:"low",mature_height:24,mature_width:18,bloom_time:"summer",bloom_duration:8,flower_color:["purple","blue"],foliage_color:["silver","green"],soil_type:"well_draining",soil_ph:"alkaline",fertilizer_needs:"low",pruning_needs:"minimal",planting_season:"spring",planting_depth:.5,spacing:18},sunflower:{name:"Sunflower",scientific_name:"Helianthus annuus",common_names:["Common Sunflower","Annual Sunflower"],family:"Asteraceae",genus:"Helianthus",species:"annuus",growth_habit:"annual",hardiness_zones:[2,3,4,5,6,7,8,9,10,11],sun_exposure:"full_sun",water_needs:"moderate",mature_height:120,mature_width:24,bloom_time:"summer",bloom_duration:8,flower_color:["yellow"],foliage_color:["green"],soil_type:"well_draining",soil_ph:"neutral",fertilizer_needs:"low",pruning_needs:"minimal",planting_season:"spring",planting_depth:.5,spacing:24},mint:{name:"Mint",scientific_name:"Mentha",common_names:["Mint","Peppermint","Spearmint"],family:"Lamiaceae",genus:"Mentha",species:"",growth_habit:"perennial",hardiness_zones:[3,4,5,6,7,8,9,10],sun_exposure:"partial_sun",water_needs:"high",mature_height:24,mature_width:36,bloom_time:"summer",bloom_duration:6,flower_color:["purple","white"],foliage_color:["green"],soil_type:"well_draining",soil_ph:"neutral",fertilizer_needs:"low",pruning_needs:"minimal",planting_season:"spring",planting_depth:.25,spacing:18},pepper:{name:"Pepper",scientific_name:"Capsicum annuum",common_names:["Bell Pepper","Sweet Pepper","Capsicum"],family:"Solanaceae",genus:"Capsicum",species:"annuum",growth_habit:"annual",hardiness_zones:[2,3,4,5,6,7,8,9,10,11],sun_exposure:"full_sun",water_needs:"moderate",mature_height:36,mature_width:18,bloom_time:"summer",bloom_duration:12,flower_color:["white"],foliage_color:["green"],soil_type:"well_draining",soil_ph:"neutral",fertilizer_needs:"moderate",pruning_needs:"minimal",planting_season:"spring",planting_depth:.25,spacing:18},zinnia:{name:"Zinnia",scientific_name:"Zinnia elegans",common_names:["Common Zinnia","Youth-and-old-age"],family:"Asteraceae",genus:"Zinnia",species:"elegans",growth_habit:"annual",hardiness_zones:[2,3,4,5,6,7,8,9,10,11],sun_exposure:"full_sun",water_needs:"moderate",mature_height:36,mature_width:12,bloom_time:"summer",bloom_duration:12,flower_color:["red","pink","orange","yellow","white","purple"],foliage_color:["green"],soil_type:"well_draining",soil_ph:"neutral",fertilizer_needs:"low",pruning_needs:"minimal",planting_season:"spring",planting_depth:.25,spacing:12},marigold:{name:"Marigold",scientific_name:"Tagetes",common_names:["Marigold","French Marigold","African Marigold"],family:"Asteraceae",genus:"Tagetes",species:"",growth_habit:"annual",hardiness_zones:[2,3,4,5,6,7,8,9,10,11],sun_exposure:"full_sun",water_needs:"moderate",mature_height:24,mature_width:12,bloom_time:"summer",bloom_duration:16,flower_color:["orange","yellow","red"],foliage_color:["green"],soil_type:"well_draining",soil_ph:"neutral",fertilizer_needs:"low",pruning_needs:"minimal",planting_season:"spring",planting_depth:.25,spacing:12}},a=[],s=r.toLowerCase();for(const[o,c]of Object.entries(n))(o.includes(s)||c.name.toLowerCase().includes(s)||c.scientific_name.toLowerCase().includes(s)||c.common_names.some(d=>d.toLowerCase().includes(s)))&&a.push(c);return a.slice(0,5)}async function p2(r,n){try{const{error:a}=await W.from("plant_search_cache").upsert({query:r.toLowerCase(),results:n,created_at:new Date().toISOString()});a&&console.error("Failed to cache search results:",a)}catch(a){console.error("Error caching search results:",a)}}async function g2(r){try{const{data:n,error:a}=await W.from("plant_search_cache").select("results").eq("query",r.toLowerCase()).single();return a||!n?[]:n.results}catch(n){return console.error("Error getting cached results:",n),[]}}function It(r){return r!==null&&"id"in r&&r.id!==void 0}function y2({open:r,onClose:n,bedId:a,imageId:s,initial:o,onSaved:c,onDeleted:d,onOpenPinGallery:p}){const[m,g]=S.useState(null),[y,b]=S.useState("basic"),[w,x]=S.useState(null),[T,C]=S.useState(!1),A=S.useRef(null),[j,z]=S.useState(null),[E,I]=S.useState(null),[V,Y]=S.useState(!1),[B,J]=S.useState([]),[ie,oe]=S.useState(!1);S.useEffect(()=>{r&&m&&It(m)?de(m.id):(z(null),I(null))},[r,m]);const de=async X=>{Y(!0),oe(!0);try{const le=await Ev(X);if(le){I(le),z(le.plant_details);const N=await c2(le.id);J(N)}else I(null),z(null),J([])}catch(le){console.error("Error loading plant data:",le),I(null),z(null),J([])}finally{Y(!1),oe(!1)}};S.useEffect(()=>{if(r){if(!o){g(null);return}It(o)?(g({...o,isEdit:!0}),b("basic")):(g({bed_id:a,image_id:s??null,x:o.x,y:o.y,name:"",notes:"",status:"active"}),b("plant_details"))}},[r,o,a,s]),S.useEffect(()=>{let X=!1;return(async()=>{if(!(!r||!m||!It(m)))try{const le=await qa(m.id);X||x(le[0]?.url??null)}catch{X||x(null)}})(),()=>{X=!0}},[r,m]);const _e=S.useMemo(()=>{if(!o||!It(o))return null;const X=o;return{name:X.name??"",notes:X.notes??""}},[o]),Ne=S.useMemo(()=>m?It(m)?_e?(m.name??"")!==_e.name||(m.notes??"")!==_e.notes:!1:!0:!1,[m,_e]),Me=async()=>{if(m)try{let X;if(It(m)){const{data:le,error:N}=await W.from("pins").update({name:m.name,notes:m.notes,x:m.x,y:m.y,status:m.status,last_care_date:m.last_care_date,next_care_date:m.next_care_date}).eq("id",m.id).select("*").single();if(N)throw N;X=le}else{const{data:le,error:N}=await W.from("pins").insert({bed_id:a,image_id:s,name:m.name,notes:m.notes,x:m.x,y:m.y,status:m.status||"active"}).select("*").single();if(N)throw N;X=le}if(j&&X){let le=j.id;j.id?await r2(j.id,j):le=(await s2({name:j.name,scientific_name:j.scientific_name,common_names:j.common_names,family:j.family,genus:j.genus,species:j.species,cultivar:j.cultivar,growth_habit:j.growth_habit,hardiness_zones:j.hardiness_zones,sun_exposure:j.sun_exposure,water_needs:j.water_needs,mature_height:j.mature_height,mature_width:j.mature_width,bloom_time:j.bloom_time,bloom_duration:j.bloom_duration,flower_color:j.flower_color,foliage_color:j.foliage_color,soil_type:j.soil_type,soil_ph:j.soil_ph,fertilizer_needs:j.fertilizer_needs,pruning_needs:j.pruning_needs,planting_season:j.planting_season,planting_depth:j.planting_depth,spacing:j.spacing})).id,E&&(E.id?await o2(E.id,{plant_details_id:le,planted_date:E.planted_date,source:E.source,source_notes:E.source_notes,cost:E.cost,health_status:E.health_status,notes:E.notes}):await l2({plant_details_id:le,bed_id:a,pin_id:X.id,planted_date:E.planted_date,source:E.source,source_notes:E.source_notes,cost:E.cost,health_status:E.health_status,notes:E.notes})),await W.from("pins").update({plant_details_id:le}).eq("id",X.id)}c(X),n()}catch(X){console.error("Error saving pin:",X),alert("Failed to save plant. Please try again.")}},Ee=async()=>{if(!(!m||!It(m))&&confirm("Delete this pin?"))try{const{error:X}=await W.from("pins").delete().eq("id",m.id);if(X)throw X;d(m.id)}catch(X){console.error("Error deleting pin:",X),alert("Failed to delete pin")}},P=async X=>{if(!(!m||!It(m))){C(!0);try{await bf(m.id,X);const le=await qa(m.id);x(le[0]?.url??null)}catch(le){console.error("Error uploading featured image:",le),alert("Failed to upload image")}finally{C(!1)}}},Q=[{id:"basic",label:"Basic Info",icon:"📝"},{id:"plant_details",label:"Plant Details",icon:"🌱"},{id:"care_history",label:"Care History",icon:"📅"},{id:"photos",label:"Photos",icon:"📸"},{id:"notes",label:"Notes",icon:"📋"}];return h.jsx("div",{className:`drawer ${r?"open":""}`,onClick:n,children:h.jsxs("div",{className:"drawer-panel",onClick:X=>X.stopPropagation(),children:[h.jsxs("div",{className:"drawer-header",children:[h.jsx("div",{className:"drag-handle"}),h.jsx("div",{className:"title",children:It(m)?"Edit Plant":"Add New Plant"}),h.jsx("button",{className:"btn",onClick:n,"aria-label":"Close",children:"✕"})]}),h.jsx("div",{className:"drawer-tabs",children:Q.map(X=>h.jsxs("button",{className:`drawer-tab ${y===X.id?"active":""}`,onClick:()=>b(X.id),children:[h.jsx("span",{className:"tab-icon",children:X.icon}),h.jsx("span",{className:"tab-label",children:X.label})]},X.id))}),h.jsxs("div",{className:"drawer-body",children:[y==="basic"&&h.jsx(v2,{draft:m,setDraft:g,featuredUrl:w,uploadingFeatured:T,onFeaturedUpload:P,featuredInputRef:A}),y==="plant_details"&&h.jsx(b2,{draft:m,setDraft:g,plantDetails:j,setPlantDetails:z,plantInstance:E,setPlantInstance:I}),y==="care_history"&&h.jsx(w2,{draft:m,plantInstance:E,careEvents:B,setCareEvents:J}),y==="photos"&&h.jsx(_2,{draft:m,onOpenPinGallery:p}),y==="notes"&&h.jsx(S2,{draft:m,setDraft:g})]}),h.jsxs("div",{className:"drawer-actions",children:[It(m)&&h.jsx("button",{className:"btn danger",onClick:Ee,children:"Delete"}),h.jsx("div",{className:"drawer-actions-spacer"}),h.jsx("button",{className:"btn",onClick:n,children:"Cancel"}),h.jsx("button",{className:"btn primary",onClick:Me,disabled:!Ne,children:It(m)?"Save Changes":"Create Plant"})]})]})})}function v2({draft:r,setDraft:n,featuredUrl:a,uploadingFeatured:s,onFeaturedUpload:o,featuredInputRef:c}){return r?h.jsxs("div",{className:"tab-content",children:[h.jsxs("div",{className:"basic-info-header",children:[h.jsx("h3",{children:"Basic Information"}),h.jsx("div",{className:"ai-discovery-banner",children:h.jsxs("div",{className:"ai-discovery-content",children:[h.jsx("div",{className:"ai-discovery-icon",children:"🤖"}),h.jsxs("div",{className:"ai-discovery-text",children:[h.jsx("h5",{children:"Discover AI-Powered Plant Details"}),h.jsx("p",{children:'Switch to the "Plant Details" tab to automatically fill in care requirements, growth habits, and more!'})]}),h.jsx("div",{className:"ai-discovery-arrow",children:h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})})]})})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Plant Name"}),h.jsx("input",{type:"text",value:r.name||"",onChange:d=>n({...r,name:d.target.value}),placeholder:"Enter plant name..."}),h.jsx("div",{className:"field-hint",children:'💡 Tip: Enter the plant name here, then switch to "Plant Details" for AI-powered auto-fill'})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Position"}),h.jsxs("div",{className:"position-display",children:["X: ",r.x.toFixed(2),", Y: ",r.y.toFixed(2)]})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Status"}),h.jsxs("select",{value:r.status||"active",onChange:d=>n({...r,status:d.target.value}),children:[h.jsx("option",{value:"active",children:"Active"}),h.jsx("option",{value:"dormant",children:"Dormant"}),h.jsx("option",{value:"removed",children:"Removed"}),h.jsx("option",{value:"dead",children:"Dead"})]})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Notes"}),h.jsx("textarea",{value:r.notes||"",onChange:d=>n({...r,notes:d.target.value}),placeholder:"Add any notes about this plant...",rows:3})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Featured Photo"}),h.jsxs("div",{className:"featured-photo",children:[a?h.jsx("img",{src:a,alt:"Featured plant photo"}):h.jsxs("div",{className:"photo-placeholder",children:[h.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),h.jsx("polyline",{points:"7,10 12,15 17,10"}),h.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),h.jsx("span",{children:"No featured photo"})]}),h.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:d=>{const p=d.target.files?.[0];p&&o(p)},style:{display:"none"}}),h.jsx("button",{type:"button",onClick:()=>c.current?.click(),disabled:s,className:"upload-btn",children:s?"Uploading...":"Upload Photo"})]})]})]}):null}function b2({draft:r,setDraft:n,plantDetails:a,setPlantDetails:s,plantInstance:o,setPlantInstance:c}){const[d,p]=S.useState(!1),[m,g]=S.useState(!1),[y,b]=S.useState(""),[w,x]=S.useState([]),[T,C]=S.useState(!1);S.useEffect(()=>{r&&It(r)&&!a&&A(r.id)},[r,a]),S.useEffect(()=>{r?.name&&!y&&b(r.name)},[r?.name,y]);const A=async E=>{p(!0);try{const I=await Ev(E);I?(c(I),s(I.plant_details||null)):(s({id:"",name:r?.name||"",scientific_name:"",common_names:[],family:"",genus:"",species:"",cultivar:"",growth_habit:"perennial",hardiness_zones:[],sun_exposure:"full_sun",water_needs:"moderate",mature_height:void 0,mature_width:void 0,bloom_time:void 0,bloom_duration:void 0,flower_color:[],foliage_color:[],soil_type:void 0,soil_ph:void 0,fertilizer_needs:void 0,pruning_needs:void 0,planting_season:void 0,planting_depth:void 0,spacing:void 0,created_at:"",updated_at:""}),c({id:"",plant_details_id:"",bed_id:r?.bed_id||"",pin_id:E,planted_date:void 0,source:void 0,source_notes:"",cost:void 0,health_status:"good",notes:"",created_at:"",updated_at:""}))}catch(I){console.error("Error loading plant data:",I)}finally{p(!1)}},j=async()=>{const E=y.trim();if(!E){alert("Please enter a search term.");return}g(!0);try{const I=await f2(E);x(I),C(!0)}catch(I){console.error("Error searching for plant:",I),alert("Failed to search for plant. Please try again.")}finally{g(!1)}},z=E=>{s({...a,name:E.name,scientific_name:E.scientific_name,common_names:E.common_names,family:E.family,genus:E.genus,species:E.species,growth_habit:E.growth_habit,hardiness_zones:E.hardiness_zones,sun_exposure:E.sun_exposure,water_needs:E.water_needs,mature_height:E.mature_height,mature_width:E.mature_width,bloom_time:E.bloom_time,bloom_duration:E.bloom_duration,flower_color:E.flower_color,foliage_color:E.foliage_color,soil_type:E.soil_type,soil_ph:E.soil_ph,fertilizer_needs:E.fertilizer_needs,pruning_needs:E.pruning_needs,planting_season:E.planting_season,planting_depth:E.planting_depth,spacing:E.spacing}),b(E.name),C(!1)};return d?h.jsxs("div",{className:"tab-content",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"Loading plant details..."})]}):!a||!o?h.jsx("div",{className:"tab-content",children:h.jsx("p",{children:"No plant details available."})}):h.jsxs("div",{className:"tab-content",children:[h.jsx("h3",{children:"Plant Species Details"}),!a?.scientific_name&&h.jsxs("div",{className:"ai-welcome-section",children:[h.jsxs("div",{className:"ai-welcome-header",children:[h.jsx("div",{className:"ai-welcome-icon",children:"🤖"}),h.jsxs("div",{className:"ai-welcome-text",children:[h.jsx("h4",{children:"AI-Powered Plant Discovery"}),h.jsx("p",{children:"Let AI help you add comprehensive plant details automatically!"})]})]}),h.jsxs("div",{className:"ai-benefits-grid",children:[h.jsxs("div",{className:"ai-benefit-item",children:[h.jsx("div",{className:"ai-benefit-icon",children:"🌱"}),h.jsxs("div",{className:"ai-benefit-content",children:[h.jsx("h5",{children:"Growth Details"}),h.jsx("p",{children:"Height, width, growth habit, and hardiness zones"})]})]}),h.jsxs("div",{className:"ai-benefit-item",children:[h.jsx("div",{className:"ai-benefit-icon",children:"☀️"}),h.jsxs("div",{className:"ai-benefit-content",children:[h.jsx("h5",{children:"Care Requirements"}),h.jsx("p",{children:"Sun exposure, water needs, and soil preferences"})]})]}),h.jsxs("div",{className:"ai-benefit-item",children:[h.jsx("div",{className:"ai-benefit-icon",children:"🌸"}),h.jsxs("div",{className:"ai-benefit-content",children:[h.jsx("h5",{children:"Blooming Info"}),h.jsx("p",{children:"Bloom time, duration, and flower characteristics"})]})]}),h.jsxs("div",{className:"ai-benefit-item",children:[h.jsx("div",{className:"ai-benefit-icon",children:"📅"}),h.jsxs("div",{className:"ai-benefit-content",children:[h.jsx("h5",{children:"Care Schedule"}),h.jsx("p",{children:"Planting season, pruning needs, and maintenance"})]})]})]}),h.jsxs("div",{className:"ai-search-section",children:[h.jsxs("div",{className:"search-header",children:[h.jsx("h5",{children:"Search for Your Plant"}),h.jsx("p",{children:"Enter the plant name and AI will find detailed information"})]}),h.jsxs("div",{className:"search-input-group",children:[h.jsx("input",{type:"text",value:y,onChange:E=>b(E.target.value),placeholder:"e.g., Rose, Tomato, Lavender, Japanese Maple...",className:"search-input",onKeyPress:E=>E.key==="Enter"&&j()}),h.jsx("button",{onClick:j,disabled:m||!y.trim(),className:"search-button",children:m?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"spinner spinner--sm"}),"Searching..."]}):h.jsxs(h.Fragment,{children:[h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Search"]})})]}),T&&w.length>0&&h.jsxs("div",{className:"search-results",children:[h.jsxs("div",{className:"results-header",children:[h.jsxs("h6",{children:["Found ",w.length," plant",w.length!==1?"s":""]}),h.jsx("button",{className:"close-results",onClick:()=>C(!1),children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),h.jsx("div",{className:"results-list",children:w.map((E,I)=>h.jsxs("div",{className:"result-item",onClick:()=>z(E),children:[h.jsxs("div",{className:"result-info",children:[h.jsx("h6",{className:"result-name",children:E.name}),E.scientific_name&&h.jsx("p",{className:"result-scientific",children:E.scientific_name}),h.jsxs("div",{className:"result-details",children:[h.jsxs("span",{className:"result-detail",children:[h.jsx("span",{className:"detail-icon",children:"🌱"}),E.growth_habit]}),h.jsxs("span",{className:"result-detail",children:[h.jsx("span",{className:"detail-icon",children:"☀️"}),E.sun_exposure.replace("_"," ")]}),h.jsxs("span",{className:"result-detail",children:[h.jsx("span",{className:"detail-icon",children:"💧"}),E.water_needs]})]})]}),h.jsx("div",{className:"result-action",children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})})]},I))})]}),T&&w.length===0&&h.jsxs("div",{className:"no-results",children:[h.jsx("div",{className:"no-results-icon",children:"🔍"}),h.jsx("h6",{children:"No plants found"}),h.jsx("p",{children:"Try a different search term or check the spelling"})]})]}),h.jsxs("div",{className:"ai-tips",children:[h.jsx("h6",{children:"💡 Search Tips:"}),h.jsxs("ul",{children:[h.jsx("li",{children:'Use common names like "Rose" or "Tomato"'}),h.jsx("li",{children:'Try scientific names like "Rosa" or "Solanum lycopersicum"'}),h.jsx("li",{children:'Include variety names like "Peace Rose" or "Cherry Tomato"'})]})]})]}),a?.scientific_name&&h.jsxs("div",{className:"ai-success-section",children:[h.jsxs("div",{className:"ai-success-header",children:[h.jsx("div",{className:"ai-success-icon",children:"✅"}),h.jsxs("div",{className:"ai-success-text",children:[h.jsx("h5",{children:"AI Data Loaded Successfully!"}),h.jsx("p",{children:"Plant details have been automatically filled in. You can edit any field below."})]})]}),h.jsxs("div",{className:"plant-details-summary",children:[h.jsxs("div",{className:"summary-item",children:[h.jsx("span",{className:"summary-label",children:"Species:"}),h.jsx("span",{className:"summary-value",children:a.scientific_name})]}),h.jsxs("div",{className:"summary-item",children:[h.jsx("span",{className:"summary-label",children:"Growth Habit:"}),h.jsx("span",{className:"summary-value",children:a.growth_habit})]}),h.jsxs("div",{className:"summary-item",children:[h.jsx("span",{className:"summary-label",children:"Sun Exposure:"}),h.jsx("span",{className:"summary-value",children:a.sun_exposure.replace("_"," ")})]}),h.jsxs("div",{className:"summary-item",children:[h.jsx("span",{className:"summary-label",children:"Water Needs:"}),h.jsx("span",{className:"summary-value",children:a.water_needs})]})]})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Plant Name"}),h.jsx("input",{type:"text",value:a.name,onChange:E=>s({...a,name:E.target.value}),placeholder:"e.g., Honeysuckle"})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Scientific Name"}),h.jsx("input",{type:"text",value:a.scientific_name||"",onChange:E=>s({...a,scientific_name:E.target.value}),placeholder:"e.g., Lonicera japonica"})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Growth Habit"}),h.jsxs("select",{value:a.growth_habit,onChange:E=>s({...a,growth_habit:E.target.value}),children:[h.jsx("option",{value:"annual",children:"Annual"}),h.jsx("option",{value:"perennial",children:"Perennial"}),h.jsx("option",{value:"biennial",children:"Biennial"}),h.jsx("option",{value:"shrub",children:"Shrub"}),h.jsx("option",{value:"tree",children:"Tree"}),h.jsx("option",{value:"vine",children:"Vine"}),h.jsx("option",{value:"groundcover",children:"Groundcover"})]})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Sun Exposure"}),h.jsxs("select",{value:a.sun_exposure,onChange:E=>s({...a,sun_exposure:E.target.value}),children:[h.jsx("option",{value:"full_sun",children:"Full Sun"}),h.jsx("option",{value:"partial_sun",children:"Partial Sun"}),h.jsx("option",{value:"partial_shade",children:"Partial Shade"}),h.jsx("option",{value:"full_shade",children:"Full Shade"})]})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Water Needs"}),h.jsxs("select",{value:a.water_needs,onChange:E=>s({...a,water_needs:E.target.value}),children:[h.jsx("option",{value:"low",children:"Low"}),h.jsx("option",{value:"moderate",children:"Moderate"}),h.jsx("option",{value:"high",children:"High"})]})]}),h.jsx("h3",{children:"This Plant Instance"}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Planted Date"}),h.jsx("input",{type:"date",value:o.planted_date||"",onChange:E=>c({...o,planted_date:E.target.value})})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Source"}),h.jsxs("select",{value:o.source||"",onChange:E=>c({...o,source:E.target.value}),children:[h.jsx("option",{value:"",children:"Select source..."}),h.jsx("option",{value:"nursery",children:"Nursery"}),h.jsx("option",{value:"seed",children:"Seed"}),h.jsx("option",{value:"cutting",children:"Cutting"}),h.jsx("option",{value:"division",children:"Division"}),h.jsx("option",{value:"gift",children:"Gift"}),h.jsx("option",{value:"other",children:"Other"})]})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Health Status"}),h.jsxs("select",{value:o.health_status,onChange:E=>c({...o,health_status:E.target.value}),children:[h.jsx("option",{value:"excellent",children:"Excellent"}),h.jsx("option",{value:"good",children:"Good"}),h.jsx("option",{value:"fair",children:"Fair"}),h.jsx("option",{value:"poor",children:"Poor"}),h.jsx("option",{value:"dead",children:"Dead"})]})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Notes"}),h.jsx("textarea",{value:o.notes||"",onChange:E=>c({...o,notes:E.target.value}),placeholder:"Any notes about this specific plant...",rows:3})]})]})}function w2({draft:r,plantInstance:n,careEvents:a,setCareEvents:s}){const[o,c]=S.useState(!1),[d,p]=S.useState({event_type:"watering",event_date:new Date().toISOString().split("T")[0],description:"",notes:"",cost:void 0,images:[]}),m=async()=>{if(!n||!d.description||!d.event_date){alert("Please fill in all required fields");return}try{const w=await u2({plant_instance_id:n.id,event_type:d.event_type,event_date:d.event_date,description:d.description,notes:d.notes||"",cost:d.cost,images:d.images||[]});s([w,...a]),p({event_type:"watering",event_date:new Date().toISOString().split("T")[0],description:"",notes:"",cost:void 0,images:[]}),c(!1)}catch(w){console.error("Error adding care event:",w),alert("Failed to add care event. Please try again.")}},g=async w=>{if(confirm("Delete this care event?"))try{await d2(w),s(a.filter(x=>x.id!==w))}catch(x){console.error("Error deleting care event:",x),alert("Failed to delete care event. Please try again.")}},y=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),b=w=>{switch(w){case"watering":return"💧";case"fertilizing":return"🌱";case"pruning":return"✂️";case"pest_treatment":return"🐛";case"disease_treatment":return"💊";case"transplanting":return"🔄";case"harvesting":return"🌾";default:return"📝"}};return h.jsxs("div",{className:"tab-content",children:[h.jsxs("div",{className:"care-history-header",children:[h.jsx("h3",{children:"Care Events"}),h.jsx("button",{className:"btn primary",onClick:()=>c(!0),disabled:!n,children:"Add Care Event"})]}),!n&&h.jsx("div",{className:"no-plant-instance",children:h.jsx("p",{children:"Create a plant instance first to track care events."})}),o&&n&&h.jsxs("div",{className:"add-care-event-form",children:[h.jsx("h4",{children:"Add New Care Event"}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Event Type"}),h.jsxs("select",{value:d.event_type,onChange:w=>p({...d,event_type:w.target.value}),children:[h.jsx("option",{value:"watering",children:"Watering"}),h.jsx("option",{value:"fertilizing",children:"Fertilizing"}),h.jsx("option",{value:"pruning",children:"Pruning"}),h.jsx("option",{value:"pest_treatment",children:"Pest Treatment"}),h.jsx("option",{value:"disease_treatment",children:"Disease Treatment"}),h.jsx("option",{value:"transplanting",children:"Transplanting"}),h.jsx("option",{value:"harvesting",children:"Harvesting"}),h.jsx("option",{value:"other",children:"Other"})]})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Date"}),h.jsx("input",{type:"date",value:d.event_date,onChange:w=>p({...d,event_date:w.target.value})})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Description *"}),h.jsx("input",{type:"text",value:d.description,onChange:w=>p({...d,description:w.target.value}),placeholder:"e.g., Deep watering after dry spell"})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Notes"}),h.jsx("textarea",{value:d.notes,onChange:w=>p({...d,notes:w.target.value}),placeholder:"Additional notes...",rows:2})]}),h.jsxs("div",{className:"field",children:[h.jsx("label",{children:"Cost ($)"}),h.jsx("input",{type:"number",step:"0.01",value:d.cost||"",onChange:w=>p({...d,cost:w.target.value?parseFloat(w.target.value):void 0}),placeholder:"0.00"})]}),h.jsxs("div",{className:"form-actions",children:[h.jsx("button",{className:"btn",onClick:()=>c(!1),children:"Cancel"}),h.jsx("button",{className:"btn primary",onClick:m,children:"Add Event"})]})]}),h.jsx("div",{className:"care-events-list",children:a.length===0?h.jsxs("div",{className:"no-events",children:[h.jsx("p",{children:"No care events recorded yet."}),h.jsx("p",{children:"Add your first care event to start tracking plant health."})]}):a.map(w=>h.jsxs("div",{className:"care-event",children:[h.jsxs("div",{className:"event-header",children:[h.jsx("div",{className:"event-icon",children:b(w.event_type)}),h.jsxs("div",{className:"event-info",children:[h.jsx("div",{className:"event-date",children:y(w.event_date)}),h.jsx("div",{className:"event-type",children:w.event_type.replace("_"," ").replace(/\b\w/g,x=>x.toUpperCase())})]}),h.jsx("button",{className:"event-delete-btn",onClick:()=>g(w.id),title:"Delete event",children:"✕"})]}),h.jsx("div",{className:"event-description",children:w.description}),w.notes&&h.jsx("div",{className:"event-notes",children:w.notes}),w.cost&&h.jsxs("div",{className:"event-cost",children:["Cost: $",w.cost.toFixed(2)]})]},w.id))})]})}function _2({draft:r,onOpenPinGallery:n}){const[a,s]=S.useState([]),[o,c]=S.useState(!0),[d,p]=S.useState(!1),m=S.useRef(null);if(S.useEffect(()=>{if(!r||!It(r))return;(async()=>{c(!0);try{const b=await qa(r.id);s(b)}catch(b){console.error("Error loading pin media:",b),s([])}finally{c(!1)}})()},[r]),!r||!It(r))return null;const g=async y=>{if(!(!r||!It(r))){p(!0);try{await bf(r.id,y);const b=await qa(r.id);s(b)}catch(b){console.error("Error uploading file:",b),alert("Failed to upload image")}finally{p(!1)}}};return h.jsxs("div",{className:"tab-content",children:[h.jsxs("div",{className:"photos-header",children:[h.jsx("h3",{children:"Plant Photos"}),h.jsxs("div",{className:"photos-actions",children:[h.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:y=>{const b=y.target.files?.[0];b&&g(b)},style:{display:"none"}}),h.jsx("button",{className:"btn",onClick:()=>m.current?.click(),disabled:d,children:d?"Uploading...":"Add Photo"})]})]}),o?h.jsxs("div",{className:"photos-loading",children:[h.jsx("div",{className:"loading-spinner"}),h.jsx("p",{children:"Loading photos..."})]}):a.length===0?h.jsx("div",{className:"photos-empty",children:h.jsxs("div",{className:"photo-placeholder",children:[h.jsx("span",{children:"No photos yet"}),h.jsx("p",{children:"Add your first photo to document this plant's growth"})]})}):h.jsx("div",{className:"photos-grid",children:a.map((y,b)=>h.jsxs("div",{className:"photo-item",children:[h.jsx("img",{src:y.url,alt:`Plant photo ${b+1}`,className:"photo-thumbnail"}),h.jsx("div",{className:"photo-overlay",children:h.jsx("button",{className:"photo-delete-btn",onClick:async()=>{confirm("Delete this photo?")&&console.log("Delete photo:",y.id)},title:"Delete photo",children:"✕"})}),h.jsx("div",{className:"photo-date-overlay",children:y.captured_at?h.jsx("span",{className:"photo-date",children:new Date(y.captured_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}):h.jsx("span",{className:"photo-date",children:"No date"})})]},y.id||b))})]})}function S2({draft:r,setDraft:n}){return r?h.jsx("div",{className:"tab-content",children:h.jsxs("div",{className:"field",children:[h.jsx("span",{children:"Notes"}),h.jsx("textarea",{value:r.notes||"",onChange:a=>n({...r,notes:a.target.value}),placeholder:"Add notes about this plant...",rows:6})]})}):null}function x2({timestamp:r,corner:n="br"}){const a=S.useMemo(()=>n==="bl"?{left:10,bottom:10}:{right:10,bottom:10},[n]);return h.jsx("div",{style:{position:"absolute",...a},children:h.jsx(_v,{content:`Date & time taken: ${r}`,placement:"top",autoTheme:!0,children:h.jsx("button",{className:"pill pill--icon","aria-label":"Captured info",children:h.jsxs("svg",{"aria-hidden":"true",width:"14",height:"14",viewBox:"0 0 24 24",children:[h.jsx("circle",{cx:"12",cy:"12",r:"11",fill:"currentColor",opacity:".08"}),h.jsx("path",{d:"M12 8.5a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5Zm-1.1 2.7h2.2v6.3h-2.2z",fill:"currentColor"})]})})})})}function Ey({isOpen:r,onClose:n,onConfirm:a,title:s,message:o,confirmText:c="Delete",cancelText:d="Cancel"}){if(!r)return null;const p=()=>{a(),n()};return h.jsx("div",{className:"modal-backdrop",onClick:n,children:h.jsxs("div",{className:"modal",onClick:m=>m.stopPropagation(),children:[h.jsx("div",{className:"modal-header",children:h.jsx("h3",{className:"modal-title",children:s})}),h.jsx("div",{className:"modal-body",children:h.jsx("p",{children:o})}),h.jsxs("div",{className:"modal-actions",children:[h.jsx("button",{type:"button",className:"ui-btn ui-btn--secondary",onClick:n,children:d}),h.jsx("button",{type:"button",className:"ui-btn ui-btn--danger",onClick:p,children:c})]})]})})}const Cd="plant-images";function T2(){const{slug:r="",bedId:n=""}=My(),[a,s]=S.useState(null),[o,c]=S.useState(""),[d,p]=S.useState(null),[m,g]=S.useState(void 0),[y,b]=S.useState(void 0),[w,x]=S.useState([]),[T,C]=S.useState([]),[A,j]=S.useState(!1),[z,E]=S.useState(void 0),[I,V]=S.useState(0),[Y,B]=S.useState(!1),[J,ie]=S.useState(!1),[oe,de]=S.useState(null),[_e,Ne]=S.useState(!1),[Me,Ee]=S.useState(null),[P,Q]=S.useState(!0),[X,le]=S.useState(!1),[N,q]=S.useState(null),[ae,ee]=S.useState([]),ce=S.useRef(null),Se=S.useRef(null),he=S.useRef(null),Le=S.useRef(null),[,xe]=S.useState(0),[et,te]=S.useState(void 0),[se,Z]=S.useState(window.matchMedia("(max-width: 959px)").matches),[fe,pe]=S.useState(!1),[Te,it]=S.useState(!1),[ze,Pt]=S.useState(null),[Rt,Kt]=S.useState(null),[Xt,la]=S.useState(null),An=S.useCallback(async()=>{try{B(!1);const $=await IS(n);s($.bed);const K=localStorage.getItem(`bed-${n}-selected-image`),ne=await fx(n);x(ne);let re=$.image;$.bed?.main_image_id&&ne.find(ve=>ve.id===$.bed?.main_image_id)?re=ne.find(ve=>ve.id===$.bed?.main_image_id)||$.image:K&&ne.find(ve=>ve.id===K)&&(re=ne.find(ve=>ve.id===K)||$.image),c(re?W.storage.from("plant-images").getPublicUrl(re.image_path).data.publicUrl:""),p(re?.image_path??null),g(re?.id),b($.bed?.main_image_id??void 0),C($.pins),B(!0)}catch($){console.error("Error refreshing bed data:",$),B(!1),s(null),x([]),C([]),c("")}},[n]);S.useEffect(()=>{n&&n.trim()!==""?An():B(!1)},[n,An]),S.useEffect(()=>{const $=()=>xe(ve=>ve+1);window.addEventListener("resize",$);const K=setInterval($,500),ne=window.matchMedia("(max-width: 959px)"),re=ve=>Z(ve.matches);return ne.addEventListener("change",re),()=>{window.removeEventListener("resize",$),clearInterval(K),ne.removeEventListener("change",re)}},[]),S.useEffect(()=>{const $=K=>{const ne=K.detail;if(!ne?.id)return;const re=T.find(ve=>ve.id===ne.id);re&&(E(re),pe(!0))};return window.addEventListener("pin-selected",$),()=>window.removeEventListener("pin-selected",$)},[T]);const kt=S.useCallback(()=>{const $=Se.current?.getBoundingClientRect(),K=he.current?.getBoundingClientRect(),ne=$?.height??0,re=K?.height??0,ve=document.querySelector(".sidebar"),ot=ve&&parseInt(getComputedStyle(ve).gap||"10",10)||10,jt=Math.max(0,ne-(re+ot)),Qt=Math.max(jt,300);te(Qt||void 0)},[]),$a=S.useCallback(()=>{const $=setTimeout(kt,100);return()=>clearTimeout($)},[kt]);S.useLayoutEffect(()=>{kt();const $=new ResizeObserver(kt);return Se.current&&$.observe(Se.current),he.current&&$.observe(he.current),window.addEventListener("resize",kt),()=>{$.disconnect(),window.removeEventListener("resize",kt)}},[o,I,P,kt]),S.useEffect(()=>$a(),[w.length,$a]),S.useEffect(()=>{const $=he.current;if(!$)return;let K=null;const ne=()=>{const ve=performance.now(),ot=()=>{kt(),performance.now()-ve<400?K=requestAnimationFrame(ot):(K=null,kt())};K==null&&(K=requestAnimationFrame(ot))},re=()=>{K&&cancelAnimationFrame(K),K=null,kt()};return $.addEventListener("transitionstart",ne),$.addEventListener("transitionrun",ne),$.addEventListener("transitionend",re),()=>{$.removeEventListener("transitionstart",ne),$.removeEventListener("transitionrun",ne),$.removeEventListener("transitionend",re),K&&cancelAnimationFrame(K)}},[kt]),S.useEffect(()=>{const $=window.matchMedia("(max-width: 768px)"),K=a?.filmstrip_visible;Q(K===!0||K===!1?!!K:!$.matches)},[a]);const Bn=async $=>{if(!a)return;const K=m,ne=($.name.split(".").pop()||"jpg").toLowerCase(),re=`${a.section}/${a.name}/${qo()}.${ne}`,{error:ve}=await W.storage.from(Cd).upload(re,$,{cacheControl:"3600",upsert:!1,contentType:$.type||"image/jpeg"});if(ve)return alert(ve.message);const{data:ot,error:jt}=await W.from("bed_images").insert({bed_id:a.id,image_path:re}).select("*").single();if(jt)return alert(jt.message);x(Qt=>[ot,...Qt]);const{data:yn}=W.storage.from(Cd).getPublicUrl(re);if(c(yn.publicUrl),p(re),g(ot.id),K){const Qt=T.filter(Nn=>Nn.image_id===K);Qt.length>0&&(q(ot.id),ee(Qt),le(!0))}},vt=async $=>{if(x(K=>K.filter(ne=>ne.id!==$)),w.find(K=>K.id===$)?.image_path===d){const K=w.filter(ne=>ne.id!==$);if(K.length>0){const ne=K[0],{data:re}=W.storage.from("plant-images").getPublicUrl(ne.image_path);c(re.publicUrl),p(ne.image_path),g(ne.id),localStorage.setItem(`bed-${n}-selected-image`,ne.id)}else c(""),p(null),g(void 0),localStorage.removeItem(`bed-${n}-selected-image`)}await An()},sn=$=>{Ee($),Ne(!0)},mt=async()=>{if(!Me)return;const $=w.find(K=>K.id===Me);if(!$){Ne(!1),Ee(null);return}try{const{error:K}=await W.from("pins").delete().eq("image_id",Me);K&&console.error("Pin deletion error:",K);const{error:ne}=await W.storage.from(Cd).remove([$.image_path]);ne&&console.error("Storage deletion error:",ne);const{error:re}=await W.from("bed_images").delete().eq("id",Me);if(re)throw re;let ve=null;const ot=w.filter(jt=>jt.id!==Me);if(ot.length>0&&(ve=ot[0].id),n&&a?.main_image_id===Me){const{error:jt}=await W.from("beds").update({main_image_id:ve}).eq("id",n);jt&&console.error("Failed to update bed main image after delete:",jt),s(yn=>yn&&{...yn,main_image_id:ve}),b(ve??void 0)}await vt(Me)}catch(K){const ne=K instanceof Error?K.message:(()=>{try{return JSON.stringify(K)}catch{return String(K)}})();alert(`Failed to delete image: ${ne}`)}finally{Ne(!1),Ee(null)}},On=async $=>{const K=w.find(re=>re.id===$);if(!K)return;const{data:ne}=W.storage.from("plant-images").getPublicUrl(K.image_path);if(c(ne.publicUrl),p(K.image_path),g(K.id),b(K.id),n){const{error:re}=await W.from("beds").update({main_image_id:K.id}).eq("id",n);re?console.error("Failed to persist main image:",re):s(ve=>ve&&{...ve,main_image_id:K.id})}localStorage.setItem(`bed-${n}-selected-image`,K.id)},Va=$=>{E($),j(!0)},Fa=async $=>{try{const K=$.filter(ne=>{const re=T.find(ve=>ve.id===ne.id);return re&&(Math.abs(re.x-ne.x)>.001||Math.abs(re.y-ne.y)>.001)});if(K.length===0)return;ie(!0),de(null);for(const ne of K){const{error:re}=await W.from("pins").update({x:ne.x,y:ne.y,updated_at:new Date().toISOString()}).eq("id",ne.id);if(re)throw console.error(`Failed to update pin ${ne.id}:`,re),new Error(`Failed to update pin: ${re.message}`)}C($)}catch(K){console.error("Failed to save pin positions:",K),de({type:"error",message:K instanceof Error?K.message:"Failed to save pin positions"}),setTimeout(()=>de(null),5e3)}finally{ie(!1)}};return h.jsxs("main",{className:"app-root container",tabIndex:0,onClick:$=>{const K=$.target;K.closest(".image-shell")||K.closest(".panel--images")||K.closest(".panel.panel--images")||K.closest(".pin-rows")||K.closest(".pin-row")||K.closest(".pin-edit")||E(void 0)},children:[!Y&&h.jsx("div",{style:{padding:"16px",textAlign:"center",color:"#6b7280",fontSize:"14px"},children:"Loading bed information..."}),oe&&h.jsx("div",{style:{padding:"8px 12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px",backgroundColor:oe.type==="success"?"#ecfdf5":"#fef2f2",color:oe.type==="success"?"#065f46":"#991b1b",border:`1px solid ${oe.type==="success"?"#a7f3d0":"#fecaca"}`},children:oe.message}),Y?h.jsxs("div",{className:"page-grid",style:{alignItems:"start"},children:[h.jsx("div",{className:"left-col",children:o?h.jsx(h.Fragment,{children:h.jsx("div",{className:"pinboard-stage",children:h.jsx("div",{className:"image-shell card",ref:Se,children:h.jsx(mx,{bedId:n,imageUrl:`${o}?v=${I}`,imageId:m,section:r,bedName:a?.name??"",onCreateAt:Va,onEditPin:$=>{E($),j(!0)},onPinsChange:Fa,useExternalEditor:!0,showInlineHint:!0,pins:m?T.filter($=>$.image_id===m):T,selectedPinId:z&&"id"in z?z.id:void 0,allowCreate:Te,onSelect:$=>{E($||void 0),pe(!1)},children:w.length>0&&h.jsx(x2,{timestamp:new Date(w.find($=>$.image_path===d)?.created_at??Date.now()).toLocaleString()})})})})}):h.jsx("div",{className:"panel-empty",children:"This bed has no image yet. Use “Change image”."})}),h.jsxs(wx,{children:[h.jsx(bx,{pins:m?T.filter($=>$.image_id===m):T,selectedPinId:z&&"id"in z?z.id:void 0,fullHeight:se?void 0:et,cardRef:Le,promoteSelected:fe,addMode:Te,onToggleAddMode:()=>it($=>!$),onOpenGallery:$=>la($),showGalleryStrip:!1,onSelect:$=>{E($||void 0),pe(!1)},onOpen:$=>{E($),j(!0)}}),h.jsxs("div",{className:"card panel panel--images",ref:he,children:[h.jsxs("div",{className:"panel-head",children:[h.jsx("div",{className:"panel-title",children:"Gallery"}),h.jsxs("div",{className:"panel-actions",style:{marginLeft:"auto"},children:[h.jsx("button",{type:"button",className:"ui-btn ui-btn--sm ui-btn--ghost toggle-btn",onClick:async()=>{const $=!P;if(Q($),n){const{data:K,error:ne}=await W.from("beds").update({filmstrip_visible:$}).eq("id",n).select("filmstrip_visible").single();ne||s(re=>re&&{...re,filmstrip_visible:K?.filmstrip_visible??$})}},"aria-expanded":P,"aria-controls":"filmstrip-collapsible",children:P?"Hide":"Show"}),h.jsx("button",{type:"button",className:"ui-btn ui-btn--sm",onClick:()=>ce.current?.click(),"aria-label":"Upload image",children:"Upload"})]})]}),h.jsx("div",{id:"filmstrip-collapsible",className:`filmstrip-collapsible ${P?"open":"closed"}`,style:{display:"grid"},children:(()=>{const $=w.map(ne=>{const{data:re}=W.storage.from("plant-images").getPublicUrl(ne.image_path),ve=ne.exif_date,ot=ve?new Date(ve):ne.created_at?new Date(ne.created_at):null,jt=ot?ot.toLocaleDateString():void 0;return{id:ne.id,url:re.publicUrl,label:jt}}),K=w.find(ne=>ne.image_path===d)?.id;return P?h.jsx(t2,{items:$,activeId:K,mainImageId:y,onSelect:ne=>{const re=w.find(ot=>ot.id===ne);if(!re)return;const{data:ve}=W.storage.from("plant-images").getPublicUrl(re.image_path);g(re.id),p(re.image_path),c(ve.publicUrl),localStorage.setItem(`bed-${n}-selected-image`,re.id)},onDelete:sn,onSetMain:On,pins:T,bedId:n}):null})()}),h.jsx("input",{ref:ce,type:"file",accept:"image/*",style:{display:"none"},onChange:$=>{const K=$.target.files?.[0];K&&Bn(K),$.currentTarget.value=""}})]})]})]}):h.jsx("div",{style:{padding:"32px",textAlign:"center",color:"#6b7280",fontSize:"16px"},children:a?"Loading bed content...":"Failed to load bed information. Please check the console for errors."}),h.jsx(y2,{open:A,onClose:()=>j(!1),bedId:n,imageId:m,initial:z,onSaved:$=>{C(K=>{const ne=K.findIndex(re=>re.id===$.id);if(ne>=0){const re=K.slice();return re[ne]=$,re}return[$,...K]}),V(K=>K+1)},onDeleted:$=>{C(K=>K.filter(ne=>ne.id!==$)),V(K=>K+1)},onOpenPinGallery:$=>Kt($)}),ze?h.jsx(n2,{plantId:ze.plantId,onClose:()=>Pt(null),linkBack:{imageId:m,pinId:ze.pinId},onViewOnMap:({imageId:$,pinId:K})=>{if(!$)return;const ne=w.find(re=>re.id===$);if(ne){const{data:re}=W.storage.from("plant-images").getPublicUrl(ne.image_path);g(ne.id),p(ne.image_path),c(re.publicUrl)}if(K){const re=T.find(ve=>ve.id===K);re&&(E(re),pe(!0))}Pt(null)}}):null,Rt?h.jsx(a2,{pinId:Rt.pinId,imageId:m,onClose:()=>Kt(null)}):null,Xt?h.jsx(i2,{pinId:Xt.pinId,onClose:()=>la(null)}):null,h.jsx(Ey,{isOpen:_e,onClose:()=>{Ne(!1),Ee(null)},onConfirm:mt,title:"Delete Image",message:"Are you sure you want to delete this image? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel"}),h.jsx(Ey,{isOpen:X,onClose:()=>{le(!1),q(null),ee([])},onConfirm:async()=>{if(!(!N||!a))try{const $=ae.map(K=>({bed_id:a.id,image_id:N,name:K.name??null,notes:K.notes??null,x:K.x,y:K.y}));if($.length>0){const{data:K,error:ne}=await W.from("pins").insert($).select("*");if(ne)throw ne;const re=K??[];C(ve=>[...re,...ve])}}catch($){console.error("Failed to import pins:",$),console.warn("Import failed:",$ instanceof Error?$.message:String($))}finally{le(!1),q(null),ee([])}},title:"Import pins?",message:"Import pins from the most recent image into this new image?",confirmText:"Yes, import",cancelText:"No"})]})}function E2({bedName:r}){const[n,a]=S.useState(!1),s=()=>{a(!n)};return h.jsxs("header",{className:"site-header",children:[h.jsxs("div",{className:"site-header__inner container",children:[h.jsx(Ua,{to:"/",className:"brand",children:"Plants de Louton"}),h.jsx("button",{className:"mobile-menu-btn",onClick:s,"aria-label":"Toggle navigation menu","aria-expanded":n,children:h.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n?h.jsx("path",{d:"M18 6L6 18M6 6l12 12"}):h.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})}),h.jsxs("nav",{className:`main-nav ${n?"mobile-open":""}`,"aria-label":"Sections",children:[h.jsx(Nd,{to:"/section/front-yard",className:({isActive:o})=>`ui-btn ui-btn--sm ui-btn--ghost ${o?"is-active":""}`,end:!0,onClick:()=>a(!1),children:"Front yard"}),h.jsx(Nd,{to:"/section/back-yard",className:({isActive:o})=>`ui-btn ui-btn--sm ui-btn--ghost ${o?"is-active":""}`,end:!0,onClick:()=>a(!1),children:"Back yard"})]}),h.jsx("div",{style:{flex:1}}),r&&h.jsx("div",{className:"bed-name",children:r})]}),n&&h.jsx("div",{className:"mobile-menu-overlay",onClick:()=>a(!1),children:h.jsxs("div",{className:"mobile-menu-content",onClick:o=>o.stopPropagation(),children:[h.jsxs("div",{className:"mobile-menu-header",children:[h.jsx("h3",{children:"Navigation"}),h.jsx("button",{className:"mobile-menu-close",onClick:()=>a(!1),"aria-label":"Close menu",children:h.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),h.jsxs("nav",{className:"mobile-menu-nav",children:[h.jsxs(Ua,{to:"/",className:"mobile-menu-item",onClick:()=>a(!1),children:[h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"})}),"Garden Overview"]}),h.jsxs(Ua,{to:"/section/front-yard",className:"mobile-menu-item",onClick:()=>a(!1),children:[h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})}),"Front Yard"]}),h.jsxs(Ua,{to:"/section/back-yard",className:"mobile-menu-item",onClick:()=>a(!1),children:[h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})}),"Back Yard"]})]})]})})]})}function j2(){const n=ra().pathname.includes("/bed/");let a;return n&&(a="Shed bed"),h.jsxs(h.Fragment,{children:[h.jsx(E2,{bedName:a}),h.jsx("div",{className:"app-shell",children:h.jsx(zw,{})})]})}function C2(){return h.jsx(u1,{children:h.jsx(qw,{children:h.jsxs(fi,{element:h.jsx(j2,{}),children:[h.jsx(fi,{path:"/",element:h.jsx(RS,{})}),h.jsx(fi,{path:"/section/:slug",element:h.jsx(zS,{})}),h.jsx(fi,{path:"/section/:slug/bed/:bedId",element:h.jsx(T2,{})}),h.jsx(fi,{path:"/onboarding",element:h.jsx(lv,{})}),h.jsx(fi,{path:"/map/:slug",element:h.jsx(Bw,{to:"/section/:slug",replace:!0})})]})})})}Yb.createRoot(document.getElementById("root")).render(h.jsx(S.StrictMode,{children:h.jsx(C2,{})}));
